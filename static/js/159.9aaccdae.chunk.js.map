{"version":3,"sources":["node_modules/@arcgis/core/identity/IdentityForm.js","node_modules/focus-trap/dist/focus-trap.esm.js","node_modules/tabbable/dist/index.esm.js","node_modules/@arcgis/core/identity/IdentityModal.js","node_modules/@arcgis/core/identity/OAuthCredential.js","node_modules/@arcgis/core/identity/OAuthInfo.js","node_modules/@arcgis/core/identity/ServerInfo.js","node_modules/@arcgis/core/identity/IdentityManagerBase.js","node_modules/@arcgis/core/identity/IdentityManager.js"],"names":["s","e","super","this","_usernameInputNode","_passwordInputNode","messages","signingIn","server","resource","error","oAuthPrompt","t","o","n","a","d","class","oAuthInfo","info","test","lblItem","c","key","lblUser","value","required","autocomplete","spellcheck","type","bind","afterCreate","m","lblPwd","h","classes","disabled","lblSigning","lblOk","lblCancel","onclick","_cancel","g","details","httpStatus","invalidUser","noAuthService","onsubmit","_submit","_set","emit","preventDefault","username","password","prototype","activeFocusDelay","candidateSelectors","candidateSelector","join","matches","Element","msMatchesSelector","webkitMatchesSelector","getCandidates","el","includeContainer","filter","candidates","Array","slice","apply","querySelectorAll","call","unshift","getTabindex","node","tabindexAttr","parseInt","getAttribute","isNaN","contentEditable","isContentEditable","nodeName","tabIndex","sortOrderedTabbables","b","documentOrder","isInput","tagName","isNonTabbableRadio","isRadio","name","radioSet","radioScope","form","ownerDocument","queryRadios","window","CSS","escape","err","console","message","checked","nodes","i","length","getCheckedRadio","isTabbableRadio","isNodeMatchingSelectorFocusable","options","isHiddenInput","displayCheck","getComputedStyle","visibility","nodeUnderDetails","parentElement","_node$getBoundingClie","getBoundingClientRect","width","height","display","isHidden","children","some","child","isDetailsWithSummary","parentNode","item","contains","isDisabledFromFieldset","isNodeMatchingSelectorTabbable","focusableCandidateSelector","concat","isFocusable","Error","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","push","_defineProperty","obj","defineProperty","configurable","writable","activeFocusTraps","trapQueue","activateTrap","trap","activeTrap","pause","trapIndex","indexOf","splice","deactivateTrap","unpause","delay","fn","setTimeout","findIndex","arr","idx","every","valueOrHandler","_len","arguments","params","_key","elements","userOptions","doc","document","config","target","source","forEach","getOwnPropertyDescriptors","defineProperties","_objectSpread2","returnFocusOnDeactivate","escapeDeactivates","delayInitialFocus","state","containers","tabbableGroups","nodeFocusedBeforeActivation","mostRecentlyFocusedNode","active","paused","getOption","configOverrideOptions","optionName","configOptionName","undefined","containersContain","element","container","getNodeForOption","optionValue","querySelector","getInitialFocusNode","activeElement","firstTabbableGroup","firstTabbableNode","updateTabbableNodes","map","tabbableNodes","regularTabbables","orderedTabbables","candidate","candidateTabindex","sort","tabbable","lastTabbableNode","group","tryFocus","focus","preventScroll","toLowerCase","select","isSelectableInput","getReturnFocusNode","previousActiveElement","checkPointerDown","clickOutsideDeactivates","deactivate","returnFocus","allowOutsideClick","checkFocusIn","targetContained","Document","stopImmediatePropagation","checkKey","keyCode","isEscapeEvent","isTabEvent","destinationNode","containerIndex","_ref","shiftKey","startOfGroupIndex","_ref2","destinationGroupIndex","lastOfGroupIndex","_ref3","_destinationGroupIndex","checkTab","checkClick","addListeners","addEventListener","capture","passive","removeListeners","removeEventListener","activate","activateOptions","onActivate","onPostActivate","checkCanFocusTrap","finishActivation","then","deactivateOptions","clearTimeout","onDeactivate","onPostDeactivate","checkCanReturnFocus","finishDeactivation","updateContainerElements","containerElements","elementsAsArray","Boolean","createElement","content","open","_close","body","appendChild","own","watch","_toggleFocusTrap","_destroyFocusTrap","id","title","r","close","l","p","u","role","_createFocusTrap","_renderContent","_focusTrap","requestAnimationFrame","initialFocus","cancelAnimationFrame","innerHTML","render","HTMLElement","_attachToNode","readOnly","aliasOf","storage","appId","expires","ssl","token","userId","_init","Date","now","minTimeUntilExpiration","_load","authNamespace","portalUrl","setItem","JSON","stringify","log","replace","FormData","append","navigator","sendBeacon","XMLHttpRequest","send","_oAuthCred","getItem","parse","declaredClass","expiration","forceLogin","forceUserId","locale","popup","popupCallbackUrl","popupWindowFeatures","preserveUrlHash","fromJSON","toJSON","json","write","adminTokenServiceUrl","currentVersion","hasPortal","hasServer","owningSystemUrl","owningTenant","shortLivedTokenValidity","tokenServiceUrl","webTierAuth","R","host","P","C","D","localStorage","sessionStorage","_portalConfig","esriGeowConfig","serverInfos","oAuthInfos","credentials","_soReqs","_xoReqs","_portals","defaultOAuthInfo","defaultTokenValidity","dialog","formConstructor","tokenValidity","normalizeWebTierAuth","_appOrigin","origin","location","_appUrlObj","href","_busy","_rejectOnPersistedPageShow","_oAuthHash","_gwTokenUrl","_agsRest","_agsPortal","_agsAdmin","_adminSvcs","_gwDomains","regex","customBaseUrl","_legacyFed","_regexSDirUrl","_regexServerType","_gwUser","_gwItem","_gwGroup","_rePortalTokenSvc","_createDefaultOAuthInfo","_hasTestedIfAppIsOnPortal","_getOAuthHash","_pageShowHandler","findServerInfo","findOAuthInfo","_sanitizeUrl","_isServerRsrc","_getServerInstanceRoot","_getTokenSvcUrl","registerServers","_findCredential","assign","j","scope","resources","emitTokenChange","refreshServerTokens","registerOAuthInfos","_hasSameServerInstance","_getIdenticalSvcIdx","prompt","signal","abort","reject","promise","_isAdminResource","findCredential","_","destroy","f","resolve","_restInfoPms","_selfReq","selfDfd","_getPortalSelf","_enqueue","_isRESTService","isAdmin","serverUrl","customParameters","scheme","uri","port","v","query","request","referer","client","method","authMode","useProxy","_useProxy","ioArgs","withCredentials","data","validity","checkAppAccess","credential","getCredential","_doPortalSignIn","force","client_id","valid","viewOnlyUserTypeApp","catch","viewOnly","_oAuthDfd","clearInterval","_oAuthIntervalId","_oAuthOnHashHandle","remove","charAt","substring","error_description","sinfo_","oinfo_","access_token","Number","expires_in","persist","save","_oAuthRedirectFunc","_protocolFunc","getResourceName","on","generateToken","oAuthWin_","closed","resUrl_","oAuthPopupConfirmation","_doOAuthSignIn","_postMessageAuthHandle","endsWith","postMessage","hash","hasOwnProperty","persisted","isBusy","_errbackFunc","_addResource","_removeResource","_isIdProvider","_isPortalDomain","String","search","substr","_normalizeAGOLorgDomain","proxyUrl","path","_getSuffix","restBaseUrl","_isIdenticalService","adminUrl","_getOrigin","headers","Promise","allSSL","portalMode","supportsOAuth","startsWith","trim","resourceUrl","serverInfo","options_","admin_","refresh_","_doSignIn","creationTime","shift","_findOAuthInfo","parent","isValid","_pendingDfd","_exchangeToken","oAuthState","oAuthSignIn","_getPlatformSelf","_checkProtocol","signIn","user","portalToken","tokenExpiration","parseFloat","_generateOAuthInfo","accountId","redirect_uri","clone","urlKey","top","response_type","force_login","prepopulatedusername","redirectToUserOrgUrl","setInterval","setOAuthResponseHash","detail","authorizeParams","authorizeUrl","EventedAccessor","tokenRefreshBuffer","_enqueued","refreshToken","_refreshTimer","_startRefreshTimer"],"mappings":"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","file":"static/js/159.9aaccdae.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import{substitute as r}from\"../intl/substitute.js\";import o from\"../widgets/Widget.js\";import{storeNode as i}from\"../widgets/support/widgetUtils.js\";import{messageBundle as n}from\"../widgets/support/decorators/messageBundle.js\";import{tsx as u}from\"../widgets/support/jsxFactory.js\";const l={base:\"esri-identity-form\",group:\"esri-identity-form__group\",label:\"esri-identity-form__label\",footer:\"esri-identity-form__footer\",esriInput:\"esri-input\",esriButton:\"esri-button\",esriButtonSecondary:\"esri-button--secondary\"},p=\"ArcGIS Online\";let a=class extends o{constructor(s,e){super(s,e),this._usernameInputNode=null,this._passwordInputNode=null,this.messages=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1}render(){const{error:s,server:e,resource:t,signingIn:o,oAuthPrompt:n,messages:a}=this,d=u(\"div\",{class:l.group},r(n?a.oAuthInfo:a.info,{server:/\\.arcgis\\.com/i.test(e)?p:e,resource:`(${t||a.lblItem})`})),c=n?null:u(\"div\",{class:l.group,key:\"username\"},u(\"label\",{class:l.label},a.lblUser,u(\"input\",{value:\"\",required:!0,autocomplete:\"off\",spellcheck:!1,type:\"text\",bind:this,afterCreate:i,\"data-node-ref\":\"_usernameInputNode\",class:l.esriInput}))),m=n?null:u(\"div\",{class:l.group,key:\"password\"},u(\"label\",{class:l.label},a.lblPwd,u(\"input\",{value:\"\",required:!0,type:\"password\",bind:this,afterCreate:i,\"data-node-ref\":\"_passwordInputNode\",class:l.esriInput}))),h=u(\"div\",{class:this.classes(l.group,l.footer)},u(\"input\",{type:\"submit\",disabled:!!o,value:o?a.lblSigning:a.lblOk,class:l.esriButton}),u(\"input\",{type:\"button\",value:a.lblCancel,bind:this,onclick:this._cancel,class:this.classes(l.esriButton,l.esriButtonSecondary)})),g=s?u(\"div\",null,s.details&&s.details.httpStatus?a.invalidUser:a.noAuthService):null;return u(\"form\",{class:l.base,bind:this,onsubmit:this._submit},d,g,c,m,h)}_cancel(){this._set(\"signingIn\",!1),this._usernameInputNode&&(this._usernameInputNode.value=\"\"),this._passwordInputNode&&(this._passwordInputNode.value=\"\"),this.emit(\"cancel\")}_submit(s){s.preventDefault(),this._set(\"signingIn\",!0);const e=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit(\"submit\",e)}};s([e(),n(\"esri/identity/t9n/identity\")],a.prototype,\"messages\",void 0),s([e()],a.prototype,\"signingIn\",void 0),s([e()],a.prototype,\"server\",void 0),s([e()],a.prototype,\"resource\",void 0),s([e()],a.prototype,\"error\",void 0),s([e()],a.prototype,\"oAuthPrompt\",void 0),a=s([t(\"esri.identity.IdentityForm\")],a);var d=a;export default d;\n","/*!\n* focus-trap 6.5.1\n* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE\n*/\nimport { tabbable, isFocusable } from 'tabbable';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar activeFocusDelay;\n\nvar activeFocusTraps = function () {\n  var trapQueue = [];\n  return {\n    activateTrap: function activateTrap(trap) {\n      if (trapQueue.length > 0) {\n        var activeTrap = trapQueue[trapQueue.length - 1];\n\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n    deactivateTrap: function deactivateTrap(trap) {\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    }\n  };\n}();\n\nvar isSelectableInput = function isSelectableInput(node) {\n  return node.tagName && node.tagName.toLowerCase() === 'input' && typeof node.select === 'function';\n};\n\nvar isEscapeEvent = function isEscapeEvent(e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n};\n\nvar isTabEvent = function isTabEvent(e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n};\n\nvar delay = function delay(fn) {\n  return setTimeout(fn, 0);\n}; // Array.find/findIndex() are not supported on IE; this replicates enough\n//  of Array.findIndex() for our needs\n\n\nvar findIndex = function findIndex(arr, fn) {\n  var idx = -1;\n  arr.every(function (value, i) {\n    if (fn(value)) {\n      idx = i;\n      return false; // break\n    }\n\n    return true; // next\n  });\n  return idx;\n};\n/**\n * Get an option's value when it could be a plain value, or a handler that provides\n *  the value.\n * @param {*} value Option's value to check.\n * @param {...*} [params] Any parameters to pass to the handler, if `value` is a function.\n * @returns {*} The `value`, or the handler's returned value.\n */\n\n\nvar valueOrHandler = function valueOrHandler(value) {\n  for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    params[_key - 1] = arguments[_key];\n  }\n\n  return typeof value === 'function' ? value.apply(void 0, params) : value;\n};\n\nvar createFocusTrap = function createFocusTrap(elements, userOptions) {\n  var doc = document;\n\n  var config = _objectSpread2({\n    returnFocusOnDeactivate: true,\n    escapeDeactivates: true,\n    delayInitialFocus: true\n  }, userOptions);\n\n  var state = {\n    // @type {Array<HTMLElement>}\n    containers: [],\n    // list of objects identifying the first and last tabbable nodes in all containers/groups in\n    //  the trap\n    // NOTE: it's possible that a group has no tabbable nodes if nodes get removed while the trap\n    //  is active, but the trap should never get to a state where there isn't at least one group\n    //  with at least one tabbable node in it (that would lead to an error condition that would\n    //  result in an error being thrown)\n    // @type {Array<{ container: HTMLElement, firstTabbableNode: HTMLElement|null, lastTabbableNode: HTMLElement|null }>}\n    tabbableGroups: [],\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false\n  };\n  var trap; // eslint-disable-line prefer-const -- some private functions reference it, and its methods reference private functions, so we must declare here and define later\n\n  var getOption = function getOption(configOverrideOptions, optionName, configOptionName) {\n    return configOverrideOptions && configOverrideOptions[optionName] !== undefined ? configOverrideOptions[optionName] : config[configOptionName || optionName];\n  };\n\n  var containersContain = function containersContain(element) {\n    return state.containers.some(function (container) {\n      return container.contains(element);\n    });\n  };\n\n  var getNodeForOption = function getNodeForOption(optionName) {\n    var optionValue = config[optionName];\n\n    if (!optionValue) {\n      return null;\n    }\n\n    var node = optionValue;\n\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue);\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` refers to no known node\"));\n      }\n    }\n\n    if (typeof optionValue === 'function') {\n      node = optionValue();\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` did not return a node\"));\n      }\n    }\n\n    return node;\n  };\n\n  var getInitialFocusNode = function getInitialFocusNode() {\n    var node;\n\n    if (getNodeForOption('initialFocus') !== null) {\n      node = getNodeForOption('initialFocus');\n    } else if (containersContain(doc.activeElement)) {\n      node = doc.activeElement;\n    } else {\n      var firstTabbableGroup = state.tabbableGroups[0];\n      var firstTabbableNode = firstTabbableGroup && firstTabbableGroup.firstTabbableNode;\n      node = firstTabbableNode || getNodeForOption('fallbackFocus');\n    }\n\n    if (!node) {\n      throw new Error('Your focus-trap needs to have at least one focusable element');\n    }\n\n    return node;\n  };\n\n  var updateTabbableNodes = function updateTabbableNodes() {\n    state.tabbableGroups = state.containers.map(function (container) {\n      var tabbableNodes = tabbable(container);\n\n      if (tabbableNodes.length > 0) {\n        return {\n          container: container,\n          firstTabbableNode: tabbableNodes[0],\n          lastTabbableNode: tabbableNodes[tabbableNodes.length - 1]\n        };\n      }\n\n      return undefined;\n    }).filter(function (group) {\n      return !!group;\n    }); // remove groups with no tabbable nodes\n    // throw if no groups have tabbable nodes and we don't have a fallback focus node either\n\n    if (state.tabbableGroups.length <= 0 && !getNodeForOption('fallbackFocus')) {\n      throw new Error('Your focus-trap must have at least one container with at least one tabbable node in it at all times');\n    }\n  };\n\n  var tryFocus = function tryFocus(node) {\n    if (node === doc.activeElement) {\n      return;\n    }\n\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n\n    node.focus({\n      preventScroll: !!config.preventScroll\n    });\n    state.mostRecentlyFocusedNode = node;\n\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  };\n\n  var getReturnFocusNode = function getReturnFocusNode(previousActiveElement) {\n    var node = getNodeForOption('setReturnFocus');\n    return node ? node : previousActiveElement;\n  }; // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n\n\n  var checkPointerDown = function checkPointerDown(e) {\n    if (containersContain(e.target)) {\n      // allow the click since it ocurred inside the trap\n      return;\n    }\n\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      // immediately deactivate the trap\n      trap.deactivate({\n        // if, on deactivation, we should return focus to the node originally-focused\n        //  when the trap was activated (or the configured `setReturnFocus` node),\n        //  then assume it's also OK to return focus to the outside node that was\n        //  just clicked, causing deactivation, as long as that node is focusable;\n        //  if it isn't focusable, then return focus to the original node focused\n        //  on activation (or the configured `setReturnFocus` node)\n        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,\n        //  which will result in the outside click setting focus to the node\n        //  that was clicked, whether it's focusable or not; by setting\n        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused\n        //  on activation (or the configured `setReturnFocus` node)\n        returnFocus: config.returnFocusOnDeactivate && !isFocusable(e.target)\n      });\n      return;\n    } // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n\n\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      // allow the click outside the trap to take place\n      return;\n    } // otherwise, prevent the click\n\n\n    e.preventDefault();\n  }; // In case focus escapes the trap for some strange reason, pull it back in.\n\n\n  var checkFocusIn = function checkFocusIn(e) {\n    var targetContained = containersContain(e.target); // In Firefox when you Tab out of an iframe the Document is briefly focused.\n\n    if (targetContained || e.target instanceof Document) {\n      if (targetContained) {\n        state.mostRecentlyFocusedNode = e.target;\n      }\n    } else {\n      // escaped! pull it back in to where it just left\n      e.stopImmediatePropagation();\n      tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n    }\n  }; // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n\n\n  var checkTab = function checkTab(e) {\n    updateTabbableNodes();\n    var destinationNode = null;\n\n    if (state.tabbableGroups.length > 0) {\n      // make sure the target is actually contained in a group\n      // NOTE: the target may also be the container itself if it's tabbable\n      //  with tabIndex='-1' and was given initial focus\n      var containerIndex = findIndex(state.tabbableGroups, function (_ref) {\n        var container = _ref.container;\n        return container.contains(e.target);\n      });\n\n      if (containerIndex < 0) {\n        // target not found in any group: quite possible focus has escaped the trap,\n        //  so bring it back in to...\n        if (e.shiftKey) {\n          // ...the last node in the last group\n          destinationNode = state.tabbableGroups[state.tabbableGroups.length - 1].lastTabbableNode;\n        } else {\n          // ...the first node in the first group\n          destinationNode = state.tabbableGroups[0].firstTabbableNode;\n        }\n      } else if (e.shiftKey) {\n        // REVERSE\n        // is the target the first tabbable node in a group?\n        var startOfGroupIndex = findIndex(state.tabbableGroups, function (_ref2) {\n          var firstTabbableNode = _ref2.firstTabbableNode;\n          return e.target === firstTabbableNode;\n        });\n\n        if (startOfGroupIndex < 0 && state.tabbableGroups[containerIndex].container === e.target) {\n          // an exception case where the target is the container itself, in which\n          //  case, we should handle shift+tab as if focus were on the container's\n          //  first tabbable node, and go to the last tabbable node of the LAST group\n          startOfGroupIndex = containerIndex;\n        }\n\n        if (startOfGroupIndex >= 0) {\n          // YES: then shift+tab should go to the last tabbable node in the\n          //  previous group (and wrap around to the last tabbable node of\n          //  the LAST group if it's the first tabbable node of the FIRST group)\n          var destinationGroupIndex = startOfGroupIndex === 0 ? state.tabbableGroups.length - 1 : startOfGroupIndex - 1;\n          var destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.lastTabbableNode;\n        }\n      } else {\n        // FORWARD\n        // is the target the last tabbable node in a group?\n        var lastOfGroupIndex = findIndex(state.tabbableGroups, function (_ref3) {\n          var lastTabbableNode = _ref3.lastTabbableNode;\n          return e.target === lastTabbableNode;\n        });\n\n        if (lastOfGroupIndex < 0 && state.tabbableGroups[containerIndex].container === e.target) {\n          // an exception case where the target is the container itself, in which\n          //  case, we should handle tab as if focus were on the container's\n          //  last tabbable node, and go to the first tabbable node of the FIRST group\n          lastOfGroupIndex = containerIndex;\n        }\n\n        if (lastOfGroupIndex >= 0) {\n          // YES: then tab should go to the first tabbable node in the next\n          //  group (and wrap around to the first tabbable node of the FIRST\n          //  group if it's the last tabbable node of the LAST group)\n          var _destinationGroupIndex = lastOfGroupIndex === state.tabbableGroups.length - 1 ? 0 : lastOfGroupIndex + 1;\n\n          var _destinationGroup = state.tabbableGroups[_destinationGroupIndex];\n          destinationNode = _destinationGroup.firstTabbableNode;\n        }\n      }\n    } else {\n      destinationNode = getNodeForOption('fallbackFocus');\n    }\n\n    if (destinationNode) {\n      e.preventDefault();\n      tryFocus(destinationNode);\n    } // else, let the browser take care of [shift+]tab and move the focus\n\n  };\n\n  var checkKey = function checkKey(e) {\n    if (config.escapeDeactivates !== false && isEscapeEvent(e)) {\n      e.preventDefault();\n      trap.deactivate();\n      return;\n    }\n\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  };\n\n  var checkClick = function checkClick(e) {\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      return;\n    }\n\n    if (containersContain(e.target)) {\n      return;\n    }\n\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }; //\n  // EVENT LISTENERS\n  //\n\n\n  var addListeners = function addListeners() {\n    if (!state.active) {\n      return;\n    } // There can be only one listening focus trap at a time\n\n\n    activeFocusTraps.activateTrap(trap); // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n\n    activeFocusDelay = config.delayInitialFocus ? delay(function () {\n      tryFocus(getInitialFocusNode());\n    }) : tryFocus(getInitialFocusNode());\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false\n    });\n    return trap;\n  };\n\n  var removeListeners = function removeListeners() {\n    if (!state.active) {\n      return;\n    }\n\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n    return trap;\n  }; //\n  // TRAP DEFINITION\n  //\n\n\n  trap = {\n    activate: function activate(activateOptions) {\n      if (state.active) {\n        return this;\n      }\n\n      var onActivate = getOption(activateOptions, 'onActivate');\n      var onPostActivate = getOption(activateOptions, 'onPostActivate');\n      var checkCanFocusTrap = getOption(activateOptions, 'checkCanFocusTrap');\n\n      if (!checkCanFocusTrap) {\n        updateTabbableNodes();\n      }\n\n      state.active = true;\n      state.paused = false;\n      state.nodeFocusedBeforeActivation = doc.activeElement;\n\n      if (onActivate) {\n        onActivate();\n      }\n\n      var finishActivation = function finishActivation() {\n        if (checkCanFocusTrap) {\n          updateTabbableNodes();\n        }\n\n        addListeners();\n\n        if (onPostActivate) {\n          onPostActivate();\n        }\n      };\n\n      if (checkCanFocusTrap) {\n        checkCanFocusTrap(state.containers.concat()).then(finishActivation, finishActivation);\n        return this;\n      }\n\n      finishActivation();\n      return this;\n    },\n    deactivate: function deactivate(deactivateOptions) {\n      if (!state.active) {\n        return this;\n      }\n\n      clearTimeout(activeFocusDelay);\n      removeListeners();\n      state.active = false;\n      state.paused = false;\n      activeFocusTraps.deactivateTrap(trap);\n      var onDeactivate = getOption(deactivateOptions, 'onDeactivate');\n      var onPostDeactivate = getOption(deactivateOptions, 'onPostDeactivate');\n      var checkCanReturnFocus = getOption(deactivateOptions, 'checkCanReturnFocus');\n\n      if (onDeactivate) {\n        onDeactivate();\n      }\n\n      var returnFocus = getOption(deactivateOptions, 'returnFocus', 'returnFocusOnDeactivate');\n\n      var finishDeactivation = function finishDeactivation() {\n        delay(function () {\n          if (returnFocus) {\n            tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n          }\n\n          if (onPostDeactivate) {\n            onPostDeactivate();\n          }\n        });\n      };\n\n      if (returnFocus && checkCanReturnFocus) {\n        checkCanReturnFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation)).then(finishDeactivation, finishDeactivation);\n        return this;\n      }\n\n      finishDeactivation();\n      return this;\n    },\n    pause: function pause() {\n      if (state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = true;\n      removeListeners();\n      return this;\n    },\n    unpause: function unpause() {\n      if (!state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = false;\n      updateTabbableNodes();\n      addListeners();\n      return this;\n    },\n    updateContainerElements: function updateContainerElements(containerElements) {\n      var elementsAsArray = [].concat(containerElements).filter(Boolean);\n      state.containers = elementsAsArray.map(function (element) {\n        return typeof element === 'string' ? doc.querySelector(element) : element;\n      });\n\n      if (state.active) {\n        updateTabbableNodes();\n      }\n\n      return this;\n    }\n  }; // initialize container elements\n\n  trap.updateContainerElements(elements);\n  return trap;\n};\n\nexport { createFocusTrap };\n//# sourceMappingURL=focus-trap.esm.js.map\n","/*!\n* tabbable 5.2.1\n* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE\n*/\nvar candidateSelectors = ['input', 'select', 'textarea', 'a[href]', 'button', '[tabindex]', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable=\"false\"])', 'details>summary:first-of-type', 'details'];\nvar candidateSelector = /* #__PURE__ */candidateSelectors.join(',');\nvar matches = typeof Element === 'undefined' ? function () {} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\nvar getCandidates = function getCandidates(el, includeContainer, filter) {\n  var candidates = Array.prototype.slice.apply(el.querySelectorAll(candidateSelector));\n\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\nvar isContentEditable = function isContentEditable(node) {\n  return node.contentEditable === 'true';\n};\n\nvar getTabindex = function getTabindex(node) {\n  var tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  } // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n\n\n  if (isContentEditable(node)) {\n    return 0;\n  } // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n\n\n  if ((node.nodeName === 'AUDIO' || node.nodeName === 'VIDEO' || node.nodeName === 'DETAILS') && node.getAttribute('tabindex') === null) {\n    return 0;\n  }\n\n  return node.tabIndex;\n};\n\nvar sortOrderedTabbables = function sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;\n};\n\nvar isInput = function isInput(node) {\n  return node.tagName === 'INPUT';\n};\n\nvar isHiddenInput = function isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nvar isDetailsWithSummary = function isDetailsWithSummary(node) {\n  var r = node.tagName === 'DETAILS' && Array.prototype.slice.apply(node.children).some(function (child) {\n    return child.tagName === 'SUMMARY';\n  });\n  return r;\n};\n\nvar getCheckedRadio = function getCheckedRadio(nodes, form) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nvar isTabbableRadio = function isTabbableRadio(node) {\n  if (!node.name) {\n    return true;\n  }\n\n  var radioScope = node.form || node.ownerDocument;\n\n  var queryRadios = function queryRadios(name) {\n    return radioScope.querySelectorAll('input[type=\"radio\"][name=\"' + name + '\"]');\n  };\n\n  var radioSet;\n\n  if (typeof window !== 'undefined' && typeof window.CSS !== 'undefined' && typeof window.CSS.escape === 'function') {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error('Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s', err.message);\n      return false;\n    }\n  }\n\n  var checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nvar isRadio = function isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nvar isNonTabbableRadio = function isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nvar isHidden = function isHidden(node, displayCheck) {\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  var isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  var nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n\n  if (!displayCheck || displayCheck === 'full') {\n    while (node) {\n      if (getComputedStyle(node).display === 'none') {\n        return true;\n      }\n\n      node = node.parentElement;\n    }\n  } else if (displayCheck === 'non-zero-area') {\n    var _node$getBoundingClie = node.getBoundingClientRect(),\n        width = _node$getBoundingClie.width,\n        height = _node$getBoundingClie.height;\n\n    return width === 0 && height === 0;\n  }\n\n  return false;\n}; // form fields (nested) inside a disabled fieldset are not focusable/tabbable\n//  unless they are in the _first_ <legend> element of the top-most disabled\n//  fieldset\n\n\nvar isDisabledFromFieldset = function isDisabledFromFieldset(node) {\n  if (isInput(node) || node.tagName === 'SELECT' || node.tagName === 'TEXTAREA' || node.tagName === 'BUTTON') {\n    var parentNode = node.parentElement;\n\n    while (parentNode) {\n      if (parentNode.tagName === 'FIELDSET' && parentNode.disabled) {\n        // look for the first <legend> as an immediate child of the disabled\n        //  <fieldset>: if the node is in that legend, it'll be enabled even\n        //  though the fieldset is disabled; otherwise, the node is in a\n        //  secondary/subsequent legend, or somewhere else within the fieldset\n        //  (however deep nested) and it'll be disabled\n        for (var i = 0; i < parentNode.children.length; i++) {\n          var child = parentNode.children.item(i);\n\n          if (child.tagName === 'LEGEND') {\n            if (child.contains(node)) {\n              return false;\n            } // the node isn't in the first legend (in doc order), so no matter\n            //  where it is now, it'll be disabled\n\n\n            return true;\n          }\n        } // the node isn't in a legend, so no matter where it is now, it'll be disabled\n\n\n        return true;\n      }\n\n      parentNode = parentNode.parentElement;\n    }\n  } // else, node's tabbable/focusable state should not be affected by a fieldset's\n  //  enabled/disabled state\n\n\n  return false;\n};\n\nvar isNodeMatchingSelectorFocusable = function isNodeMatchingSelectorFocusable(options, node) {\n  if (node.disabled || isHiddenInput(node) || isHidden(node, options.displayCheck) || // For a details element with a summary, the summary element gets the focus\n  isDetailsWithSummary(node) || isDisabledFromFieldset(node)) {\n    return false;\n  }\n\n  return true;\n};\n\nvar isNodeMatchingSelectorTabbable = function isNodeMatchingSelectorTabbable(options, node) {\n  if (!isNodeMatchingSelectorFocusable(options, node) || isNonTabbableRadio(node) || getTabindex(node) < 0) {\n    return false;\n  }\n\n  return true;\n};\n\nvar tabbable = function tabbable(el, options) {\n  options = options || {};\n  var regularTabbables = [];\n  var orderedTabbables = [];\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorTabbable.bind(null, options));\n  candidates.forEach(function (candidate, i) {\n    var candidateTabindex = getTabindex(candidate);\n\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate\n      });\n    }\n  });\n  var tabbableNodes = orderedTabbables.sort(sortOrderedTabbables).map(function (a) {\n    return a.node;\n  }).concat(regularTabbables);\n  return tabbableNodes;\n};\n\nvar focusable = function focusable(el, options) {\n  options = options || {};\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorFocusable.bind(null, options));\n  return candidates;\n};\n\nvar isTabbable = function isTabbable(node, options) {\n  options = options || {};\n\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorTabbable(options, node);\n};\n\nvar focusableCandidateSelector = /* #__PURE__ */candidateSelectors.concat('iframe').join(',');\n\nvar isFocusable = function isFocusable(node, options) {\n  options = options || {};\n\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorFocusable(options, node);\n};\n\nexport { focusable, isFocusable, isTabbable, tabbable };\n//# sourceMappingURL=index.esm.js.map\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import{makeHandle as e}from\"../core/handleUtils.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import i from\"../widgets/Widget.js\";import{isWidget as r}from\"../widgets/support/widget.js\";import{createFocusTrap as n}from\"focus-trap\";import{tsx as a}from\"../widgets/support/jsxFactory.js\";import{messageBundle as c}from\"../widgets/support/decorators/messageBundle.js\";const d={base:\"esri-identity-modal\",open:\"esri-identity-modal--open\",closed:\"esri-identity-modal--closed\",title:\"esri-identity-modal__title\",dialog:\"esri-identity-modal__dialog\",content:\"esri-identity-modal__content\",closeButton:\"esri-identity-modal__close-button\",iconClose:\"esri-icon-close\"};let l=class extends i{constructor(t,e){super(t,e),this.container=document.createElement(\"div\"),this.content=null,this.open=!1,this._close=()=>{this.open=!1},document.body.appendChild(this.container),this.own(this.watch(\"open\",(()=>this._toggleFocusTrap())))}destroy(){this._destroyFocusTrap()}render(){const t=this.id,{open:e,content:o,title:s,messages:i}=this,r=e&&!!o,n={[d.open]:r,[d.closed]:!r},c=a(\"button\",{class:d.closeButton,\"aria-label\":i.close,title:i.close,bind:this,onclick:this._close},a(\"span\",{\"aria-hidden\":\"true\",class:d.iconClose})),l=`${t}_title`,p=`${t}_content`,u=s?a(\"h1\",{id:l,class:d.title},s):null,m=r?a(\"div\",{bind:this,class:d.dialog,role:\"dialog\",\"aria-labelledby\":l,\"aria-describedby\":p,afterCreate:this._createFocusTrap},c,u,this._renderContent(p)):null;return a(\"div\",{tabIndex:-1,class:this.classes(d.base,n)},m)}_destroyFocusTrap(){var t;null==(t=this._focusTrap)||t.deactivate({onDeactivate:null}),this._focusTrap=null}_toggleFocusTrap(){const{_focusTrap:t,open:e}=this;t&&(e?t.activate():t.deactivate())}_createFocusTrap(t){this._destroyFocusTrap();const o=requestAnimationFrame((()=>{this._focusTrap=n(t,{initialFocus:\"input\",onDeactivate:this._close}),this._toggleFocusTrap()}));this.own(e((()=>cancelAnimationFrame(o))))}_renderContent(t){const e=this.content;return\"string\"==typeof e?a(\"div\",{class:d.content,id:t,innerHTML:e}):r(e)?a(\"div\",{class:d.content,id:t},e.render()):e instanceof HTMLElement?a(\"div\",{class:d.content,id:t,bind:e,afterCreate:this._attachToNode}):null}_attachToNode(t){const e=this;t.appendChild(e)}};t([o({readOnly:!0})],l.prototype,\"container\",void 0),t([o()],l.prototype,\"content\",void 0),t([o()],l.prototype,\"open\",void 0),t([o(),c(\"esri/t9n/common\")],l.prototype,\"messages\",void 0),t([o({aliasOf:\"messages.auth.signIn\"})],l.prototype,\"title\",void 0),l=t([s(\"esri.identity.IdentityModal\")],l);var p=l;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nconst t=\"esriJSAPIOAuth\";class s{constructor(t,s){this.oAuthInfo=null,this.storage=null,this.appId=null,this.expires=null,this.ssl=null,this.token=null,this.userId=null,this.oAuthInfo=t,this.storage=s,this._init()}isValid(){let t=!1;if(this.oAuthInfo&&this.token&&this.userId){const s=Date.now();if(this.expires>s){(this.expires-s)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(t=!0)}}return t}save(){if(!this.storage)return;const s=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let o=s[e.authNamespace];o||(o=s[e.authNamespace]={}),o[e.portalUrl]={appId:this.appId=e.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem(t,JSON.stringify(s))}catch(i){console.log(i)}}}destroy(){const s=this._load(),e=this.oAuthInfo;if(e&&e.appId&&e.portalUrl&&this.token&&this.expires>Date.now()){const t=e.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/rest/oauth2/revokeToken\",s=new FormData;if(s.append(\"f\",\"json\"),s.append(\"auth_token\",this.token),s.append(\"client_id\",e.appId),s.append(\"token_type_hint\",\"access_token\"),\"function\"==typeof navigator.sendBeacon)navigator.sendBeacon(t,s);else{const e=new XMLHttpRequest;e.open(\"POST\",t),e.send(s)}}if(e&&e.authNamespace&&e.portalUrl&&this.storage){const o=s[e.authNamespace];if(o){delete o[e.portalUrl];try{this.storage.setItem(t,JSON.stringify(s))}catch(i){console.log(i)}}}e&&(e._oAuthCred=null,this.oAuthInfo=null)}_init(){const t=this._load(),s=this.oAuthInfo;if(s&&s.authNamespace&&s.portalUrl){let e=t[s.authNamespace];e&&(e=e[s.portalUrl],e&&(this.appId=e.appId,this.expires=e.expires,this.ssl=e.ssl,this.token=e.token,this.userId=e.userId))}}_load(){let s={};if(this.storage){const i=this.storage.getItem(t);if(i)try{s=JSON.parse(i)}catch(e){console.log(e)}}return s}}s.prototype.declaredClass=\"esri.identity.OAuthCredential\";export default s;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../core/JSONSupport.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";var p;let s=p=class extends t{constructor(o){super(o),this._oAuthCred=null,this.appId=null,this.authNamespace=\"/\",this.expiration=20160,this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl=\"oauth-callback.html\",this.popupWindowFeatures=\"height=490,width=800,resizable,scrollbars,status\",this.portalUrl=\"https://www.arcgis.com\",this.preserveUrlHash=!1,this.userId=null}clone(){return p.fromJSON(this.toJSON())}};o([r({json:{write:!0}})],s.prototype,\"appId\",void 0),o([r({json:{write:!0}})],s.prototype,\"authNamespace\",void 0),o([r({json:{write:!0}})],s.prototype,\"expiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceLogin\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceUserId\",void 0),o([r({json:{write:!0}})],s.prototype,\"locale\",void 0),o([r({json:{write:!0}})],s.prototype,\"minTimeUntilExpiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"popup\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupCallbackUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupWindowFeatures\",void 0),o([r({json:{write:!0}})],s.prototype,\"portalUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"preserveUrlHash\",void 0),o([r({json:{write:!0}})],s.prototype,\"userId\",void 0),s=p=o([e(\"esri.identity.OAuthInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import{JSONSupport as r}from\"../core/JSONSupport.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";let s=class extends r{constructor(o){super(o),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};o([e({json:{write:!0}})],s.prototype,\"adminTokenServiceUrl\",void 0),o([e({json:{write:!0}})],s.prototype,\"currentVersion\",void 0),o([e({json:{write:!0}})],s.prototype,\"hasPortal\",void 0),o([e({json:{write:!0}})],s.prototype,\"hasServer\",void 0),o([e({json:{write:!0}})],s.prototype,\"owningSystemUrl\",void 0),o([e({json:{write:!0}})],s.prototype,\"owningTenant\",void 0),o([e({json:{write:!0}})],s.prototype,\"server\",void 0),o([e({json:{write:!0}})],s.prototype,\"shortLivedTokenValidity\",void 0),o([e({json:{write:!0}})],s.prototype,\"tokenServiceUrl\",void 0),o([e({json:{write:!0}})],s.prototype,\"webTierAuth\",void 0),s=o([t(\"esri.identity.ServerInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../config.js\";import{id as s}from\"../kernel.js\";import r from\"../request.js\";import i from\"../core/Error.js\";import n from\"../core/Evented.js\";import{on as o}from\"../core/events.js\";import a from\"../core/global.js\";import{fixJson as h}from\"../core/lang.js\";import{getDeepValue as l}from\"../core/object.js\";import{createAbortController as c,createResolver as d,onAbort as u,isAborted as p}from\"../core/promiseUtils.js\";import{urlToObject as _,hasSameOrigin as g,Url as f,queryToObject as m,normalize as v,getProxyRule as S,makeAbsolute as w,objectToQuery as I}from\"../core/urlUtils.js\";import{property as k}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{subclass as A}from\"../core/accessorSupport/decorators/subclass.js\";import y from\"./IdentityForm.js\";import U from\"./IdentityModal.js\";import T from\"./OAuthCredential.js\";import x from\"./OAuthInfo.js\";import O from\"./ServerInfo.js\";const R={},b=e=>{const t=new f(e.owningSystemUrl).host,s=new f(e.server).host,r=/.+\\.arcgis\\.com$/i;return r.test(t)&&r.test(s)},P=(e,t)=>!!(b(e)&&t&&t.some((t=>t.test(e.server))));let C=null,D=null;try{C=window.localStorage,D=window.sessionStorage}catch{}class q extends n{constructor(){super(),this._portalConfig=a.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this.defaultOAuthInfo=null,this.defaultTokenValidity=60,this.dialog=null,this.formConstructor=y,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appOrigin=\"null\"!==window.origin?window.origin:window.location.origin,this._appUrlObj=_(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthHash=null,this._gwTokenUrl=\"/sharing/rest/generateToken\",this._agsRest=\"/rest/services\",this._agsPortal=/\\/sharing(\\/|$)/i,this._agsAdmin=/(https?:\\/\\/[^\\/]+\\/[^\\/]+)\\/admin\\/?(\\/.*)?$/i,this._adminSvcs=/\\/rest\\/admin\\/services(\\/|$)/i,this._gwDomains=[{regex:/^https?:\\/\\/www\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:dev|[a-z\\d-]+\\.mapsdev)\\.arcgis\\.com/i,customBaseUrl:\"mapsdev.arcgis.com\",tokenServiceUrl:\"https://dev.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:devext|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,customBaseUrl:\"mapsdevext.arcgis.com\",tokenServiceUrl:\"https://devext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:qaext|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i,customBaseUrl:\"mapsqa.arcgis.com\",tokenServiceUrl:\"https://qaext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/[a-z\\d-]+\\.maps\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"}],this._legacyFed=[],this._regexSDirUrl=/http.+\\/rest\\/services\\/?/gi,this._regexServerType=/(\\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/gi,this._gwUser=/http.+\\/users\\/([^\\/]+)\\/?.*/i,this._gwItem=/http.+\\/items\\/([^\\/]+)\\/?.*/i,this._gwGroup=/http.+\\/groups\\/([^\\/]+)\\/?.*/i,this._rePortalTokenSvc=/\\/sharing(\\/rest)?\\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getOAuthHash(),window.addEventListener(\"pageshow\",(e=>{this._pageShowHandler(e)}))}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server)}))}registerOAuthInfos(e){const t=this.oAuthInfos;if(t){for(const s of e){const e=this.findOAuthInfo(s.portalUrl);e&&t.splice(t.indexOf(e),1)}this.oAuthInfos=t.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),s=this._isServerRsrc(t);let r,i=this.findServerInfo(t),n=!0;i||(i=new O,i.server=this._getServerInstanceRoot(t),s?i.hasServer=!0:(i.tokenServiceUrl=this._getTokenSvcUrl(t),i.hasPortal=!0),this.registerServers([i])),r=this._findCredential(t),r?(delete e.server,Object.assign(r,e),n=!1):(r=new j({userId:e.userId,server:i.server,token:e.token,expires:e.expires,ssl:e.ssl,scope:s?\"server\":\"portal\"}),r.resources=[t],this.credentials.push(r)),r.emitTokenChange(!1),n||r.refreshServerTokens()}toJSON(){return h({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;\"string\"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,s=e.oAuthInfos,r=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new O(t))})),e.length&&this.registerServers(e)}if(s){const e=[];s.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new x(t))})),e.length&&this.registerOAuthInfos(e)}r&&r.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new j(e)).emitTokenChange(),this.credentials.push(e))}))}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const s of this.serverInfos)if(this._hasSameServerInstance(s.server,e)){t=s;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const s of this.oAuthInfos)if(this._hasSameServerInstance(s.portalUrl,e)){t=s;break}return t}findCredential(e,t){let s;e=this._sanitizeUrl(e);const r=this._isServerRsrc(e)?\"server\":\"portal\";if(t){for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&t===i.userId&&i.scope===r){s=i;break}}else for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&-1!==this._getIdenticalSvcIdx(e,i)&&i.scope===r){s=i;break}return s}getCredential(e,t){let s,r,n=!0;t&&(s=!!t.token,r=t.error,n=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const o=c(),a=d();if(t.signal&&u(t.signal,(()=>{o.abort()})),u(o,(()=>{a.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))})),p(o))return a.promise;t.signal=o.signal;const h=this._isAdminResource(e),l=s?this.findCredential(e):null;let _;if(l&&r&&r.details&&498===r.details.httpStatus)l.destroy();else if(l)return _=new i(\"identity-manager:not-authorized\",\"You are currently signed in as: '\"+l.userId+\"'. You do not have access to this resource: \"+e,{error:r}),a.reject(_),a.promise;const f=this._findCredential(e,t);if(f)return a.resolve(f),a.promise;let m=this.findServerInfo(e);if(m)!m.hasServer&&this._isServerRsrc(e)&&(m._restInfoPms=this._getTokenSvcUrl(e),m.hasServer=!0);else{const t=this._getTokenSvcUrl(e);if(!t)return _=new i(\"identity-manager:unknown-resource\",\"Unknown resource - could not find token service endpoint.\"),a.reject(_),a.promise;m=new O,m.server=this._getServerInstanceRoot(e),\"string\"==typeof t?(m.tokenServiceUrl=t,m.hasPortal=!0):(m._restInfoPms=t,m.hasServer=!0),this.registerServers([m])}return m.hasPortal&&void 0===m._selfReq&&(n||g(m.tokenServiceUrl,this._appOrigin)||this._gwDomains.some((e=>e.tokenServiceUrl===m.tokenServiceUrl)))&&(m._selfReq={owningTenant:t&&t.owningTenant,selfDfd:this._getPortalSelf(m.tokenServiceUrl.replace(this._rePortalTokenSvc,\"/sharing/rest/portals/self\"),e)}),this._enqueue(e,m,t,a,h)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"\")||\"\":this._gwUser.test(e)&&e.replace(this._gwUser,\"$1\")||this._gwItem.test(e)&&e.replace(this._gwItem,\"$1\")||this._gwGroup.test(e)&&e.replace(this._gwGroup,\"$1\")||\"\"}generateToken(e,t,s){const n=this._rePortalTokenSvc.test(e.tokenServiceUrl),o=new f(this._appOrigin),a=e.shortLivedTokenValidity;let h,l,c,d,u,p,_,m;t&&(m=this.tokenValidity||a||this.defaultTokenValidity,m>a&&a>0&&(m=a)),s&&(h=s.isAdmin,l=s.serverUrl,c=s.token,p=s.signal,_=s.ssl,e.customParameters=s.customParameters),h?d=e.adminTokenServiceUrl:(d=e.tokenServiceUrl,u=new f(d.toLowerCase()),e.webTierAuth&&null!=s&&s.serverUrl&&!_&&\"http\"===o.scheme&&(g(o.uri,d,!0)||\"https\"===u.scheme&&o.host===u.host&&\"7080\"===o.port&&\"7443\"===u.port)&&(d=d.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\")));const v={query:{request:\"getToken\",username:null==t?void 0:t.username,password:null==t?void 0:t.password,serverUrl:l,token:c,expiration:m,referer:h||n?this._appOrigin:null,client:h?\"referer\":null,f:\"json\",...e.customParameters},method:\"post\",authMode:\"anonymous\",useProxy:this._useProxy(e,s),signal:p,...null==s?void 0:s.ioArgs};n||(v.withCredentials=!1);return r(d,v).then((s=>{const r=s.data;if(!r||!r.token)return new i(\"identity-manager:authentication-failed\",\"Unable to generate token\");const n=e.server;return R[n]||(R[n]={}),t&&(R[n][t.username]=t.password),r.validity=m,r}))}isBusy(){return!!this._busy}checkSignInStatus(e){return this.checkAppAccess(e,\"\").then((e=>e.credential))}checkAppAccess(e,t,s){let n=!1;return this.getCredential(e,{prompt:!1}).then((o=>{let a;const h={f:\"json\"};if(\"portal\"===o.scope)if(t&&(this._doPortalSignIn(e)||s&&s.force))a=o.server+\"/sharing/rest/oauth2/validateAppAccess\",h.client_id=t;else{if(!o.token)return{credential:o};a=o.server+\"/sharing/rest\"}else{if(!o.token)return{credential:o};a=o.server+\"/rest/services\"}return o.token&&(h.token=o.token),r(a,{query:h,authMode:\"anonymous\"}).then((e=>{if(!1===e.data.valid)throw new i(\"identity-manager:not-authorized\",`You are currently signed in as: '${o.userId}'.`,e.data);return n=!!e.data.viewOnlyUserTypeApp,{credential:o}})).catch((e=>{if(\"identity-manager:not-authorized\"===e.name)throw e;const t=e.details&&e.details.httpStatus;if(498===t)throw o.destroy(),new i(\"identity-manager:not-authenticated\",\"User is not signed in.\");if(400===t)throw new i(\"identity-manager:invalid-request\");return{credential:o}}))})).then((e=>({credential:e.credential,viewOnly:n})))}setOAuthResponseHash(e){var t;const s=this._oAuthDfd;if(this._oAuthDfd=null,!s||!e)return;clearInterval(this._oAuthIntervalId),null==(t=this._oAuthOnHashHandle)||t.remove(),\"#\"===e.charAt(0)&&(e=e.substring(1));const r=m(e);if(r.error){const e=\"access_denied\"===r.error,t=new i(e?\"identity-manager:user-aborted\":\"identity-manager:authentication-failed\",e?\"ABORTED\":\"OAuth: \"+r.error+\" - \"+r.error_description);s.reject(t)}else{const e=s.sinfo_,t=s.oinfo_,i=t._oAuthCred,n=new j({userId:r.username,server:e.server,token:r.access_token,expires:Date.now()+1e3*Number(r.expires_in),ssl:\"true\"===r.ssl,_oAuthCred:i});t.userId=n.userId,i.storage=r.persist?C:D,i.token=n.token,i.expires=n.expires,i.userId=n.userId,i.ssl=n.ssl,i.save(),s.resolve(n)}}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,t,s={}){const r=d(),n=()=>{var e,t,s,r,i;null==(e=h)||e.remove(),null==(t=l)||t.remove(),null==(s=c)||s.remove(),null==(r=a)||r.destroy(),null==(i=this.dialog)||i.destroy(),this.dialog=a=h=l=c=null},o=()=>{n(),this._oAuthDfd=null,r.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))};s.signal&&u(s.signal,(()=>{o()}));let a=new this.formConstructor;a.resource=this.getResourceName(e),a.server=t.server,this.dialog=new U,this.dialog.content=a,this.dialog.open=!0,this.emit(\"dialog-create\");let h=a.on(\"cancel\",o),l=this.dialog.watch(\"open\",o),c=a.on(\"submit\",(e=>{this.generateToken(t,e,{isAdmin:s.isAdmin,signal:s.signal}).then((i=>{n();const o=new j({userId:e.username,server:t.server,token:i.token,expires:null!=i.expires?Number(i.expires):null,ssl:!!i.ssl,isAdmin:s.isAdmin,validity:i.validity});r.resolve(o)})).catch((e=>{a.error=e,a.signingIn=!1}))}));return r.promise}oAuthSignIn(e,t,s,r){this._oAuthDfd=d();const n=this._oAuthDfd;null!=r&&r.signal&&u(r.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&h()})),n.resUrl_=e,n.sinfo_=t,n.oinfo_=s;const o=!r||!1!==r.oAuthPopupConfirmation;if(!s.popup||!o)return this._doOAuthSignIn(e,t,s),n.promise;const a=new this.formConstructor;a.oAuthPrompt=!0,a.server=t.server,this.dialog=new U,this.dialog.content=a,this.dialog.open=!0,this.emit(\"dialog-create\");const h=()=>{_(),this._oAuthDfd=null,n.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))},l=a.on(\"cancel\",h),c=this.dialog.watch(\"open\",h),p=a.on(\"submit\",(()=>{_(),this._doOAuthSignIn(e,t,s)})),_=()=>{l.remove(),c.remove(),p.remove(),a.destroy(),this.dialog.destroy(),this.dialog=null};return n.promise}destroyCredentials(){if(this.credentials){this.credentials.slice().forEach((e=>{e.destroy()}))}this.emit(\"credentials-destroy\")}enablePostMessageAuth(e=\"https://www.arcgis.com/sharing/rest\"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=o(window,\"message\",(t=>{var s;if((t.origin===this._appOrigin||t.origin.endsWith(\".arcgis.com\"))&&\"arcgis:auth:requestCredential\"===(null==(s=t.data)?void 0:s.type)){const s=t.source;this.getCredential(e).then((e=>{s.postMessage({type:\"arcgis:auth:credential\",credential:{expires:e.expires,server:e.server,ssl:e.ssl,token:e.token,userId:e.userId}},t.origin)})).catch((e=>{s.postMessage({type:\"arcgis:auth:error\",error:{name:e.name,message:e.message}},t.origin)}))}}))}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthHash(){let e=window.location.hash;if(e){\"#\"===e.charAt(0)&&(e=e.substring(1));const t=m(e);let s=!1;if(t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty(\"username\"))try{t.state=JSON.parse(t.state),\"object\"==typeof t.state&&t.state.portalUrl&&(this._oAuthHash=t,s=!0)}catch{}else t.error&&t.error_description&&(console.log(\"IdentityManager OAuth Error: \",t.error,\" - \",t.error_description),\"access_denied\"===t.error&&(s=!0));s&&(window.location.hash=\"object\"==typeof t.state&&t.state.hash||\"\")}}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new i(\"identity-manager:user-aborted\",\"ABORTED\");this._errbackFunc(e)}}_findCredential(e,t){let s,r,i,n,o=-1;const a=t&&t.token,h=t&&t.resource,l=this._isServerRsrc(e)?\"server\":\"portal\",c=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===l));if(e=h||e,c.length)if(1===c.length){if(s=c[0],n=this.findServerInfo(s.server),r=n&&n.owningSystemUrl,i=r&&this.findCredential(r,s.userId),o=this._getIdenticalSvcIdx(e,s),!a)return-1===o&&s.resources.push(e),this._addResource(e,i),s;-1!==o&&(s.resources.splice(o,1),this._removeResource(e,i))}else{let t,s;if(c.some((a=>(s=this._getIdenticalSvcIdx(e,a),-1!==s&&(t=a,n=this.findServerInfo(t.server),r=n&&n.owningSystemUrl,i=r&&this.findCredential(r,t.userId),o=s,!0)))),a)t&&(t.resources.splice(o,1),this._removeResource(e,i));else if(t)return this._addResource(e,i),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const s of this.oAuthInfos)if(this._isIdProvider(s.portalUrl,e)){t=s;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)}_removeResource(e,t){let s=-1;t&&(s=this._getIdenticalSvcIdx(e,t),s>-1&&t.resources.splice(s,1))}_useProxy(e,t){return t&&t.isAdmin&&!g(e.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(e.tokenServiceUrl)&&\"10.1\"===String(e.currentVersion)&&!g(e.tokenServiceUrl,this._appOrigin)}_getOrigin(e){const t=new f(e);return t.scheme+\"://\"+t.host+(null!=t.port?\":\"+t.port:\"\")}_getServerInstanceRoot(e){const t=e.toLowerCase();let s=t.indexOf(this._agsRest);return-1===s&&this._isAdminResource(e)&&(s=this._agsAdmin.test(e)?e.replace(this._agsAdmin,\"$1\").length:e.search(this._adminSvcs)),-1===s&&(s=t.indexOf(\"/sharing\")),-1===s&&\"/\"===t.substr(-1)&&(s=t.length-1),s>-1?e.substring(0,s):e}_hasSameServerInstance(e,t){return\"/\"===e.substr(-1)&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=this._normalizeAGOLorgDomain(e),t=this._normalizeAGOLorgDomain(t),(e=e.substr(e.indexOf(\":\")))===(t=t.substr(t.indexOf(\":\")))}_normalizeAGOLorgDomain(e){const t=/^https?:\\/\\/(?:cdn|[a-z\\d-]+\\.maps)\\.arcgis\\.com/i,s=/^https?:\\/\\/(?:cdndev|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,r=/^https?:\\/\\/(?:cdnqa|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i;return t.test(e)?e=e.replace(t,\"https://www.arcgis.com\"):s.test(e)?e=e.replace(s,\"https://devext.arcgis.com\"):r.test(e)&&(e=e.replace(r,\"https://qaext.arcgis.com\")),e}_sanitizeUrl(e){const s=(t.request.proxyUrl||\"\").toLowerCase(),r=s?e.toLowerCase().indexOf(s+\"?\"):-1;return-1!==r&&(e=e.substring(r+s.length+1)),e=v(e),_(e).path}_isRESTService(e){return e.indexOf(this._agsRest)>-1}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let s;if(this._isRESTService(e)&&this._isRESTService(t)){const r=this._getSuffix(e).toLowerCase(),i=this._getSuffix(t).toLowerCase();if(s=r===i,!s){const e=/(.*)\\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;s=r.replace(e,\"$1\")===i.replace(e,\"$1\")}}else this._isAdminResource(e)&&this._isAdminResource(t)?s=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(s=!0);return s}_isPortalDomain(e){const s=new f(e.toLowerCase()),r=this._portalConfig;let i=this._gwDomains.some((e=>e.regex.test(s.uri)));return!i&&r&&(i=this._hasSameServerInstance(this._getServerInstanceRoot(r.restBaseUrl),s.uri)),i||t.portalUrl&&(i=g(s,t.portalUrl,!0)),i||(i=this._portals.some((e=>this._hasSameServerInstance(e,s.uri)))),i=i||this._agsPortal.test(s.path),i}_isIdProvider(e,t){let s=-1,r=-1;this._gwDomains.forEach(((i,n)=>{-1===s&&i.regex.test(e)&&(s=n),-1===r&&i.regex.test(t)&&(r=n)}));let i=!1;if(s>-1&&r>-1&&(0===s||4===s?0!==r&&4!==r||(i=!0):1===s?1!==r&&2!==r||(i=!0):2===s?2===r&&(i=!0):3===s&&3===r&&(i=!0)),!i){const s=this.findServerInfo(t),r=s&&s.owningSystemUrl;r&&b(s)&&this._isPortalDomain(r)&&this._isIdProvider(e,r)&&(i=!0)}return i}_getIdenticalSvcIdx(e,t){let s=-1;for(let r=0;r<t.resources.length;r++){const i=t.resources[r];if(this._isIdenticalService(e,i)){s=r;break}}return s}_getSuffix(e){return e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"$1\")}_getTokenSvcUrl(e){let t,s,i;if(this._isRESTService(e)||this._isAdminResource(e)){const i=this._getServerInstanceRoot(e);return t=i+\"/admin/generateToken\",s=r(e=i+\"/rest/info\",{query:{f:\"json\"}}).then((e=>e.data)),{adminUrl:t,promise:s}}if(this._isPortalDomain(e)){let t=\"\";if(this._gwDomains.some((s=>(s.regex.test(e)&&(t=s.tokenServiceUrl),!!t))),t||this._portals.some((s=>(this._hasSameServerInstance(s,e)&&(t=s+this._gwTokenUrl),!!t))),t||(i=e.toLowerCase().indexOf(\"/sharing\"),-1!==i&&(t=e.substring(0,i)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const s=new f(e).port;/^http:\\/\\//i.test(e)&&\"7080\"===s&&(t=t.replace(/:7080/i,\":7443\")),t=t.replace(/http:/i,\"https:\")}return t}if(-1!==e.toLowerCase().indexOf(\"premium.arcgisonline.com\"))return\"https://premium.arcgisonline.com/server/tokens\"}_exchangeToken(e,t,s){return r(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:\"anonymous\",method:\"post\",query:{f:\"json\",client_id:t,token:s}}).then((e=>e.data.token))}_getPlatformSelf(e,t){return r(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:\"anonymous\",headers:{\"X-Esri-Auth-Client-Id\":t,\"X-Esri-Auth-Redirect-Uri\":window.location.href.replace(/#.*$/,\"\")},method:\"post\",query:{f:\"json\"},withCredentials:!0}).then((e=>e.data))}_getPortalSelf(e,t){let s;if(this._gwDomains.some((t=>(t.regex.test(e)&&(s=t.customBaseUrl),!!s))),s)return Promise.resolve({allSSL:!0,currentVersion:\"4.4\",customBaseUrl:s,portalMode:\"multitenant\",supportsOAuth:!0});this._appOrigin.startsWith(\"https:\")?e=e.replace(/^http:/i,\"https:\").replace(/:7080/i,\":7443\"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"));return r(e,{query:{f:\"json\"},authMode:\"anonymous\",withCredentials:!0}).then((e=>e.data))}_doPortalSignIn(e){const t=this._portalConfig,s=window.location.href,r=this.findServerInfo(e);return!(!t&&!this._isPortalDomain(s)||!(r?r.hasPortal||r.owningSystemUrl&&this._isPortalDomain(r.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(s,e)||t&&(this._hasSameServerInstance(this._getServerInstanceRoot(t.restBaseUrl),e)||this._isIdProvider(t.restBaseUrl,e))||g(s,e,!0)))}_checkProtocol(e,t,s,r){let n=!0;const o=r?t.adminTokenServiceUrl:t.tokenServiceUrl;if(o.trim().toLowerCase().startsWith(\"https:\")&&!this._appOrigin.startsWith(\"https:\")&&S(o)&&(n=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!n)){s(new i(\"identity-manager:aborted\",\"Aborted the Sign-In process to avoid sending password over insecure connection.\"))}return n}_enqueue(e,t,s,r,i,n){return r||(r=d()),r.resUrl_=e,r.sinfo_=t,r.options_=s,r.admin_=i,r.refresh_=n,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(r)):this._xoReqs.push(r):this._doSignIn(r),r.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{const s=e.options_&&e.options_.resource,r=e.resUrl_,i=e.refresh_;let n=!1;-1===this.credentials.indexOf(t)&&(i&&-1!==this.credentials.indexOf(i)?(i.userId=t.userId,i.token=t.token,i.expires=t.expires,i.validity=t.validity,i.ssl=t.ssl,i.creationTime=t.creationTime,n=!0,t=i):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.push(s||r),t.scope=this._isServerRsrc(r)?\"server\":\"portal\",t.emitTokenChange();const o=this._soReqs,a={};this._soReqs=[],o.forEach((e=>{if(!this._isIdenticalService(r,e.resUrl_)){const s=this._getSuffix(e.resUrl_);a[s]||(a[s]=!0,t.resources.push(e.resUrl_))}})),e.resolve(t),o.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(r),e.resUrl_)?e.resolve(t):this._soReqs.push(e)})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,n||this.emit(\"credential-create\",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=(r,n,a,h)=>{var l,c;const d=e.sinfo_,p=!e.options_||!1!==e.options_.prompt,_=d.hasPortal&&this._findOAuthInfo(e.resUrl_);let f,m;if(r)t(new j({userId:r,server:d.server,token:a||null,expires:null!=h?Number(h):null,ssl:!!n}));else if(window!==window.parent&&null!=(l=this._appUrlObj.query)&&l[\"arcgis-auth-origin\"]&&null!=(c=this._appUrlObj.query)&&c[\"arcgis-auth-portal\"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query[\"arcgis-auth-portal\"]),e.resUrl_)){var v;window.parent.postMessage({type:\"arcgis:auth:requestCredential\"},this._appUrlObj.query[\"arcgis-auth-origin\"]);const r=o(window,\"message\",(e=>{e.source===window.parent&&e.data&&(\"arcgis:auth:credential\"===e.data.type?(r.remove(),t(new j(e.data.credential))):\"arcgis:auth:error\"===e.data.type&&(r.remove(),s(i.fromJSON(e.data.error))))}));u(null==(v=e.options_)?void 0:v.signal,(()=>{r.remove()}))}else if(_){let r=_._oAuthCred;if(!r){const e=new T(_,C),t=new T(_,D);e.isValid()&&t.isValid()?e.expires>t.expires?(r=e,t.destroy()):(r=t,e.destroy()):r=e.isValid()?e:t,_._oAuthCred=r}if(r.isValid())f=new j({userId:r.userId,server:d.server,token:r.token,expires:r.expires,ssl:r.ssl,_oAuthCred:r}),_.appId!==r.appId&&this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._exchangeToken(f.server,_.appId,f.token).then((e=>{f.token=e,r.token=e,r.save(),t(f)})).catch((()=>{t(f)})):t(f);else if(this._oAuthHash&&this._hasSameServerInstance(_.portalUrl,this._oAuthHash.state.portalUrl)){const e=this._oAuthHash;f=new j({userId:e.username,server:d.server,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:\"true\"===e.ssl,oAuthState:e.state,_oAuthCred:r}),_.userId=f.userId,r.storage=e.persist?C:D,r.token=f.token,r.expires=f.expires,r.userId=f.userId,r.ssl=f.ssl,r.save(),this._oAuthHash=null,t(f)}else{const r=()=>{p?e._pendingDfd=this.oAuthSignIn(e.resUrl_,d,_,e.options_).then(t,s):(m=new i(\"identity-manager:not-authenticated\",\"User is not signed in.\"),s(m))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(d.server,_.appId).then((({portalUrl:e,token:s,username:i})=>{!e||g(e,this._appOrigin,!0)?(f=new j({server:d.server,userId:i,token:s}),t(f)):r()})).catch(r):r()}}else if(p){if(this._checkProtocol(e.resUrl_,d,s,e.admin_)){let r=e.options_;e.admin_&&(r=r||{},r.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,d,r).then(t,s)}}else m=new i(\"identity-manager:not-authenticated\",\"User is not signed in.\"),s(m)},n=()=>{const r=e.sinfo_,i=r.owningSystemUrl,n=e.options_;let o,a,h,l;if(n&&(o=n.token,a=n.error,h=n.prompt),l=this._findCredential(i,{token:o,resource:e.resUrl_}),!l)for(const e of this.credentials)if(this._isIdProvider(i,e.server)){l=e;break}if(l){const i=this.findCredential(e.resUrl_,l.userId);if(i)t(i);else if(P(r,this._legacyFed)){const e=l.toJSON();e.server=r.server,e.resources=null,t(new j(e))}else{(e._pendingDfd=this.generateToken(this.findServerInfo(l.server),null,{serverUrl:e.resUrl_,token:l.token,signal:e.options_.signal,ssl:l.ssl})).then((s=>{t(new j({userId:l.userId,server:r.server,token:s.token,expires:null!=s.expires?Number(s.expires):null,ssl:!!s.ssl,isAdmin:e.admin_,validity:s.validity}))}),s)}}else{this._busy=null,o&&(e.options_.token=null);(e._pendingDfd=this.getCredential(i.replace(/\\/?$/,\"/sharing\"),{resource:e.resUrl_,owningTenant:r.owningTenant,signal:e.options_.signal,token:o,error:a,prompt:h})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)}),(e=>{s(e)}))}};this._errbackFunc=s;const a=e.sinfo_.owningSystemUrl,h=this._isServerRsrc(e.resUrl_),c=e.sinfo_._restInfoPms;c?c.promise.then((t=>{const s=e.sinfo_;if(s._restInfoPms){s.adminTokenServiceUrl=s._restInfoPms.adminUrl,s._restInfoPms=null,s.tokenServiceUrl=l(\"authInfo.tokenServicesUrl\",t)||l(\"authInfo.tokenServiceUrl\",t)||l(\"tokenServiceUrl\",t),s.shortLivedTokenValidity=l(\"authInfo.shortLivedTokenValidity\",t),s.currentVersion=t.currentVersion,s.owningTenant=t.owningTenant;const e=s.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e)}h&&s.owningSystemUrl?n():r()}),(()=>{e.sinfo_._restInfoPms=null;const t=new i(\"identity-manager:server-identification-failed\",\"Unknown resource - could not find token service endpoint.\");s(t)})):h&&a?n():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{const s={};let r,i,n,o;return t&&(r=t.user&&t.user.username,s.username=r,s.allSSL=t.allSSL,i=t.supportsOAuth,n=t.currentVersion,\"multitenant\"===t.portalMode&&(o=t.customBaseUrl)),e.sinfo_.webTierAuth=!!r,r&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:s.allSSL}).catch((()=>null)).then((e=>(s.portalToken=e&&e.token,s.tokenExpiration=e&&e.expires,s))):!r&&i&&parseFloat(n)>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:o,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>s)):s})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?r(t.username,t.allSSL,t.portalToken,t.tokenExpiration):r()})):r()}_generateOAuthInfo(e){let t,s,i=e.portalUrl;const n=e.customBaseUrl,o=e.owningTenant,a=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(a){s=window.location.href;let e=s.indexOf(\"?\");e>-1&&(s=s.slice(0,e)),e=s.search(/\\/(apps|home)\\//),s=e>-1?s.slice(0,e):null}return a&&s?(this._hasTestedIfAppIsOnPortal=!0,t=r(s+\"/sharing/rest\",{query:{f:\"json\"}}).then((()=>{this.defaultOAuthInfo=new x({appId:\"arcgisonline\",popupCallbackUrl:s+\"/home/oauth-callback.html\"})}))):t=Promise.resolve(),t.then((()=>{if(this.defaultOAuthInfo)return i=i.replace(/^http:/i,\"https:\"),r(i+\"/sharing/rest/oauth2/validateRedirectUri\",{query:{accountId:o,client_id:this.defaultOAuthInfo.appId,redirect_uri:w(this.defaultOAuthInfo.popupCallbackUrl),f:\"json\"}}).then((e=>{if(e.data.valid){const t=this.defaultOAuthInfo.clone();e.data.urlKey&&n?t.portalUrl=\"https://\"+e.data.urlKey.toLowerCase()+\".\"+n:t.portalUrl=i,t.popup=window!==window.top||!(g(i,this._appOrigin)||this._gwDomains.some((e=>e.regex.test(i)&&e.regex.test(this._appOrigin)))),this.oAuthInfos.push(t)}}))}))}_doOAuthSignIn(e,t,s){const r={portalUrl:s.portalUrl};!s.popup&&s.preserveUrlHash&&window.location.hash&&(r.hash=window.location.hash);const n={client_id:s.appId,response_type:\"token\",state:JSON.stringify(r),expiration:s.expiration,locale:s.locale,redirect_uri:s.popup?w(s.popupCallbackUrl):window.location.href.replace(/#.*$/,\"\")};s.forceLogin&&(n.force_login=!0),s.forceUserId&&s.userId&&(n.prepopulatedusername=s.userId),!s.popup&&this._doPortalSignIn(e)&&(n.redirectToUserOrgUrl=!0);const h=s.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/oauth2/authorize\",l=h+\"?\"+I(n);if(s.popup){const e=window.open(l,\"esriJSAPIOAuth\",s.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnHashHandle.remove();const e=this._oAuthDfd;if(e){const t=new i(\"identity-manager:user-aborted\",\"ABORTED\");e.reject(t)}}}),500),this._oAuthOnHashHandle=o(a,\"arcgis:auth:hash\",(e=>{this.setOAuthResponseHash(e.detail)}));else{const e=new i(\"identity-manager:popup-blocked\",\"ABORTED\");this._oAuthDfd.reject(e)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:n,authorizeUrl:h,resourceUrl:e,serverInfo:t,oAuthInfo:s}):window.location.href=l}}q.prototype.declaredClass=\"esri.identity.IdentityManagerBase\";let j=class extends n.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now())}refreshToken(){const e=s.findServerInfo(this.server),t=e&&e.owningSystemUrl,r=!!t&&\"server\"===this.scope,i=r&&P(e,s._legacyFed),n=e.webTierAuth,o=n&&s.normalizeWebTierAuth,a=R[this.server],h=a&&a[this.userId];let l,c=this.resources&&this.resources[0],d=r&&s.findServerInfo(t),u={username:this.userId,password:h};if(n&&!o)return;r&&!d&&s.serverInfos.some((e=>(s._isIdProvider(t,e.server)&&(d=e),!!d)));const p=d&&s.findCredential(d.server,this.userId);if(!r||p){if(!i){if(r)l={serverUrl:c,token:p&&p.token,ssl:p&&p.ssl};else if(o)u=null,l={ssl:this.ssl};else{if(!h){let t;return c&&(c=s._sanitizeUrl(c),this._enqueued=1,t=s._enqueue(c,e,null,null,this.isAdmin,this),t.then((()=>{this._enqueued=0,this.refreshServerTokens()})).catch((()=>{this._enqueued=0}))),t}this.isAdmin&&(l={isAdmin:!0})}return s.generateToken(r?d:e,r?null:u,l).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens()})).catch((()=>{}))}p.refreshToken()}}refreshServerTokens(){\"portal\"===this.scope&&s.credentials.forEach((e=>{const t=s.findServerInfo(e.server),r=t&&t.owningSystemUrl;e!==this&&e.userId===this.userId&&r&&\"server\"===e.scope&&(s._hasSameServerInstance(this.server,r)||s._isIdProvider(r,this.server))&&(P(t,s._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken())}))}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=this.server&&s.findServerInfo(this.server),r=t&&t.owningSystemUrl,i=r&&s.findServerInfo(r);!1===e||r&&\"portal\"!==this.scope&&(!i||!i.webTierAuth||s.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit(\"token-change\")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=s.credentials.indexOf(this);e>-1&&s.credentials.splice(e,1),this.emitTokenChange(),this.emit(\"destroy\")}toJSON(){const e=h({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,t=2**31-1;let s=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();s<0?s=0:s>t&&(s=t),this._refreshTimer=setTimeout(this.refreshToken.bind(this),s>e?s-e:s)}};e([k()],j.prototype,\"creationTime\",void 0),e([k()],j.prototype,\"expires\",void 0),e([k()],j.prototype,\"isAdmin\",void 0),e([k()],j.prototype,\"oAuthState\",void 0),e([k()],j.prototype,\"resources\",void 0),e([k()],j.prototype,\"scope\",void 0),e([k()],j.prototype,\"server\",void 0),e([k()],j.prototype,\"ssl\",void 0),e([k()],j.prototype,\"token\",void 0),e([k()],j.prototype,\"tokenRefreshBuffer\",void 0),e([k()],j.prototype,\"userId\",void 0),e([k()],j.prototype,\"validity\",void 0),j=e([A(\"esri.identity.Credential\")],j);export{j as Credential,q as IdentityManagerBase};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{setId as e}from\"../kernel.js\";import{IdentityManagerBase as t}from\"./IdentityManagerBase.js\";class r extends t{}r.prototype.declaredClass=\"esri.identity.IdentityManager\";const s=new r;e(s);export default s;\n"],"sourceRoot":""}