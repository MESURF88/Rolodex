{"version":3,"sources":["node_modules/@arcgis/core/layers/support/sublayerUtils.js","node_modules/@arcgis/core/layers/support/Sublayer.js","node_modules/@arcgis/core/layers/MapImageLayer.js","node_modules/@arcgis/core/layers/support/ExportImageParameters.js","node_modules/@arcgis/core/geometry/support/scaleUtils.js","node_modules/@arcgis/core/layers/mixins/ArcGISMapService.js","node_modules/@arcgis/core/layers/mixins/SublayersOwner.js"],"names":["e","n","i","flatten","sublayers","length","some","originIdOf","r","source","type","mapLayerId","id","gdbVersion","slice","reverse","toArray","map","o","t","minScale","layerDefinition","V","k","C","this","origin","ignoreOrigin","allowNull","enabled","layer","writeSublayerStructure","A","_isOverridden","q","U","$","getLogger","J","R","Set","add","B","super","capabilities","fields","fullExtent","globalIdField","legendEnabled","objectIdField","popupEnabled","popupTemplate","sourceJSON","title","typeIdField","types","addResolvingPromise","url","sublayer","responseType","query","f","data","fetchSublayerInfo","read","toLowerCase","split","trim","exportMap","supportsModification","canModifyLayer","operations","supportsQuery","indexOf","_setAndNotifyLayer","name","_get","get","_set","_logLockedError","drawingInfo","labelingInfo","write","forEach","maxScale","transparency","parent","parentLayerId","createPopupTemplate","getSymbols","warn","_handleSublayersChange","ofType","find","parsedUrl","_lastParsedUrl","path","JSON","stringify","_override","_clearOverride","getAtOrigin","store","clone","commitProperty","returnGeometry","where","definitionExpression","hasOwnProperty","default","layerId","dynamicDataSource","refreshInterval","labelsVisible","visible","opacity","renderer","customParameters","attributes","toString","feature","getFeatureType","domains","_getLayerDomain","createQuery","s","load","executeQuery","a","Promise","all","p","from","spatialReference","token","apiKey","y","fromJSON","features","l","sourceLayer","toJSON","reduce","Object","keys","showLabels","_assignDefaultSymbolColors","_forEachSimpleMarkerSymbols","color","style","outline","uniqueValueInfos","classBreakInfos","symbol","defaultSymbol","getDefaultOrigin","loadStatus","emit","propertyName","target","handles","removeAll","on","item","error","preventDefault","reason","fieldsIndex","domain","test","isMapImageLayerOverridePolicy","isTileImageLayerOverridePolicy","readOnly","prototype","String","value","json","overridePolicy","origins","service","Boolean","Number","reader","disablePopup","key","base","typeMap","Q","alwaysRefetch","dpi","imageFormat","imageMaxHeight","imageMaxWidth","imageTransparency","isReference","operationalLayerType","signal","loadFromPortal","supportedTypes","catch","then","_fetchService","resolve","supportedImageFormatTypes","loaded","supportsExportMap","supportsDynamicLayers","createSublayersForOrigin","push","originOf","layers","visibleLayers","filter","pixelRatio","version","shiftCentralMeridian","scale","extent","width","destroy","rotation","wkid","m","timeExtent","start","end","time","timeInfo","hasLiveData","bbox","xmin","ymin","xmax","ymax","bboxSR","imageSR","size","createExportImageParameters","_ts","Date","now","timestamp","dynamicLayers","reject","returnUpdates","allSublayers","ssl","replace","hasDynamicLayers","visibleSublayers","toExportImageJSON","serviceSublayers","remove","notifyChange","join","unshift","format","transparent","layerDefs","c","u","arguments","copyright","supportsExportTiles","supportsTileMap","exportTiles","exportTilesAllowed","tileInfo","cimVersion","parse","since","supportsArcadeExpressionForLabeling","supportsSublayersChanges","supportsSublayerVisibility","supportsSublayerDefinitionExpression","maxExportTilesCount","currentVersion","fetchAllLayersAndTables","_allLayersAndTablesMap","_allLayersAndTablesPromise","Map","set","result","b","d","getCollections","getChildrenFunction","sublayersSourceJSON","2","3","4","5","watch","context","setDefaultOrigin","S","h","defaultVisibility","has","items","readSublayers"],"mappings":"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","file":"static/js/26.265f0b85.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction e(e,n,i){if(n.flatten((({sublayers:e})=>e)).length!==e.length)return!0;return!!e.some((e=>e.originIdOf(\"minScale\")>i||e.originIdOf(\"maxScale\")>i||e.originIdOf(\"renderer\")>i||e.originIdOf(\"labelingInfo\")>i||e.originIdOf(\"opacity\")>i||e.originIdOf(\"labelsVisible\")>i||e.originIdOf(\"source\")>i))||!r(e,n)}function n(e,n,i){return!!e.some((e=>{const n=e.source;return!(!n||\"map-layer\"===n.type&&n.mapLayerId===e.id&&(!n.gdbVersion||n.gdbVersion===i.gdbVersion))||e.originIdOf(\"renderer\")>2||e.originIdOf(\"labelingInfo\")>2||e.originIdOf(\"opacity\")>2||e.originIdOf(\"labelsVisible\")>2}))||!r(e,n)}function r(e,n){if(!e||!e.length)return!0;const r=n.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).map((e=>e.id)).toArray();if(e.length>r.length)return!1;let i=0;const o=r.length;for(const{id:t}of e){for(;i<o&&r[i]!==t;)i++;if(i>=o)return!1}return!0}function i(e){return!!e&&e.some((e=>null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale))}export{n as isExportDynamic,i as isSublayerOverhaul,e as shouldWriteSublayerStructure};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import r from\"../../PopupTemplate.js\";import\"../../renderers/ClassBreaksRenderer.js\";import\"../../renderers/DictionaryRenderer.js\";import\"../../renderers/DotDensityRenderer.js\";import\"../../renderers/HeatmapRenderer.js\";import\"../../renderers/Renderer.js\";import\"../../renderers/SimpleRenderer.js\";import\"../../renderers/UniqueValueRenderer.js\";import\"../../renderers/support/jsonUtils.js\";import{rendererTypes as i,webSceneRendererTypes as t}from\"../../renderers/support/types.js\";import o from\"../../request.js\";import{isSymbol3D as s}from\"../../symbols.js\";import a from\"../../core/Collection.js\";import l from\"../../core/Error.js\";import{HandleOwnerMixin as n}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as p}from\"../../core/Identifiable.js\";import{clone as y}from\"../../core/lang.js\";import d from\"../../core/Loadable.js\";import u from\"../../core/Logger.js\";import{MultiOriginJSONMixin as c}from\"../../core/MultiOriginJSONSupport.js\";import{objectToQuery as f}from\"../../core/urlUtils.js\";import{property as m}from\"../../core/accessorSupport/decorators/property.js\";import{getProperties as h}from\"../../core/accessorSupport/utils.js\";import{cast as b}from\"../../core/accessorSupport/decorators/cast.js\";import\"../../core/has.js\";import{reader as g}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as v}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as S}from\"../../core/accessorSupport/decorators/writer.js\";import{ensureInteger as I,ensureType as w,Integer as j,ensureClass as L}from\"../../core/accessorSupport/ensureType.js\";import{nameToId as D}from\"../../core/accessorSupport/PropertyOrigin.js\";import O from\"./FeatureType.js\";import x from\"./Field.js\";import P from\"./FieldsIndex.js\";import F from\"./LabelClass.js\";import{DataLayerSource as _}from\"./source/DataLayerSource.js\";import{MapLayerSource as E}from\"./source/MapLayerSource.js\";import M from\"../../rest/support/Query.js\";import{createPopupTemplate as N}from\"../../support/popupUtils.js\";import T from\"../../geometry/Extent.js\";var V;function k(e){return e&&\"esriSMS\"===e.type}function C(e,r,i){var t;const o=this.originIdOf(r)>=D(i.origin);return{ignoreOrigin:!0,allowNull:o,enabled:!!i&&(\"map-image\"===(null==(t=i.layer)?void 0:t.type)&&(i.writeSublayerStructure||o))}}function A(e,r,i){var t;return{enabled:!!i&&(\"tile\"===(null==(t=i.layer)?void 0:t.type)&&this._isOverridden(r))}}function q(e,r,i){return{ignoreOrigin:!0,enabled:i&&i.writeSublayerStructure||!1}}function U(e,r,i){return{ignoreOrigin:!0,enabled:!!i&&(i.writeSublayerStructure||this.originIdOf(r)>=D(i.origin))}}const $=u.getLogger(\"esri.layers.support.Sublayer\");let J=0;const R=new Set;R.add(\"layer\"),R.add(\"parent\"),R.add(\"loaded\"),R.add(\"loadStatus\"),R.add(\"loadError\"),R.add(\"loadWarnings\");let B=V=class extends(n(c(p(d)))){constructor(e){super(e),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null}async load(e){return this.addResolvingPromise((async()=>{var r;if(!this.layer&&!this.url)throw new l(\"sublayer:missing-layer\",\"Sublayer can't be loaded without being part of a layer\",{sublayer:this});let i=null;if(!this.layer||this.originIdOf(\"url\")>2||\"data-layer\"===(null==(r=this.source)?void 0:r.type)){i=(await o(this.url,{responseType:\"json\",query:{f:\"json\"},...e})).data}else{var t;let r=this.id;\"map-layer\"===(null==(t=this.source)?void 0:t.type)&&(r=this.source.mapLayerId),i=await this.layer.fetchSublayerInfo(r,e)}i&&(this.sourceJSON=i,this.read({layerDefinition:i},{origin:\"service\"}))})()),this}readCapabilities(e,r){const i=(e=(r=r.layerDefinition||r).capabilities||e)?e.toLowerCase().split(\",\").map((e=>e.trim())):[];return{exportMap:{supportsModification:!!r.canModifyLayer},operations:{supportsQuery:-1!==i.indexOf(\"query\")}}}set definitionExpression(e){this._setAndNotifyLayer(\"definitionExpression\",e)}get fieldsIndex(){return new P(this.fields||[])}readGlobalIdFieldFromService(e,r){if((r=r.layerDefinition||r).globalIdField)return r.globalIdField;if(r.fields)for(const i of r.fields)if(\"esriFieldTypeGlobalID\"===i.type)return i.name}get id(){const e=this._get(\"id\");return null==e?J++:e}set id(e){this._get(\"id\")!==e&&(!1!==this.get(\"layer.capabilities.exportMap.supportsDynamicLayers\")?this._set(\"id\",e):this._logLockedError(\"id\",\"capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'\"))}set labelingInfo(e){this._setAndNotifyLayer(\"labelingInfo\",e)}writeLabelingInfo(e,r,i,t){e&&e.length&&(r.layerDefinition={drawingInfo:{labelingInfo:e.map((e=>e.write({},t)))}})}set labelsVisible(e){this._setAndNotifyLayer(\"labelsVisible\",e)}set layer(e){this._set(\"layer\",e),this.sublayers&&this.sublayers.forEach((r=>r.layer=e))}set listMode(e){this._set(\"listMode\",e)}set minScale(e){this._setAndNotifyLayer(\"minScale\",e)}readMinScale(e,r){return r.minScale||r.layerDefinition&&r.layerDefinition.minScale||0}set maxScale(e){this._setAndNotifyLayer(\"maxScale\",e)}readMaxScale(e,r){return r.maxScale||r.layerDefinition&&r.layerDefinition.maxScale||0}readObjectIdFieldFromService(e,r){if((r=r.layerDefinition||r).objectIdField)return r.objectIdField;if(r.fields)for(const i of r.fields)if(\"esriFieldTypeOID\"===i.type)return i.name}set opacity(e){this._setAndNotifyLayer(\"opacity\",e)}readOpacity(e,r){const i=r.layerDefinition;return 1-.01*(null!=i.transparency?i.transparency:i.drawingInfo.transparency)}writeOpacity(e,r,i,t){r.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,r){this.parent&&this.parent!==this.layer?r.parentLayerId=I(this.parent.id):r.parentLayerId=-1}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){if(e)for(const r of e.getSymbols())if(s(r)){$.warn(\"Sublayer renderer should use 2D symbols\");break}this._setAndNotifyLayer(\"renderer\",e)}get source(){return this._get(\"source\")||new E({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer(\"source\",e)}set sublayers(e){this._handleSublayersChange(e,this._get(\"sublayers\")),this._set(\"sublayers\",e)}castSublayers(e){return w(a.ofType(V),e)}writeSublayers(e,r,i){this.get(\"sublayers.length\")&&(r[i]=this.sublayers.map((e=>e.id)).toArray().reverse())}readTypeIdField(e,r){let i=(r=r.layerDefinition||r).typeIdField;if(i&&r.fields){i=i.toLowerCase();const e=r.fields.find((e=>e.name.toLowerCase()===i));e&&(i=e.name)}return null}get url(){var e,r;const i=null!=(e=null==(r=this.layer)?void 0:r.parsedUrl)?e:this._lastParsedUrl,t=this.source;if(!i)return null;if(this._lastParsedUrl=i,\"map-layer\"===(null==t?void 0:t.type))return`${i.path}/${t.mapLayerId}`;const o={layer:JSON.stringify({source:this.source})};return`${i.path}/dynamicLayer?${f(o)}`}set url(e){e?this._override(\"url\",e):this._clearOverride(\"url\")}set visible(e){this._setAndNotifyLayer(\"visible\",e)}writeVisible(e,r,i,t){r[i]=this.getAtOrigin(\"defaultVisibility\",\"service\")||e}clone(){const{store:e}=h(this),r=new V;return h(r).store=e.clone(R),this.commitProperty(\"url\"),r._lastParsedUrl=this._lastParsedUrl,r}createPopupTemplate(e){return N(this,e)}createQuery(){return new M({returnGeometry:!0,where:this.definitionExpression||\"1=1\"})}async createFeatureLayer(){var e,r;if(this.hasOwnProperty(\"sublayers\"))return null;const i=null==(e=this.layer)?void 0:e.parsedUrl,t=new(0,(await import(\"../FeatureLayer.js\")).default)({url:i.path});return i&&this.source&&(\"map-layer\"===this.source.type?t.layerId=this.source.mapLayerId:t.dynamicDataSource=this.source),null!=this.layer.refreshInterval&&(t.refreshInterval=this.layer.refreshInterval),this.definitionExpression&&(t.definitionExpression=this.definitionExpression),this.originIdOf(\"labelingInfo\")>2&&(t.labelingInfo=y(this.labelingInfo)),this.originIdOf(\"labelsVisible\")>0&&(t.labelsVisible=this.labelsVisible),this.originIdOf(\"legendEnabled\")>0&&(t.legendEnabled=this.legendEnabled),this.originIdOf(\"visible\")>0&&(t.visible=this.visible),this.originIdOf(\"minScale\")>0&&(t.minScale=this.minScale),this.originIdOf(\"maxScale\")>0&&(t.maxScale=this.maxScale),this.originIdOf(\"opacity\")>0&&(t.opacity=this.opacity),this.originIdOf(\"popupTemplate\")>0&&(t.popupTemplate=y(this.popupTemplate)),this.originIdOf(\"renderer\")>2&&(t.renderer=y(this.renderer)),\"data-layer\"===(null==(r=this.source)?void 0:r.type)&&(t.dynamicDataSource=this.source.clone()),this.originIdOf(\"title\")>0&&(t.title=this.title),\"map-image\"===this.layer.type&&this.layer.originIdOf(\"customParameters\")>0&&(t.customParameters=this.layer.customParameters),\"tile\"===this.layer.type&&this.layer.originIdOf(\"customParameters\")>0&&(t.customParameters=this.layer.customParameters),t}getFeatureType(e){const{typeIdField:r,types:i}=this;if(!r||!e)return null;const t=e.attributes?e.attributes[r]:void 0;if(null==t)return null;let o=null;return i.some((e=>{const{id:r}=e;return null!=r&&(r.toString()===t.toString()&&(o=e),!!o)})),o}getFieldDomain(e,r){const i=r&&r.feature,t=this.getFeatureType(i);if(t){const r=t.domains&&t.domains[e];if(r&&\"inherited\"!==r.type)return r}return this._getLayerDomain(e)}async queryFeatures(e=this.createQuery(),r){var i,t,o,s;if(await this.load(),!this.get(\"capabilities.operations.supportsQuery\"))throw new l(\"Sublayer.queryFeatures\",\"this layer doesn't support queries.\");const[{executeQuery:a},{default:n}]=await Promise.all([import(\"../../rest/query/operations/query.js\"),import(\"../../rest/support/FeatureSet.js\")]),p=await a(this.url,M.from(e),null!=(i=null==(t=this.layer)?void 0:t.spatialReference)?i:null,{...r,query:{...null==(o=this.layer)?void 0:o.customParameters,token:null==(s=this.layer)?void 0:s.apiKey}}),y=n.fromJSON(p.data);if(null!=y&&y.features)for(const l of y.features)l.sourceLayer=this;return y}toExportImageJSON(){var e;const r={id:this.id,source:(null==(e=this.source)?void 0:e.toJSON())||{mapLayerId:this.id,type:\"mapLayer\"}};this.definitionExpression&&(r.definitionExpression=this.definitionExpression);const i=[\"renderer\",\"labelingInfo\",\"opacity\",\"labelsVisible\"].reduce(((e,r)=>(e[r]=this.originIdOf(r),e)),{});if(Object.keys(i).some((e=>i[e]>2))){const e=r.drawingInfo={};i.renderer>2&&(e.renderer=this.renderer?this.renderer.toJSON():null),i.labelsVisible>2&&(e.showLabels=this.labelsVisible),this.labelsVisible&&i.labelingInfo>2&&(e.labelingInfo=this.labelingInfo?this.labelingInfo.map((e=>e.write({},{origin:\"service\",layer:this.layer}))):null,e.showLabels=!0),i.opacity>2&&(e.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(e.renderer)}return r}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,(e=>{e.color||\"esriSMSX\"!==e.style&&\"esriSMSCross\"!==e.style||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])}))}_forEachSimpleMarkerSymbols(e,r){if(e){const i=\"uniqueValueInfos\"in e?e.uniqueValueInfos:\"classBreakInfos\"in e?e.classBreakInfos:[];for(const e of i)k(e.symbol)&&r(e.symbol);\"symbol\"in e&&k(e.symbol)&&r(e.symbol),\"defaultSymbol\"in e&&k(e.defaultSymbol)&&r(e.defaultSymbol)}}_setAndNotifyLayer(e,r){const i=this.layer,t=this._get(e);let o,s;switch(e){case\"definitionExpression\":o=\"supportsSublayerDefinitionExpression\";case\"minScale\":case\"maxScale\":case\"visible\":o=\"supportsSublayerVisibility\";break;case\"labelingInfo\":case\"labelsVisible\":case\"opacity\":case\"renderer\":case\"source\":o=\"supportsDynamicLayers\",s=\"supportsModification\"}const a=h(this).getDefaultOrigin();if(\"service\"!==a){if(o&&!1===this.get(`layer.capabilities.exportMap.${o}`))return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${o}'`);if(s&&!1===this.get(`capabilities.exportMap.${s}`))return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${s}'`)}\"source\"!==e||\"not-loaded\"===this.loadStatus?(this._set(e,r),\"service\"!==a&&t!==r&&i&&i.emit&&i.emit(\"sublayer-update\",{propertyName:e,target:this})):this._logLockedError(e,\"'source' can't be changed after calling sublayer.load()\")}_handleSublayersChange(e,r){r&&(r.forEach((e=>{e.parent=null,e.layer=null})),this.handles.removeAll()),e&&(e.forEach((e=>{e.parent=this,e.layer=this.layer})),this.handles.add([e.on(\"after-add\",(({item:e})=>{e.parent=this,e.layer=this.layer})),e.on(\"after-remove\",(({item:e})=>{e.parent=null,e.layer=null})),e.on(\"before-changes\",(e=>{const r=this.get(\"layer.capabilities.exportMap.supportsSublayersChanges\");null==r||r||($.error(new l(\"sublayer:sublayers-non-modifiable\",\"Sublayer can't be added, moved, or removed from the layer's sublayers\",{sublayer:this,layer:this.layer})),e.preventDefault())}))]))}_logLockedError(e,r){$.error(new l(\"sublayer:locked\",`Property '${e}' can't be changed on Sublayer from the layer '${this.layer.id}'`,{reason:r,sublayer:this,layer:this.layer}))}_getLayerDomain(e){const r=this.fieldsIndex.get(e);return r?r.domain:null}};B.test={isMapImageLayerOverridePolicy:e=>e===q||e===C,isTileImageLayerOverridePolicy:e=>e===A},e([m({readOnly:!0})],B.prototype,\"capabilities\",void 0),e([g(\"service\",\"capabilities\",[\"layerDefinition.canModifyLayer\",\"layerDefinition.capabilities\"])],B.prototype,\"readCapabilities\",null),e([m({type:String,value:null,json:{name:\"layerDefinition.definitionExpression\",write:{overridePolicy:C}}})],B.prototype,\"definitionExpression\",null),e([m({type:[x],json:{origins:{service:{read:{source:\"layerDefinition.fields\"}}}}})],B.prototype,\"fields\",void 0),e([m({readOnly:!0})],B.prototype,\"fieldsIndex\",null),e([m({type:T,json:{read:{source:\"layerDefinition.extent\"}}})],B.prototype,\"fullExtent\",void 0),e([m({type:String})],B.prototype,\"globalIdField\",void 0),e([g(\"service\",\"globalIdField\",[\"layerDefinition.globalIdField\",\"layerDefinition.fields\"])],B.prototype,\"readGlobalIdFieldFromService\",null),e([m({type:j,json:{write:{ignoreOrigin:!0}}})],B.prototype,\"id\",null),e([m({value:null,type:[F],json:{read:{source:\"layerDefinition.drawingInfo.labelingInfo\"},write:{target:\"layerDefinition.drawingInfo.labelingInfo\",overridePolicy:q}}})],B.prototype,\"labelingInfo\",null),e([S(\"labelingInfo\")],B.prototype,\"writeLabelingInfo\",null),e([m({type:Boolean,value:!0,json:{read:{source:\"layerDefinition.drawingInfo.showLabels\"},write:{target:\"layerDefinition.drawingInfo.showLabels\",overridePolicy:q}}})],B.prototype,\"labelsVisible\",null),e([m({value:null})],B.prototype,\"layer\",null),e([m({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:\"showLegend\"},write:{target:\"showLegend\",overridePolicy:U}}})],B.prototype,\"legendEnabled\",void 0),e([m({type:[\"show\",\"hide\",\"hide-children\"],value:\"show\",json:{read:!1,write:!1,origins:{\"web-scene\":{read:!0,write:!0}}}})],B.prototype,\"listMode\",null),e([m({type:Number,value:0,json:{write:{overridePolicy:q}}})],B.prototype,\"minScale\",null),e([g(\"minScale\",[\"minScale\",\"layerDefinition.minScale\"])],B.prototype,\"readMinScale\",null),e([m({type:Number,value:0,json:{write:{overridePolicy:q}}})],B.prototype,\"maxScale\",null),e([g(\"maxScale\",[\"maxScale\",\"layerDefinition.maxScale\"])],B.prototype,\"readMaxScale\",null),e([m({type:String})],B.prototype,\"objectIdField\",void 0),e([g(\"service\",\"objectIdField\",[\"layerDefinition.objectIdField\",\"layerDefinition.fields\"])],B.prototype,\"readObjectIdFieldFromService\",null),e([m({type:Number,value:1,json:{write:{target:\"layerDefinition.drawingInfo.transparency\",overridePolicy:q}}})],B.prototype,\"opacity\",null),e([g(\"opacity\",[\"layerDefinition.drawingInfo.transparency\",\"layerDefinition.transparency\"])],B.prototype,\"readOpacity\",null),e([S(\"opacity\")],B.prototype,\"writeOpacity\",null),e([m({json:{type:j,write:{target:\"parentLayerId\",allowNull:!0,overridePolicy:q}}})],B.prototype,\"parent\",void 0),e([S(\"parent\")],B.prototype,\"writeParent\",null),e([m({type:Boolean,value:!0,json:{read:{source:\"disablePopup\",reader:(e,r)=>!r.disablePopup},write:{target:\"disablePopup\",overridePolicy:U,writer(e,r,i){r[i]=!e}}}})],B.prototype,\"popupEnabled\",void 0),e([m({type:r,json:{read:{source:\"popupInfo\"},write:{target:\"popupInfo\",overridePolicy:U}}})],B.prototype,\"popupTemplate\",void 0),e([m({readOnly:!0})],B.prototype,\"defaultPopupTemplate\",null),e([m({types:i,value:null,json:{name:\"layerDefinition.drawingInfo.renderer\",write:{overridePolicy:q},origins:{\"web-scene\":{types:t,name:\"layerDefinition.drawingInfo.renderer\",write:{overridePolicy:q}}}}})],B.prototype,\"renderer\",null),e([m({types:{key:\"type\",base:null,typeMap:{\"data-layer\":_,\"map-layer\":E}},cast(e){if(e){if(\"mapLayerId\"in e)return L(E,e);if(\"dataSource\"in e)return L(_,e)}return e},json:{name:\"layerDefinition.source\",write:{overridePolicy:q}}})],B.prototype,\"source\",null),e([m()],B.prototype,\"sourceJSON\",void 0),e([m({value:null,json:{type:[j],write:{target:\"subLayerIds\",allowNull:!0,overridePolicy:q}}})],B.prototype,\"sublayers\",null),e([b(\"sublayers\")],B.prototype,\"castSublayers\",null),e([S(\"sublayers\")],B.prototype,\"writeSublayers\",null),e([m({type:String,json:{read:{source:\"name\"},write:{target:\"name\",allowNull:!0,overridePolicy:U}}})],B.prototype,\"title\",void 0),e([m({type:String})],B.prototype,\"typeIdField\",void 0),e([g(\"typeIdField\",[\"layerDefinition.typeIdField\"])],B.prototype,\"readTypeIdField\",null),e([m({type:[O],json:{origins:{service:{read:{source:\"layerDefinition.types\"}}}}})],B.prototype,\"types\",void 0),e([m({type:String,json:{read:{source:\"layerUrl\"},write:{target:\"layerUrl\",overridePolicy:A}}})],B.prototype,\"url\",null),e([m({type:Boolean,value:!0,json:{read:{source:\"defaultVisibility\"},write:{target:\"defaultVisibility\",overridePolicy:q}}})],B.prototype,\"visible\",null),e([S(\"visible\")],B.prototype,\"writeVisible\",null),B=V=e([v(\"esri.layers.support.Sublayer\")],B);var Q=B;export default Q;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../request.js\";import t from\"../TimeExtent.js\";import i from\"../core/Error.js\";import{HandleOwnerMixin as o}from\"../core/HandleOwner.js\";import{loadAll as s}from\"../core/loadAll.js\";import{isSome as a}from\"../core/maybe.js\";import{MultiOriginJSONMixin as p}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as n,isAbortError as l}from\"../core/promiseUtils.js\";import{property as m}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import{Integer as c}from\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{reader as u}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as y}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as d}from\"../core/accessorSupport/decorators/writer.js\";import{nameToId as h}from\"../core/accessorSupport/PropertyOrigin.js\";import f from\"../geometry/Extent.js\";import{getScale as g}from\"../geometry/support/scaleUtils.js\";import v from\"./Layer.js\";import{APIKeyMixin as x}from\"./mixins/APIKeyMixin.js\";import{ArcGISMapService as b}from\"./mixins/ArcGISMapService.js\";import{ArcGISService as j}from\"./mixins/ArcGISService.js\";import{BlendLayer as S}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as w}from\"./mixins/CustomParametersMixin.js\";import{OperationalLayer as O}from\"./mixins/OperationalLayer.js\";import{PortalLayer as L}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as I}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as M}from\"./mixins/ScaleRangeLayer.js\";import{SublayersOwner as E}from\"./mixins/SublayersOwner.js\";import{TemporalLayer as P}from\"./mixins/TemporalLayer.js\";import{url as N}from\"./support/commonProperties.js\";import{ExportImageParameters as R}from\"./support/ExportImageParameters.js\";import J from\"./support/Sublayer.js\";import{shouldWriteSublayerStructure as T}from\"./support/sublayerUtils.js\";let U=class extends(S(P(M(I(E(b(j(O(L(p(x(w(o(v)))))))))))))){constructor(...e){super(...e),this.alwaysRefetch=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat=\"png24\",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType=\"ArcGISMapServiceLayer\",this.sourceJSON=null,this.sublayers=null,this.type=\"map-image\",this.url=null}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){const r=a(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Map Service\"]},e).catch(n).then((()=>this._fetchService(r)))),Promise.resolve(this)}readImageFormat(e,r){const t=r.supportedImageFormatTypes;return t&&t.indexOf(\"PNG32\")>-1?\"png32\":\"png24\"}writeSublayers(e,r,t,i){if(!this.loaded||!e)return;const o=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray();let s=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const e=h(i.origin);if(3===e){const e=this.createSublayersForOrigin(\"service\").sublayers;s=T(o,e,2)}else if(e>3){const e=this.createSublayersForOrigin(\"portal-item\");s=T(o,e.sublayers,h(e.origin))}}const a=[],p={writeSublayerStructure:s,...i};let n=s;o.forEach((e=>{const r=e.write({},p);a.push(r),n=n||\"user\"===e.originOf(\"visible\")}));a.some((e=>Object.keys(e).length>1))&&(r.layers=a),n&&(r.visibleLayers=o.filter((e=>e.visible)).map((e=>e.id)))}createExportImageParameters(e,r,t,i){const o=i&&i.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const s=new R({layer:this,scale:g({extent:e,width:r})*o}),a=s.toJSON();s.destroy();const p=!i||!i.rotation||this.version<10.3?{}:{rotation:-i.rotation},n=e&&e.spatialReference,l=n.wkid||JSON.stringify(n.toJSON());a.dpi*=o;const m={};if(null!=i&&i.timeExtent){const{start:e,end:r}=i.timeExtent.toJSON();m.time=e&&r&&e===r?\"\"+e:`${null==e?\"null\":e},${null==r?\"null\":r}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(m.time=\"null,null\");return{bbox:e&&e.xmin+\",\"+e.ymin+\",\"+e.xmax+\",\"+e.ymax,bboxSR:l,imageSR:l,size:r+\",\"+t,...a,...p,...m}}async fetchImage(e,t,o,s){var a,p;const n={responseType:\"image\",signal:null!=(a=null==s?void 0:s.signal)?a:null,query:{...this.parsedUrl.query,...this.createExportImageParameters(e,t,o,s),f:\"image\",_ts:this.alwaysRefetch?Date.now():null!=(p=null==s?void 0:s.timestamp)?p:null,...this.customParameters,token:this.apiKey}},m=this.parsedUrl.path+\"/export\";if(null!=n.query.dynamicLayers&&!this.capabilities.exportMap.supportsDynamicLayers)return Promise.reject(new i(\"mapimagelayer:dynamiclayer-not-supported\",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:n.query}));return r(m,n).then((e=>e.data)).catch((e=>{if(l(e))throw e;throw new i(\"mapimagelayer:image-fetch-error\",`Unable to load image: ${m}`,{error:e})}))}async fetchRecomputedExtents(e={}){const i={...e,query:{returnUpdates:!0,f:\"json\"}},{data:o}=await r(this.url,i),{extent:s,fullExtent:a,timeExtent:p}=o,n=s||a;return{fullExtent:n&&f.fromJSON(n),timeExtent:p&&t.fromJSON({start:p[0],end:p[1]})}}loadAll(){return s(this,(e=>{e(this.allSublayers)}))}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:\"service\",url:this.parsedUrl});const{data:t,ssl:i}=await r(this.parsedUrl.path,{query:{f:\"json\",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:e});i&&(this.url=this.url.replace(/^http:/i,\"https:\")),this.sourceJSON=t,this.read(t,{origin:\"service\",url:this.parsedUrl})}};e([m()],U.prototype,\"alwaysRefetch\",void 0),e([m()],U.prototype,\"dpi\",void 0),e([m()],U.prototype,\"gdbVersion\",void 0),e([m()],U.prototype,\"imageFormat\",void 0),e([u(\"imageFormat\",[\"supportedImageFormatTypes\"])],U.prototype,\"readImageFormat\",null),e([m({json:{origins:{service:{read:{source:\"maxImageHeight\"}}}}})],U.prototype,\"imageMaxHeight\",void 0),e([m({json:{origins:{service:{read:{source:\"maxImageWidth\"}}}}})],U.prototype,\"imageMaxWidth\",void 0),e([m()],U.prototype,\"imageTransparency\",void 0),e([m({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],U.prototype,\"isReference\",void 0),e([m({json:{read:!1,write:!1}})],U.prototype,\"labelsVisible\",void 0),e([m({type:[\"ArcGISMapServiceLayer\"]})],U.prototype,\"operationalLayerType\",void 0),e([m({json:{read:!1,write:!1}})],U.prototype,\"popupEnabled\",void 0),e([m()],U.prototype,\"sourceJSON\",void 0),e([m({json:{write:{ignoreOrigin:!0}}})],U.prototype,\"sublayers\",void 0),e([d(\"sublayers\",{layers:{type:[J]},visibleLayers:{type:[c]}})],U.prototype,\"writeSublayers\",null),e([m({type:[\"show\",\"hide\",\"hide-children\"]})],U.prototype,\"listMode\",void 0),e([m({json:{read:!1},readOnly:!0,value:\"map-image\"})],U.prototype,\"type\",void 0),e([m(N)],U.prototype,\"url\",void 0),U=e([y(\"esri.layers.MapImageLayer\")],U);var q=U;export default q;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Accessor.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as a}from\"./commonProperties.js\";import{isExportDynamic as o}from\"./sublayerUtils.js\";const l={visible:\"visibleSublayers\",definitionExpression:\"layerDefs\",labelingInfo:\"hasDynamicLayers\",labelsVisible:\"hasDynamicLayers\",opacity:\"hasDynamicLayers\",minScale:\"visibleSublayers\",maxScale:\"visibleSublayers\",renderer:\"hasDynamicLayers\",source:\"hasDynamicLayers\"};let n=class extends(s(r)){constructor(e){super(e),this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((e=>e.toExportImageJSON()));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&o(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get(\"layer\")!==e&&(this._set(\"layer\",e),this.handles.remove(\"layer\"),e&&this.handles.add([e.allSublayers.on(\"change\",(()=>this.notifyChange(\"visibleSublayers\"))),e.on(\"sublayer-update\",(e=>this.notifyChange(l[e.propertyName])))],\"layer\"))}get layers(){const e=this.visibleSublayers;return e?e.length?\"show:\"+e.map((e=>e.id)).join(\",\"):\"show:-1\":null}get layerDefs(){const e=this.visibleSublayers.filter((e=>null!=e.definitionExpression));return e.length?JSON.stringify(e.reduce(((e,r)=>(e[r.id]=r.definitionExpression,e)),{})):null}get version(){this.commitProperty(\"layers\"),this.commitProperty(\"layerDefs\"),this.commitProperty(\"dynamicLayers\"),this.commitProperty(\"timeExtent\");const e=this.layer;return e&&(e.commitProperty(\"dpi\"),e.commitProperty(\"imageFormat\"),e.commitProperty(\"imageTransparency\"),e.commitProperty(\"gdbVersion\")),(this._get(\"version\")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const r=this.layer.sublayers,s=r=>{const t=this.scale,i=0===t,a=0===r.minScale||t<=r.minScale,o=0===r.maxScale||t>=r.maxScale;r.visible&&(i||a&&o)&&(r.sublayers?r.sublayers.forEach(s):e.unshift(r))};r&&r.forEach(s);const t=this._get(\"visibleSublayers\");return!t||t.length!==e.length||t.some(((r,s)=>e[s]!==r))?e:t}toJSON(){const e=this.layer;let r={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?r.dynamicLayers=this.dynamicLayers:r={...r,layers:this.layers,layerDefs:this.layerDefs},r}};e([t({readOnly:!0})],n.prototype,\"dynamicLayers\",null),e([t({readOnly:!0})],n.prototype,\"hasDynamicLayers\",null),e([t()],n.prototype,\"layer\",null),e([t({readOnly:!0})],n.prototype,\"layers\",null),e([t({readOnly:!0})],n.prototype,\"layerDefs\",null),e([t({type:Number})],n.prototype,\"scale\",void 0),e([t(a)],n.prototype,\"timeExtent\",void 0),e([t({readOnly:!0})],n.prototype,\"version\",null),e([t({readOnly:!0})],n.prototype,\"visibleSublayers\",null),n=e([i(\"esri.layers.mixins.ExportImageParameters\")],n);export{n as ExportImageParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{getMetersPerUnitForSR as t,inchesPerMeter as n}from\"../../core/unitUtils.js\";const e=96;function r(r,i){const o=i||r.extent,c=r.width,u=t(o&&o.spatialReference);return o&&c?o.width/c*u*n*e:0}function i(r,i){return r/(t(i)*n*e)}function o(r,i){return r*(t(i)*n*e)}function c(t,n){const e=t.extent,r=t.width,o=i(n,e.spatialReference);return e.clone().expand(o*r/e.width)}export{c as getExtentForScale,i as getResolutionForScale,r as getScale,o as getScaleForResolution};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../request.js\";import{throwIfAborted as s}from\"../../core/promiseUtils.js\";import{urlToObject as t}from\"../../core/urlUtils.js\";import{Version as o}from\"../../core/Version.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{reader as p}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import l from\"../../geometry/Extent.js\";import n from\"../../geometry/SpatialReference.js\";import{id as u,popupEnabled as c}from\"../support/commonProperties.js\";const y=y=>{let m=class extends y{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=null}readCapabilities(e,r){const s=r.capabilities&&r.capabilities.split(\",\").map((e=>e.toLowerCase().trim()));if(!s)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const t=this.type,i=-1!==s.indexOf(\"query\"),p=-1!==s.indexOf(\"map\"),a=!!r.exportTilesAllowed,l=-1!==s.indexOf(\"tilemap\"),n=\"tile\"!==t&&!!r.supportsDynamicLayers,u=\"tile\"!==t&&(!r.tileInfo||n),c=\"tile\"!==t&&(!r.tileInfo||n),y=\"tile\"!==t,m=!!r.cimVersion&&o.parse(r.cimVersion).since(1,4);return{operations:{supportsQuery:i,supportsExportMap:p,supportsExportTiles:a,supportsTileMap:l},exportMap:p?{supportsArcadeExpressionForLabeling:m,supportsSublayersChanges:y,supportsDynamicLayers:n,supportsSublayerVisibility:u,supportsSublayerDefinitionExpression:c}:null,exportTiles:a?{maxExportTilesCount:+r.maxExportTilesCount}:null}}readVersion(e,r){let s=r.currentVersion;return s||(s=r.hasOwnProperty(\"capabilities\")||r.hasOwnProperty(\"tables\")?10:r.hasOwnProperty(\"supportedImageFormatTypes\")?9.31:9.3),s}async fetchSublayerInfo(e,r){return await this.fetchAllLayersAndTables(r),this._allLayersAndTablesMap.get(e)}async fetchAllLayersAndTables(e){await this.load(e),this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=r(t(this.url).path+\"/layers\",{responseType:\"json\",query:{f:\"json\",...this.customParameters,token:this.apiKey}}).then((e=>{this._allLayersAndTablesMap=new Map;for(const r of e.data.layers)this._allLayersAndTablesMap.set(r.id,r);return{result:e.data}}),(e=>({error:e}))));const o=await this._allLayersAndTablesPromise;if(s(e),\"result\"in o)return o.result;throw o.error}};return e([i({readOnly:!0})],m.prototype,\"capabilities\",void 0),e([p(\"service\",\"capabilities\",[\"capabilities\",\"exportTilesAllowed\",\"maxExportTilesCount\",\"supportsDynamicLayers\",\"tileInfo\"])],m.prototype,\"readCapabilities\",null),e([i({json:{read:{source:\"copyrightText\"}}})],m.prototype,\"copyright\",void 0),e([i({type:l})],m.prototype,\"fullExtent\",void 0),e([i(u)],m.prototype,\"id\",void 0),e([i({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:\"showLegend\"},write:{target:\"showLegend\"}}})],m.prototype,\"legendEnabled\",void 0),e([i(c)],m.prototype,\"popupEnabled\",void 0),e([i({type:n})],m.prototype,\"spatialReference\",void 0),e([i()],m.prototype,\"version\",void 0),e([p(\"version\",[\"currentVersion\",\"capabilities\",\"tables\",\"supportedImageFormatTypes\"])],m.prototype,\"readVersion\",null),m=e([a(\"esri.layers.mixins.ArcGISMapService\")],m),m};export{y as ArcGISMapService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Collection.js\";import s from\"../../core/CollectionFlattener.js\";import t from\"../../core/Error.js\";import o from\"../../core/Logger.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import{getProperties as l}from\"../../core/accessorSupport/utils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import{nameToId as n,idToName as u}from\"../../core/accessorSupport/PropertyOrigin.js\";import y from\"../support/Sublayer.js\";import{isSublayerOverhaul as c}from\"../support/sublayerUtils.js\";const b=o.getLogger(\"esri.layers.TileLayer\");function p(e,r){const s=[],t={};return e?(e.forEach((e=>{const o=new y;if(o.read(e,r),t[o.id]=o,null!=e.parentLayerId&&-1!==e.parentLayerId){const r=t[e.parentLayerId];r.sublayers||(r.sublayers=[]),r.sublayers.unshift(o)}else s.unshift(o)})),s):s}const d=r.ofType(y);function h(e,r){e&&e.forEach((e=>{r(e),e.sublayers&&e.sublayers.length&&h(e.sublayers,r)}))}const f=o=>{let f=class extends o{constructor(...e){super(...e),this.allSublayers=new s({getCollections:()=>[this.sublayers],getChildrenFunction:e=>e.sublayers}),this.sublayersSourceJSON={2:{},3:{},4:{},5:{}},this.handles.add(this.watch(\"sublayers\",((e,r)=>this._handleSublayersChange(e,r)),!0))}readSublayers(e,r){if(!r||!e)return;const{sublayersSourceJSON:s}=this,t=n(r.origin);if(t<2)return;if(s[t]={context:r,visibleLayers:e.visibleLayers||s[t].visibleLayers,layers:e.layers||s[t].layers},t>2)return;this._set(\"serviceSublayers\",this.createSublayersForOrigin(\"service\").sublayers);const{sublayers:o,origin:a}=this.createSublayersForOrigin(\"web-document\"),i=l(this);i.setDefaultOrigin(a),this._set(\"sublayers\",new d(o)),i.setDefaultOrigin(\"user\")}findSublayerById(e){return this.allSublayers.find((r=>r.id===e))}createServiceSublayers(){return this.createSublayersForOrigin(\"service\").sublayers}createSublayersForOrigin(e){const r=n(\"web-document\"===e?\"web-map\":e);let s=2,t=this.sublayersSourceJSON[2].layers,o=this.sublayersSourceJSON[2].context,a=null;const l=[3,4,5].filter((e=>e<=r));for(const n of l){const e=this.sublayersSourceJSON[n];c(e.layers)&&(s=n,t=e.layers,o=e.context,e.visibleLayers&&(a={visibleLayers:e.visibleLayers,context:e.context}))}const i=[3,4,5].filter((e=>e>s&&e<=r));let y=null;for(const n of i){const{layers:e,visibleLayers:r,context:s}=this.sublayersSourceJSON[n];e&&(y={layers:e,context:s}),r&&(a={visibleLayers:r,context:s})}const b=p(t,o),f=new Map,S=new Set;if(y)for(const n of y.layers)f.set(n.id,n);if(a)for(const n of a.visibleLayers)S.add(n);return h(b,(e=>{y&&e.read(f.get(e.id),y.context),a&&e.read({defaultVisibility:S.has(e.id)},a.context)})),{origin:u(s),sublayers:new d({items:b})}}read(e,r){super.read(e,r),this.readSublayers(e,r)}_handleSublayersChange(e,r){r&&(r.forEach((e=>{e.parent=null,e.layer=null})),this.handles.remove(\"sublayers-owner\")),e&&(e.forEach((e=>{e.parent=this,e.layer=this})),this.handles.add([e.on(\"after-add\",(({item:e})=>{e.parent=this,e.layer=this})),e.on(\"after-remove\",(({item:e})=>{e.parent=null,e.layer=null}))],\"sublayers-owner\"),\"tile\"===this.type&&this.handles.add(e.on(\"before-changes\",(e=>{b.error(new t(\"tilelayer:sublayers-non-modifiable\",\"ISublayer can't be added, moved, or removed from the layer's sublayers\",{layer:this})),e.preventDefault()})),\"sublayers-owner\"))}};return e([a({readOnly:!0})],f.prototype,\"allSublayers\",void 0),e([a({readOnly:!0,type:r.ofType(y)})],f.prototype,\"serviceSublayers\",void 0),e([a({value:null,type:d,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],f.prototype,\"sublayers\",void 0),e([a({readOnly:!0})],f.prototype,\"sublayersSourceJSON\",void 0),f=e([i(\"esri.layers.mixins.SublayersOwner\")],f),f};export{f as SublayersOwner,h as forEachSublayer};\n"],"sourceRoot":""}