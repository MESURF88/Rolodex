{"version":3,"sources":["node_modules/@arcgis/core/views/webgl.js","node_modules/@arcgis/core/views/webgl/Texture.js","node_modules/@arcgis/core/views/webgl/enums.js","node_modules/@arcgis/core/views/webgl/programUtils.js","node_modules/@arcgis/core/views/webgl/capabilities/isWebGL2Context.js","node_modules/@arcgis/core/views/webgl/ProgramCache.js","node_modules/@arcgis/core/views/webgl/ShaderCompiler.js"],"names":["r","t","e","a","this","_context","type","_glName","_descriptor","_samplingModeDirty","_wrapModeDirty","instanceCounter","increment","Texture","target","samplingMode","wrapMode","flipped","hasMipmap","isOpaque","unpackAlignment","preMultiplyAlpha","setData","gl","unbindTextureAllUnits","deleteTexture","decrement","dispose","i","width","height","createTexture","bindTexture","TEXTURE_UNIT_FOR_UPDATES","p","_validateTexture","pixelStorei","UNPACK_ALIGNMENT","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","n","pixelFormat","h","internalFormat","ImageData","HTMLImageElement","HTMLCanvasElement","HTMLVideoElement","videoWidth","videoHeight","texImage2D","TEXTURE_2D","dataType","generateMipmap","console","error","DEPTH24_STENCIL8","DEPTH_STENCIL","s","o","Math","round","log","max","LN2","levels","length","min","compressedTexImage2D","_applySamplingMode","_applyWrapMode","_applyAnisotropicFilteringParameters","texSubImage2D","texParameteri","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","capabilities","textureFilterAnisotropic","texParameterf","TEXTURE_MAX_ANISOTROPY","maxAnisotropy","Buffer","VAO","Program","Framebuffer","Renderbuffer","COUNT","toFixed","options","value","f","shaders","vertexShader","fragmentShader","attributes","window","WebGL2RenderingContext","_programCacheByTemplate","Map","_rctx","forEach","programs","has","addProgramTemplate","getProgramTemplateInstance","set","constructor","get","JSON","stringify","readFile","resolve","read","Error","exec","l","push","path","start","index","slice"],"mappings":"wFAAA,kuB,iCCAA,wCAIyM,MAAMA,EAAE,YAAYC,EAAEC,EAAEC,EAAE,MAAMC,KAAKC,SAASJ,EAAEG,KAAKE,KAAK,UAAUF,KAAKG,QAAQ,KAAKH,KAAKI,iBAAY,EAAOJ,KAAKK,oBAAmB,EAAGL,KAAKM,gBAAe,EAAGT,EAAEU,gBAAgBC,UAAU,IAAEC,QAAQT,MAAMA,KAAKI,YAAY,CAACM,OAAO,KAAKC,aAAa,KAAKC,SAAS,MAAMC,SAAQ,EAAGC,WAAU,EAAGC,UAAS,EAAGC,gBAAgB,EAAEC,kBAAiB,KAAMnB,GAAGE,KAAKkB,QAAQnB,GAAG,aAAa,OAAOC,KAAKG,QAAQ,iBAAiB,OAAOH,KAAKI,YAAY,UAAUJ,KAAKC,SAASkB,IAAInB,KAAKG,UAAUH,KAAKC,SAASmB,sBAAsBpB,MAAMA,KAAKC,SAASkB,GAAGE,cAAcrB,KAAKG,SAASH,KAAKG,QAAQ,KAAKH,KAAKC,SAASM,gBAAgBe,UAAU,IAAEb,QAAQT,OAAO,UAAUA,KAAKuB,UAAU,OAAO1B,EAAEC,GAAG,MAAM0B,EAAExB,KAAKI,YAAYoB,EAAEC,QAAQ5B,GAAG2B,EAAEE,SAAS5B,IAAI0B,EAAEC,MAAM5B,EAAE2B,EAAEE,OAAO5B,EAAEE,KAAKkB,QAAQ,OAAO,QAAQrB,GAAG,IAAIG,KAAKC,WAAWD,KAAKC,SAASkB,GAAG,OAAO,MAAMK,EAAExB,KAAKC,SAASkB,GAAGnB,KAAKG,UAAUH,KAAKG,QAAQqB,EAAEG,sBAAiB,IAAS9B,IAAIA,EAAE,MAAM,OAAOA,IAAIG,KAAKI,YAAYqB,MAAMzB,KAAKI,YAAYqB,OAA98B,EAAu9BzB,KAAKI,YAAYsB,OAAO1B,KAAKI,YAAYsB,QAAhgC,GAA2gC,MAAM3B,EAAEC,KAAKC,SAAS2B,YAAY5B,KAAKJ,EAAEiC,0BAA0BC,EAAE9B,KAAKI,YAAYR,EAAEmC,iBAAiB/B,KAAKC,SAAS6B,GAAGN,EAAEQ,YAAYR,EAAES,iBAAiBH,EAAEd,iBAAiBQ,EAAEQ,YAAYR,EAAEU,oBAAoBJ,EAAEjB,QAAQ,EAAE,GAAGW,EAAEQ,YAAYR,EAAEW,+BAA+BL,EAAEb,iBAAiB,EAAE,GAAG,MAAMmB,EAAEN,EAAEO,YAAY,IAAIC,EAAER,EAAES,eAAeT,EAAES,eAAeH,EAAE,GAAGvC,aAAa2C,WAAW3C,aAAa4C,kBAAkB5C,aAAa6C,mBAAmB7C,aAAa8C,iBAAiB,CAAC,IAAI7C,EAAED,EAAE4B,MAAM1B,EAAEF,EAAE6B,OAAO7B,aAAa8C,mBAAmB7C,EAAED,EAAE+C,WAAW7C,EAAEF,EAAEgD,aAAaf,EAAEL,OAAOK,EAAEJ,OAAOF,EAAEsB,WAAWtB,EAAEuB,WAAW,EAAET,EAAEF,EAAEN,EAAEkB,SAASnD,GAAGiC,EAAEhB,WAAWd,KAAKiD,sBAAiB,IAASnB,EAAEL,QAAQK,EAAEL,MAAM3B,QAAG,IAASgC,EAAEJ,SAASI,EAAEJ,OAAO3B,OAAO,CAAC,MAAM+B,EAAEL,OAAO,MAAMK,EAAEJ,QAAQwB,QAAQC,MAAM,uCAAuC3B,EAAE4B,kBAAkBd,IAAId,EAAE6B,gBAAgBf,EAAEd,EAAE4B,kBAAkB,IAAIrD,EAAE+B,EAAEL,MAAM6B,EAAExB,EAAEJ,OAAO,GAA2uH,SAAW7B,GAAG,OAAO,YAAEA,IAAI,SAASA,GAAG,eAAeA,EAAEK,KAAhyHqD,CAAE1D,GAAG,CAAC,MAAMC,EAAE0D,KAAKC,MAAMD,KAAKE,IAAIF,KAAKG,IAAI5D,EAAEuD,IAAIE,KAAKI,KAAK,EAAE9B,EAAEhB,UAAUgB,EAAEhB,WAAWhB,IAAID,EAAEgE,OAAOC,OAAO,IAAI,IAAIlE,EAAE,KAAKA,EAAE,CAAC,MAAME,EAAED,EAAEgE,OAAOL,KAAKO,IAAInE,EAAEC,EAAEgE,OAAOC,OAAO,IAAI,GAAGtC,EAAEwC,qBAAqBxC,EAAEuB,WAAWnD,EAAE0C,EAAEvC,EAAEuD,EAAE,EAAExD,GAAG,IAAIC,GAAG,IAAIuD,IAAIxB,EAAEhB,UAAU,MAAMf,EAAEyD,KAAKG,IAAI,EAAE5D,GAAG,GAAGuD,EAAEE,KAAKG,IAAI,EAAEL,GAAG,SAAS,GAAG,YAAEzD,GAAG2B,EAAEsB,WAAWtB,EAAEuB,WAAW,EAAET,EAAEvC,EAAEuD,EAAE,EAAElB,EAAEN,EAAEkB,SAASnD,GAAGiC,EAAEhB,WAAWd,KAAKiD,sBAAsB,IAAI,IAAIpD,EAAE,EAAE2B,EAAEsB,WAAWtB,EAAEuB,WAAWlD,EAAEyC,EAAEvC,EAAEuD,EAAE,EAAElB,EAAEN,EAAEkB,SAAS,OAAO,IAAIjD,GAAG,IAAIuD,IAAIxB,EAAEhB,YAAYjB,EAAEE,EAAEyD,KAAKG,IAAI,EAAE5D,GAAG,GAAGuD,EAAEE,KAAKG,IAAI,EAAEL,GAAG,GAAG1D,EAAEqE,mBAAmBzC,EAAExB,KAAKI,aAAaR,EAAEsE,eAAe1C,EAAExB,KAAKI,aAAaR,EAAEuE,qCAAqCnE,KAAKC,SAASD,KAAKI,aAAaJ,KAAKC,SAAS2B,YAAY7B,EAAEH,EAAEiC,0BAA0B,WAAWhC,EAAEC,EAAE0B,EAAEzB,EAAEuD,EAAEC,GAAGA,GAAGL,QAAQC,MAAM,yCAAyCnD,KAAKG,SAAS+C,QAAQC,MAAM,+CAA+C,MAAMrB,EAAE9B,KAAKC,SAASkB,GAAGiB,EAAEpC,KAAKI,YAAYkC,EAAEtC,KAAKC,SAAS2B,YAAY5B,KAAKJ,EAAEiC,2BAA2B/B,EAAE,GAAG0B,EAAE,GAAGzB,EAAEqC,EAAEX,OAAO6B,EAAElB,EAAEV,QAAQ5B,EAAEC,EAAEqC,EAAEX,OAAOD,EAAE8B,EAAElB,EAAEV,SAASwB,QAAQC,MAAM,sDAAsDrB,EAAEE,YAAYF,EAAEG,iBAAiBG,EAAEpB,iBAAiBc,EAAEE,YAAYF,EAAEI,oBAAoBE,EAAEvB,QAAQ,EAAE,GAAGiB,EAAEE,YAAYF,EAAEK,+BAA+BC,EAAEnB,iBAAiB,EAAE,GAAGsC,aAAaf,WAAWe,aAAad,kBAAkBc,aAAab,mBAAmBa,aAAaZ,iBAAiBb,EAAEsC,cAActC,EAAEiB,WAAWlD,EAAEC,EAAE0B,EAAEY,EAAEC,YAAYD,EAAEY,SAASO,GAAGzB,EAAEsC,cAActC,EAAEiB,WAAWlD,EAAEC,EAAE0B,EAAEzB,EAAEuD,EAAElB,EAAEC,YAAYD,EAAEY,SAASO,GAAGvD,KAAKC,SAAS2B,YAAYU,EAAE1C,EAAEiC,0BAA0B,iBAAiB,MAAMhC,EAAEG,KAAKI,YAAYP,EAAEiB,YAAYjB,EAAEiB,WAAU,EAAGd,KAAKK,oBAAmB,EAAGT,EAAEmC,iBAAiB/B,KAAKC,SAASJ,IAAI,OAAOA,EAAEc,cAAcX,KAAKK,oBAAmB,EAAGR,EAAEc,aAAa,MAAM,OAAOd,EAAEc,eAAeX,KAAKK,oBAAmB,EAAGR,EAAEc,aAAa,MAAM,MAAMb,EAAEE,KAAKC,SAAS2B,YAAY5B,KAAKJ,EAAEiC,0BAA0BL,EAAExB,KAAKC,SAASkB,GAAGK,EAAEyB,eAAezB,EAAEuB,YAAY/C,KAAKC,SAAS2B,YAAY9B,EAAEF,EAAEiC,0BAA0B,gBAAgBhC,GAAGA,IAAIG,KAAKI,YAAYO,eAAeX,KAAKI,YAAYO,aAAad,EAAEG,KAAKK,oBAAmB,GAAI,YAAYR,GAAGA,IAAIG,KAAKI,YAAYQ,WAAWZ,KAAKI,YAAYQ,SAASf,EAAED,EAAEmC,iBAAiB/B,KAAKC,SAASD,KAAKI,aAAaJ,KAAKM,gBAAe,GAAI,eAAe,MAAMT,EAAEG,KAAKC,SAASkB,GAAGrB,EAAEE,KAAKI,YAAYJ,KAAKK,qBAAqBT,EAAEqE,mBAAmBpE,EAAEC,GAAGE,KAAKK,oBAAmB,GAAIL,KAAKM,iBAAiBV,EAAEsE,eAAerE,EAAEC,GAAGE,KAAKM,gBAAe,GAAI,wBAAwBR,EAAE0B,IAAIA,EAAEC,MAAM,GAAGD,EAAEE,OAAO,IAAIwB,QAAQC,MAAM,kDAAkD,MAAMG,EAAE,YAAE9B,EAAEC,QAAQ,YAAED,EAAEE,QAAQ,YAAE5B,EAAEqB,KAAKmC,IAAI,iBAAiB9B,EAAEZ,SAAS,QAAQY,EAAEZ,UAAUsC,QAAQC,MAAM,qEAAqE,QAAQ3B,EAAEZ,SAAS0C,GAAG,QAAQ9B,EAAEZ,SAASf,GAAGqD,QAAQC,MAAM,qEAAqE3B,EAAEV,WAAWoC,QAAQC,MAAM,+CAA+C,0BAA0BtD,EAAEC,GAAG,IAAI0B,EAAE1B,EAAEa,aAAaZ,EAAED,EAAEa,aAAa,OAAOa,GAAG,OAAOA,GAAGA,EAAE,KAAK1B,EAAEgB,YAAYf,EAAE,OAAO,OAAOyB,GAAG,OAAOA,IAAIA,EAAE,KAAK1B,EAAEgB,YAAYf,EAAE,OAAOF,EAAEwE,cAAcxE,EAAEkD,WAAWlD,EAAEyE,mBAAmB9C,GAAG3B,EAAEwE,cAAcxE,EAAEkD,WAAWlD,EAAE0E,mBAAmBxE,GAAG,sBAAsBF,EAAEC,GAAG,iBAAiBA,EAAEc,UAAUf,EAAEwE,cAAcxE,EAAEkD,WAAWlD,EAAE2E,eAAe1E,EAAEc,UAAUf,EAAEwE,cAAcxE,EAAEkD,WAAWlD,EAAE4E,eAAe3E,EAAEc,YAAYf,EAAEwE,cAAcxE,EAAEkD,WAAWlD,EAAE2E,eAAe1E,EAAEc,SAAS0C,GAAGzD,EAAEwE,cAAcxE,EAAEkD,WAAWlD,EAAE4E,eAAe3E,EAAEc,SAASf,IAAI,4CAA4CA,EAAEC,GAAG,IAAI0B,EAAE,MAAMzB,EAAEF,EAAE6E,aAAaC,yBAAyB,IAAI5E,EAAE,OAAO,MAAMuD,EAAEzD,EAAEsB,GAAGmC,EAAEsB,cAActB,EAAEP,WAAWhD,EAAE8E,uBAAuB,OAAOrD,EAAE1B,EAAEgF,eAAetD,EAAE,IAAiE5B,EAAEiC,yBAAyB,EAAiB,O,iCCJn7L,oEAIA,MAAMjC,EAAE,MAAM,IAAIE,GAAG,SAASF,GAAGA,EAAEA,EAAEa,QAAQ,GAAG,UAAUb,EAAEA,EAAEmF,OAAO,GAAG,SAASnF,EAAEA,EAAEoF,IAAI,GAAG,MAAMpF,EAAEA,EAAEqF,QAAQ,GAAG,UAAUrF,EAAEA,EAAEsF,YAAY,GAAG,cAActF,EAAEA,EAAEuF,aAAa,GAAG,eAAevF,EAAEA,EAAEwF,MAAM,GAAG,QAAvL,CAAgMtF,IAAIA,EAAE,M,iCCJ3N,iFAIuC,SAASsC,EAAEtC,GAAG,IAAIsC,EAAE,GAAG,IAAI,MAAMvC,KAAKC,EAAE,CAAC,MAAMyD,EAAEzD,EAAED,GAAG,GAAG,kBAAkB0D,EAAEA,IAAInB,GAAG,WAAWvC,YAAY,GAAG,iBAAiB0D,EAAEnB,GAAG,WAAWvC,KAAK0D,EAAE8B,mBAAmB,GAAG,iBAAiB9B,EAAE,CAAC,MAAMzD,EAAEyD,EAAE+B,QAAQ,IAAI1F,EAAE,EAAE,IAAI,MAAMC,KAAKC,EAAEsC,GAAG,WAAWtC,EAAED,OAAOD,KAAKyF,cAAcjD,GAAG,WAAWvC,KAAKC,EAAEyD,EAAEgC,YAAY,OAAOnD,EAAE,SAASvC,EAAEuC,EAAEvC,EAAE0D,EAAE3D,GAAG2D,EAAEA,GAAG,GAAG3D,EAAEA,GAAG,GAAG,MAAM4F,EAAE,mBAAmB3F,EAAE4F,QAAQ5F,EAAE4F,QAAQlC,GAAG1D,EAAE4F,QAAQ,OAAO,IAAI,IAAErD,EAAExC,EAAE4F,EAAEE,aAAa9F,EAAE4F,EAAEG,eAAe9F,EAAE+F,c,iCCA/Y,IAA9G,SAAWxD,GAAG,OAAOyD,OAAOC,wBAAwB1D,aAAayD,OAAOC,yB,iCCJxE,aAIwtB,IAAtqB,MAAQ,YAAYlG,GAAGI,KAAK+F,wBAAwB,IAAIC,IAAIhG,KAAKiG,MAAMrG,EAAE,UAAUI,KAAK+F,wBAAwBG,QAAStG,GAAGA,EAAEuG,SAASD,QAAStG,GAAGA,EAAE2B,YAAcvB,KAAK+F,wBAAwB,KAAK,WAAWlG,EAAEE,GAAG,OAAOC,KAAK+F,wBAAwBK,IAAIvG,IAAIG,KAAKqG,mBAAmBxG,EAAGE,GAAG,YAAEC,KAAKiG,MAAMpG,EAAEE,IAAKC,KAAKsG,2BAA2BzG,EAAEE,GAAG,mBAAmBH,EAAEC,GAAGG,KAAK+F,wBAAwBQ,IAAI3G,EAAE,CAAC4G,YAAY3G,EAAEsG,SAAS,IAAIH,MAAM,2BAA2BpG,EAAEC,GAAG,MAAME,EAAEC,KAAK+F,wBAAwBU,IAAI7G,GAAG,GAAGG,EAAE,CAAC,MAAMH,EAAEC,EAAE6G,KAAKC,UAAU9G,GAAG,UAAU,IAAIE,EAAEoG,SAASC,IAAIxG,GAAG,CAAC,MAAME,EAAEC,EAAEyG,YAAY3G,GAAGE,EAAEoG,SAASI,IAAI3G,EAAEE,GAAG,OAAOC,EAAEoG,SAASM,IAAI7G,GAAG,OAAO,Q,iCCAvJ,IAA5iB,MAAQ,YAAYE,GAAGE,KAAK4G,SAAS9G,EAAE,gBAAgBA,GAAG,OAAOE,KAAK6G,QAAQ/G,GAAG,QAAQA,EAAED,EAAE,IAAImG,KAAK,GAAGnG,EAAEuG,IAAItG,GAAG,OAAOD,EAAE4G,IAAI3G,GAAG,MAAMF,EAAEI,KAAK8G,KAAKhH,GAAG,IAAIF,EAAE,MAAM,IAAImH,MAAM,2BAA2BjH,GAAK,MAAMwD,EAAE,wCAAwC,IAAIlB,EAAEkB,EAAE0D,KAAKpH,GAAG,MAAMqH,EAAE,GAAG,KAAK,MAAM7E,GAAG6E,EAAEC,KAAK,CAACC,KAAK/E,EAAE,GAAGgF,MAAMhF,EAAEiF,MAAMvD,OAAO1B,EAAE,GAAG0B,SAAS1B,EAAEkB,EAAE0D,KAAKpH,GAAG,IAAIG,EAAE,EAAEuC,EAAE,GAAG,OAAO2E,EAAEf,QAASpG,IAAIwC,GAAG1C,EAAE0H,MAAMvH,EAAED,EAAEsH,OAAO9E,GAAGzC,EAAEuG,IAAItG,EAAEqH,MAAM,GAAGnH,KAAK6G,QAAQ/G,EAAEqH,KAAKtH,GAAGE,EAAED,EAAEsH,MAAMtH,EAAEgE,SAAUxB,GAAG1C,EAAE0H,MAAMvH,GAAGF,EAAE0G,IAAIzG,EAAEwC,GAAGA,EAAE,KAAKxC,GAAG,OAAOE,KAAK4G,SAAS9G","file":"static/js/27.ef742b7b.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nexport{default as BufferObject}from\"./webgl/BufferObject.js\";export{default as FramebufferObject}from\"./webgl/FramebufferObject.js\";export{Program}from\"./webgl/Program.js\";export{default as ProgramCache}from\"./webgl/ProgramCache.js\";export{default as Renderbuffer}from\"./webgl/Renderbuffer.js\";export{default as RenderingContext}from\"./webgl/RenderingContext.js\";export{default as ShaderCompiler}from\"./webgl/ShaderCompiler.js\";export{default as Texture}from\"./webgl/Texture.js\";export{default as VertexArrayObject}from\"./webgl/VertexArrayObject.js\";export{createProgram,glslifyDefineMap}from\"./webgl/programUtils.js\";export{createContextOrErrorHTML}from\"./webgl/context-util.js\";\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isPowerOfTwo as t}from\"../../core/mathUtils.js\";import{isSome as e}from\"../../core/maybe.js\";import{ResourceType as i}from\"./enums.js\";import a from\"./capabilities/isWebGL2Context.js\";const s=4;class r{constructor(t,e,a=null){this._context=t,this.type=\"texture\",this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,t.instanceCounter.increment(i.Texture,this),this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...e},this.setData(a)}get glName(){return this._glName}get descriptor(){return this._descriptor}dispose(){this._context.gl&&this._glName&&(this._context.unbindTextureAllUnits(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(i.Texture,this))}release(){this.dispose()}resize(t,e){const i=this._descriptor;i.width===t&&i.height===e||(i.width=t,i.height=e,this.setData(null))}setData(t){if(!this._context||!this._context.gl)return;const i=this._context.gl;this._glName||(this._glName=i.createTexture()),void 0===t&&(t=null),null===t&&(this._descriptor.width=this._descriptor.width||s,this._descriptor.height=this._descriptor.height||s);const a=this._context.bindTexture(this,r.TEXTURE_UNIT_FOR_UPDATES),p=this._descriptor;r._validateTexture(this._context,p),i.pixelStorei(i.UNPACK_ALIGNMENT,p.unpackAlignment),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,p.flipped?1:0),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p.preMultiplyAlpha?1:0);const n=p.pixelFormat;let h=p.internalFormat?p.internalFormat:n;if(t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement){let e=t.width,a=t.height;t instanceof HTMLVideoElement&&(e=t.videoWidth,a=t.videoHeight),p.width&&p.height,i.texImage2D(i.TEXTURE_2D,0,h,n,p.dataType,t),p.hasMipmap&&this.generateMipmap(),void 0===p.width&&(p.width=e),void 0===p.height&&(p.height=a)}else{null!=p.width&&null!=p.height||console.error(\"Width and height must be specified!\"),i.DEPTH24_STENCIL8&&h===i.DEPTH_STENCIL&&(h=i.DEPTH24_STENCIL8);let a=p.width,s=p.height;if(o(t)){const e=Math.round(Math.log(Math.max(a,s))/Math.LN2)+1;p.hasMipmap=p.hasMipmap&&e===t.levels.length;for(let r=0;;++r){const e=t.levels[Math.min(r,t.levels.length-1)];if(i.compressedTexImage2D(i.TEXTURE_2D,r,h,a,s,0,e),1===a&&1===s||!p.hasMipmap)break;a=Math.max(1,a>>1),s=Math.max(1,s>>1)}}else if(e(t))i.texImage2D(i.TEXTURE_2D,0,h,a,s,0,n,p.dataType,t),p.hasMipmap&&this.generateMipmap();else for(let t=0;i.texImage2D(i.TEXTURE_2D,t,h,a,s,0,n,p.dataType,null),(1!==a||1!==s)&&p.hasMipmap;++t)a=Math.max(1,a>>1),s=Math.max(1,s>>1)}r._applySamplingMode(i,this._descriptor),r._applyWrapMode(i,this._descriptor),r._applyAnisotropicFilteringParameters(this._context,this._descriptor),this._context.bindTexture(a,r.TEXTURE_UNIT_FOR_UPDATES)}updateData(t,e,i,a,s,o){o||console.error(\"An attempt to use uninitialized data!\"),this._glName||console.error(\"An attempt to update uninitialized texture!\");const p=this._context.gl,n=this._descriptor,h=this._context.bindTexture(this,r.TEXTURE_UNIT_FOR_UPDATES);(e<0||i<0||a>n.width||s>n.height||e+a>n.width||i+s>n.height)&&console.error(\"An attempt to update out of bounds of the texture!\"),p.pixelStorei(p.UNPACK_ALIGNMENT,n.unpackAlignment),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,n.flipped?1:0),p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.preMultiplyAlpha?1:0),o instanceof ImageData||o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement?p.texSubImage2D(p.TEXTURE_2D,t,e,i,n.pixelFormat,n.dataType,o):p.texSubImage2D(p.TEXTURE_2D,t,e,i,a,s,n.pixelFormat,n.dataType,o),this._context.bindTexture(h,r.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;t.hasMipmap||(t.hasMipmap=!0,this._samplingModeDirty=!0,r._validateTexture(this._context,t)),9729===t.samplingMode?(this._samplingModeDirty=!0,t.samplingMode=9985):9728===t.samplingMode&&(this._samplingModeDirty=!0,t.samplingMode=9984);const e=this._context.bindTexture(this,r.TEXTURE_UNIT_FOR_UPDATES),i=this._context.gl;i.generateMipmap(i.TEXTURE_2D),this._context.bindTexture(e,r.TEXTURE_UNIT_FOR_UPDATES)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,r._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._context.gl,e=this._descriptor;this._samplingModeDirty&&(r._applySamplingMode(t,e),this._samplingModeDirty=!1),this._wrapModeDirty&&(r._applyWrapMode(t,e),this._wrapModeDirty=!1)}static _validateTexture(e,i){(i.width<0||i.height<0)&&console.error(\"Negative dimension parameters are not allowed!\");const s=t(i.width)&&t(i.height);a(e.gl)||s||(\"number\"==typeof i.wrapMode?33071!==i.wrapMode&&console.error(\"Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!\"):33071===i.wrapMode.s&&33071===i.wrapMode.t||console.error(\"Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!\"),i.hasMipmap&&console.error(\"Mipmapping requires power-of-two textures!\"))}static _applySamplingMode(t,e){let i=e.samplingMode,a=e.samplingMode;9985===i||9987===i?(i=9729,e.hasMipmap||(a=9729)):9984!==i&&9986!==i||(i=9728,e.hasMipmap||(a=9728)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,a)}static _applyWrapMode(t,e){\"number\"==typeof e.wrapMode?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e.wrapMode),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,e.wrapMode)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e.wrapMode.s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,e.wrapMode.t))}static _applyAnisotropicFilteringParameters(t,e){var i;const a=t.capabilities.textureFilterAnisotropic;if(!a)return;const s=t.gl;s.texParameterf(s.TEXTURE_2D,a.TEXTURE_MAX_ANISOTROPY,null!=(i=e.maxAnisotropy)?i:1)}}function o(t){return e(t)&&\"type\"in t&&\"compressed\"===t.type}r.TEXTURE_UNIT_FOR_UPDATES=0;export default r;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nconst r=33984;var e;!function(r){r[r.Texture=0]=\"Texture\",r[r.Buffer=1]=\"Buffer\",r[r.VAO=2]=\"VAO\",r[r.Program=3]=\"Program\",r[r.Framebuffer=4]=\"Framebuffer\",r[r.Renderbuffer=5]=\"Renderbuffer\",r[r.COUNT=6]=\"COUNT\"}(e||(e={}));const f=33306;export{r as BASE_TEXTURE_UNIT,f as DepthStencilAttachment,e as ResourceType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{Program as e}from\"./Program.js\";function n(e){let n=\"\";for(const t in e){const o=e[t];if(\"boolean\"==typeof o)o&&(n+=`#define ${t}\\n`);else if(\"number\"==typeof o)n+=`#define ${t} ${o.toFixed()}\\n`;else if(\"object\"==typeof o){const e=o.options;let r=0;for(const t in e)n+=`#define ${e[t]} ${(r++).toFixed()}\\n`;n+=`#define ${t} ${e[o.value]}\\n`}}return n}function t(n,t,o,r){o=o||{},r=r||\"\";const f=\"function\"==typeof t.shaders?t.shaders(o):t.shaders;return new e(n,r+f.vertexShader,r+f.fragmentShader,t.attributes)}export{t as createProgram,n as glslifyDefineMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction n(n){return window.WebGL2RenderingContext&&n instanceof window.WebGL2RenderingContext}export default n;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{createProgram as r}from\"./programUtils.js\";class t{constructor(r){this._programCacheByTemplate=new Map,this._rctx=r}dispose(){this._programCacheByTemplate.forEach((r=>r.programs.forEach((r=>r.dispose())))),this._programCacheByTemplate=null}getProgram(t,a){return this._programCacheByTemplate.has(t)||this.addProgramTemplate(t,(a=>r(this._rctx,t,a))),this.getProgramTemplateInstance(t,a)}addProgramTemplate(r,t){this._programCacheByTemplate.set(r,{constructor:t,programs:new Map})}getProgramTemplateInstance(r,t){const a=this._programCacheByTemplate.get(r);if(a){const r=t?JSON.stringify(t):\"default\";if(!a.programs.has(r)){const e=a.constructor(t);a.programs.set(r,e)}return a.programs.get(r)}return null}}export default t;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nclass e{constructor(e){this.readFile=e}resolveIncludes(e){return this.resolve(e)}resolve(e,t=new Map){if(t.has(e))return t.get(e);const r=this.read(e);if(!r)throw new Error(`cannot find shader file ${e}`);const s=/^[^\\S\\n]*#include\\s+<(\\S+)>[^\\S\\n]?/gm;let n=s.exec(r);const l=[];for(;null!=n;)l.push({path:n[1],start:n.index,length:n[0].length}),n=s.exec(r);let a=0,h=\"\";return l.forEach((e=>{h+=r.slice(a,e.start),h+=t.has(e.path)?\"\":this.resolve(e.path,t),a=e.start+e.length})),h+=r.slice(a),t.set(e,h),h}read(e){return this.readFile(e)}}export default e;\n"],"sourceRoot":""}