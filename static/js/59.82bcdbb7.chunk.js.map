{"version":3,"sources":["node_modules/@arcgis/core/layers/support/Tilemap.js","node_modules/@arcgis/core/layers/support/TilemapCache.js","node_modules/@arcgis/core/layers/support/serviceTileInfoProperty.js","node_modules/@arcgis/core/layers/support/sublayerUtils.js","node_modules/@arcgis/core/layers/mixins/ArcGISCachedService.js","node_modules/@arcgis/core/layers/support/Sublayer.js","node_modules/@arcgis/core/layers/TileLayer.js","node_modules/@arcgis/core/layers/mixins/ArcGISMapService.js","node_modules/@arcgis/core/layers/mixins/SublayersOwner.js"],"names":["this","location","left","top","width","height","_allAvailability","byteSize","t","i","e","a","l","o","_tileAvailabilityBitSet","length","Math","ceil","n","Uint8Array","r","s","service","request","row","col","h","c","m","d","query","f","type","url","level","tileServers","then","data","catch","details","httpStatus","valid","response","definition","fromJSON","validateJSON","Object","freeze","_updateFromData","Array","isArray","w","T","getLogger","j","super","_handles","_pendingTilemapRequests","_availableLevels","levels","cacheByteSize","_prefetchingEnabled","_tilemapCache","add","watch","_initializeTilemapDefinition","_initializeAvailableLevels","destroy","error","Promise","reject","_tmpTilemapDefinition","_tilemapFromCache","resolve","signal","fromDefinition","put","getAvailability","layer","tileInfo","updateTileInfo","upsampleTile","fetchTilemap","fetchAvailability","fetchAvailabilityUpsample","_fetchAvailabilityUpsamplePrefetch","id","has","abort","remove","v","p","_prefetches","_maxPrefetch","push","removeUnordered","parsedUrl","clear","path","size","get","forEach","hasTilemap","initialSize","constructOnly","Number","prototype","readOnly","json","origins","read","source","reader","minScale","maxScale","minLOD","maxLOD","ignoreMinMaxLOD","lods","filter","round","scale","flatten","sublayers","some","originIdOf","mapLayerId","gdbVersion","slice","reverse","toArray","map","layerDefinition","arguments","copyright","spatialReference","tilemapCache","version","capabilities","indexOf","V","k","C","origin","ignoreOrigin","allowNull","enabled","writeSublayerStructure","A","_isOverridden","q","U","$","J","R","Set","B","fields","fullExtent","globalIdField","legendEnabled","objectIdField","popupEnabled","popupTemplate","sourceJSON","title","typeIdField","types","addResolvingPromise","sublayer","responseType","fetchSublayerInfo","toLowerCase","split","trim","exportMap","supportsModification","canModifyLayer","operations","supportsQuery","_setAndNotifyLayer","name","_get","_set","_logLockedError","drawingInfo","labelingInfo","write","transparency","parent","parentLayerId","createPopupTemplate","getSymbols","warn","_handleSublayersChange","ofType","find","_lastParsedUrl","JSON","stringify","_override","_clearOverride","getAtOrigin","store","clone","commitProperty","returnGeometry","where","definitionExpression","hasOwnProperty","default","layerId","dynamicDataSource","refreshInterval","labelsVisible","visible","opacity","renderer","customParameters","attributes","toString","feature","getFeatureType","domains","_getLayerDomain","createQuery","load","executeQuery","all","from","token","apiKey","y","features","sourceLayer","toJSON","reduce","keys","showLabels","_assignDefaultSymbolColors","_forEachSimpleMarkerSymbols","color","style","outline","uniqueValueInfos","classBreakInfos","symbol","defaultSymbol","getDefaultOrigin","loadStatus","emit","propertyName","target","handles","removeAll","on","item","preventDefault","reason","fieldsIndex","domain","test","isMapImageLayerOverridePolicy","isTileImageLayerOverridePolicy","String","value","overridePolicy","Boolean","disablePopup","key","base","typeMap","Q","I","M","listMode","isReference","operationalLayerType","resampling","loadFromPortal","supportedTypes","_fetchService","_getDefaultAttribution","_getMapName","loaded","layers","_getDefaultTileServers","timestamp","getTileUrl","_ts","supportsBlankTile","blankTile","bandCount","pixelSizeX","serverType","ssl","replace","_fetchServerVersion","currentVersion","match","search","fetchTile","__isDefault__","supportsExportMap","supportsExportTiles","supportsTileMap","exportTiles","exportTilesAllowed","supportsDynamicLayers","u","cimVersion","parse","since","supportsArcadeExpressionForLabeling","supportsSublayersChanges","supportsSublayerVisibility","supportsSublayerDefinitionExpression","maxExportTilesCount","fetchAllLayersAndTables","_allLayersAndTablesMap","_allLayersAndTablesPromise","Map","set","result","b","allSublayers","getCollections","getChildrenFunction","sublayersSourceJSON","2","3","4","5","context","visibleLayers","createSublayersForOrigin","setDefaultOrigin","unshift","S","defaultVisibility","items","readSublayers"],"mappings":"+RAIkK,MAAM,EAAE,cAAcA,KAAKC,SAAS,CAACC,KAAK,EAAEC,IAAI,EAAEC,MAAM,EAAEC,OAAO,GAAGL,KAAKM,iBAAiB,UAAUN,KAAKO,SAAS,GAAG,gBAAgBC,EAAEC,GAAG,GAAG,YAAYT,KAAKM,iBAAiB,OAAON,KAAKM,iBAAiB,MAAMI,GAAGF,EAAER,KAAKC,SAASE,KAAKH,KAAKC,SAASG,OAAOK,EAAET,KAAKC,SAASC,MAAMS,EAAED,EAAE,EAAEE,EAAEF,GAAG,EAAEG,EAAEb,KAAKc,wBAAwB,OAAOF,EAAE,GAAGA,EAAEC,EAAEE,OAAO,UAAUF,EAAED,GAAG,GAAGD,EAAE,YAAY,cAAc,gBAAgBH,GAAG,MAAMC,EAAET,KAAKC,SAASG,MAAMM,EAAEV,KAAKC,SAASI,OAAO,IAAIM,GAAE,EAAGC,GAAE,EAAG,MAAMC,EAAEG,KAAKC,KAAKR,EAAEC,EAAE,GAAGQ,EAAE,IAAIC,WAAWN,GAAG,IAAIO,EAAE,EAAE,IAAI,IAAIC,EAAE,EAAEA,EAAEb,EAAEO,OAAOM,IAAI,CAAC,MAAMZ,EAAEY,EAAE,EAAEb,EAAEa,IAAIT,GAAE,EAAGM,EAAEE,IAAI,GAAGX,GAAGE,GAAE,EAAG,IAAIF,KAAKW,EAAER,EAAEZ,KAAKM,iBAAiB,cAAcK,EAAEX,KAAKM,iBAAiB,aAAaN,KAAKM,iBAAiB,UAAUN,KAAKc,wBAAwBI,EAAElB,KAAKO,UAAUW,EAAEH,QAAQ,sBAAsBJ,EAAEE,GAAG,MAAMO,EAAET,EAAEW,QAAQC,SAAS,WAAGC,IAAIH,EAAEI,IAAIC,EAAEtB,MAAMuB,EAAEtB,OAAOuB,GAAGjB,EAAEkB,EAAE,CAACC,MAAM,CAACC,EAAE,SAAS,OAAOlB,EAAEA,EAAE,IAAIgB,KAAKhB,GAAGgB,EAAET,EAAksC,SAAWZ,GAAG,IAAIC,EAAE,GAAG,gBAAgBD,EAAEc,QAAQU,KAAKvB,EAAE,GAAGD,EAAEc,QAAQW,eAAezB,EAAE0B,SAAS1B,EAAEgB,OAAOhB,EAAEiB,OAAOjB,EAAEJ,SAASI,EAAEH,aAAa,CAAC,MAAMK,EAAEF,EAAEc,QAAQa,YAAY1B,EAAE,GAAGC,GAAGA,EAAEK,OAAOL,EAAEF,EAAEgB,IAAId,EAAEK,QAAQP,EAAEc,QAAQW,eAAezB,EAAE0B,SAAS1B,EAAEgB,OAAOhB,EAAEiB,OAAOjB,EAAEJ,SAASI,EAAEH,SAAS,MAAMK,EAAEF,EAAEc,QAAQQ,MAAM,OAAOpB,IAAID,EAAE,GAAGA,KAAKC,KAAKD,EAA3gD,CAAEE,GAAGE,GAAGuB,KAAM5B,GAAGA,EAAE6B,MAAOC,MAAO9B,IAAI,GAAGA,GAAGA,EAAE+B,SAAS,MAAM/B,EAAE+B,QAAQC,WAAW,MAAM,CAACvC,SAAS,CAACE,IAAIkB,EAAEnB,KAAKwB,EAAEtB,MAAMuB,EAAEtB,OAAOuB,GAAGa,OAAM,EAAGJ,KAAK,YAAEV,EAAEC,EAAE,IAAI,MAAMpB,IAAK4B,KAAM5B,IAAI,GAAGA,EAAEP,WAAWO,EAAEP,SAASE,MAAMkB,GAAGb,EAAEP,SAASC,OAAOwB,GAAGlB,EAAEP,SAASG,QAAQuB,GAAGnB,EAAEP,SAASI,SAASuB,GAAG,MAAM,IAAI,IAAE,4BAA4B,yDAAyD,CAACc,SAASlC,EAAEmC,WAAW,CAACxC,IAAIkB,EAAEnB,KAAKwB,EAAEtB,MAAMuB,EAAEtB,OAAOuB,KAAK,OAAO,EAAEgB,SAASpC,KAAM,gBAAgBA,GAAG,EAAEqC,aAAarC,GAAG,MAAMC,EAAE,IAAI,EAAE,OAAOA,EAAER,SAAS6C,OAAOC,OAAO,YAAEvC,EAAEP,WAAWQ,EAAEuC,gBAAgBxC,EAAE6B,MAAMS,OAAOC,OAAOtC,GAAG,oBAAoBD,GAAG,IAAIA,IAAIA,EAAEP,SAAS,MAAM,IAAI,IAAE,2BAA2B,0CAA0C,IAAG,IAAKO,EAAEiC,MAAM,MAAM,IAAI,IAAE,kBAAkB,0CAA0C,IAAIjC,EAAE6B,KAAK,MAAM,IAAI,IAAE,uBAAuB,sCAAsC,IAAIY,MAAMC,QAAQ1C,EAAE6B,MAAM,MAAM,IAAI,IAAE,wBAAwB,oCAAoC,GAAG7B,EAAE6B,KAAKtB,SAASP,EAAEP,SAASG,MAAMI,EAAEP,SAASI,OAAO,MAAM,IAAI,IAAE,wBAAwB,gEAAgE,SAAS,EAAEG,GAAG,MAAM,GAAGA,EAAE0B,SAAS1B,EAAEgB,OAAOhB,EAAEiB,OAAOjB,EAAEJ,SAASI,EAAEH,SAAqW,ICAzrD8C,EAAE,MAAMC,EAAE,IAAEC,UAAU,oCAAoC,IAAIC,EAAEH,EAAE,cAAc,IAAE,YAAYzC,GAAG6C,MAAM7C,GAAGV,KAAKwD,SAAS,IAAI,IAAExD,KAAKyD,wBAAwB,GAAGzD,KAAK0D,iBAAiB,GAAG1D,KAAK2D,OAAO,EAAE3D,KAAK4D,cAAc,QAAQ5D,KAAKuB,QAAQ,UAAEvB,KAAK6D,qBAAoB,EAAG,aAAa7D,KAAK8D,cAAc,IAAI,IAAE9D,KAAK4D,eAAe5D,KAAKwD,SAASO,IAAI,CAAC/D,KAAKgE,MAAM,CAAC,kBAAkB,sBAAsB,IAAKhE,KAAKiE,gCAAiC,YAAEjE,KAAK,sBAAuBU,GAAGV,KAAKkE,2BAA2BxD,IAAI,KAAMV,KAAKiE,+BAA+B,UAAUjE,KAAKwD,WAAWxD,KAAKwD,SAASW,UAAUnE,KAAKwD,SAAS,MAAM,WAAW9C,GAAG,OAAOA,GAAG,GAAG0C,EAAEgB,MAAM,4CAA4C1D,GAAG,GAAGA,EAAE,WAAW,OAAO,GAAGV,KAAK2D,OAAO,aAAajD,EAAEF,EAAEC,EAAEW,GAAG,IAAIpB,KAAK0D,iBAAiBhD,GAAG,OAAO2D,QAAQC,OAAO,IAAI,IAAE,kCAAkC,SAAS5D,oCAAoC,MAAMW,EAAErB,KAAKuE,sBAAsB5D,EAAEX,KAAKwE,kBAAkB9D,EAAEF,EAAEC,EAAEY,GAAG,GAAGV,EAAE,OAAO0D,QAAQI,QAAQ9D,GAAG,MAAME,EAAEO,GAAGA,EAAEsD,OAAO,OAAOtD,EAAE,IAAIA,EAAEsD,OAAO,MAAM,IAAIL,QAAQ,CAAE3D,EAAEF,KAAK,YAAEK,EAAE,IAAKL,EAAE,gBAAO,MAAMC,EAAE,EAAEY,GAAG,IAAIT,EAAEZ,KAAKyD,wBAAwBhD,GAAG,IAAIG,EAAE,CAACA,EAAE,EAAE+D,eAAetD,EAAED,GAAGgB,KAAM1B,IAAIV,KAAK8D,cAAcc,IAAInE,EAAEC,EAAEA,EAAEH,UAAUG,IAAK,MAAMA,EAAE,WAAWV,KAAKyD,wBAAwBhD,GAAGT,KAAKyD,wBAAwBhD,GAAGG,EAAEA,EAAEwB,KAAK1B,EAAEA,GAAGE,EAAEwB,KAAK1B,EAAEF,KAAM,gBAAgBE,EAAEF,EAAEC,GAAG,IAAIT,KAAK0D,iBAAiBhD,GAAG,MAAM,cAAc,MAAME,EAAEZ,KAAKwE,kBAAkB9D,EAAEF,EAAEC,EAAET,KAAKuE,uBAAuB,OAAO3D,EAAEA,EAAEiE,gBAAgBrE,EAAEC,GAAG,UAAU,wBAAwBC,EAAEF,EAAEC,EAAEG,GAAGA,EAAEsB,MAAMxB,EAAEE,EAAEY,IAAIhB,EAAEI,EAAEa,IAAIhB,EAAE,MAAMW,EAAEpB,KAAK8E,MAAMC,SAAS,IAAI3D,EAAE4D,eAAepE,KAAK,CAAC,MAAMF,EAAEV,KAAK6E,gBAAgBjE,EAAEsB,MAAMtB,EAAEY,IAAIZ,EAAEa,KAAK,GAAG,gBAAgBf,EAAE,OAAOA,EAAE,IAAIU,EAAE6D,aAAarE,GAAG,MAAM,eAAe,kBAAkBF,EAAEF,EAAEC,EAAEW,GAAG,OAAOpB,KAAK0D,iBAAiBhD,GAAGV,KAAKkF,aAAaxE,EAAEF,EAAEC,EAAEW,GAAGkB,MAAO5B,GAAGA,GAAI0B,KAAMhB,IAAI,GAAGA,aAAa,EAAE,CAAC,MAAMC,EAAED,EAAEyD,gBAAgBrE,EAAEC,GAAG,MAAM,gBAAgBY,EAAEgD,QAAQC,OAAO,IAAI,IAAE,4BAA4B,wBAAwB,CAACpC,MAAMxB,EAAEc,IAAIhB,EAAEiB,IAAIhB,KAAKY,EAAE,GAAG,YAAED,GAAG,MAAMA,EAAE,MAAM,YAAaiD,QAAQC,OAAO,IAAI,IAAE,kCAAkC,SAAS5D,oCAAoC,0BAA0BA,EAAEF,EAAEC,EAAEG,EAAEQ,GAAGR,EAAEsB,MAAMxB,EAAEE,EAAEY,IAAIhB,EAAEI,EAAEa,IAAIhB,EAAE,MAAMY,EAAErB,KAAK8E,MAAMC,SAAS1D,EAAE2D,eAAepE,GAAG,MAAMD,EAAEX,KAAKmF,kBAAkBzE,EAAEF,EAAEC,EAAEW,GAAGkB,MAAO5B,IAAI,GAAG,YAAEA,GAAG,MAAMA,EAAE,GAAGW,EAAE4D,aAAarE,GAAG,OAAOZ,KAAKoF,0BAA0BxE,EAAEsB,MAAMtB,EAAEY,IAAIZ,EAAEa,IAAIb,GAAG,MAAMF,IAAK,OAAOV,KAAKqF,mCAAmCzE,EAAE0E,GAAG5E,EAAEF,EAAEC,EAAEW,EAAET,GAAGA,EAAE,yCAAyCD,EAAEF,EAAEC,EAAEG,EAAEQ,EAAEC,GAAG,IAAIrB,KAAK6D,oBAAoB,OAAO,MAAMlD,EAAE,YAAYD,EAAI,GAAGV,KAAKwD,SAAS+B,IAAI5E,GAAG,OAAO,MAAME,EAAE,cAAIQ,EAAEe,KAAK,IAAKvB,EAAE2E,QAAS,IAAK3E,EAAE2E,SAAU,IAAItE,GAAE,EAAG,MAAMS,EAAE,CAAC,SAAST,IAAIA,GAAE,EAAGL,EAAE2E,WAAW,GAAGxF,KAAKwD,SAASO,IAAIpC,EAAEhB,SAAS,YAAE,GAAGE,EAAE6D,QAAQpC,MAAM,QAAUpB,IAAIA,GAAE,EAAGlB,KAAKwD,SAASiC,OAAO9E,IAAI,YAAEE,GAAG,OAAO,MAAMa,EAAE,CAAC4D,GAAG5E,EAAEwB,MAAM1B,EAAEgB,IAAIf,EAAEgB,IAAIb,GAAGmB,EAAE,IAAIX,EAAEsD,OAAO7D,EAAE6D,QAAQgB,EAAE1F,KAAK8E,MAAMC,SAAS,IAAI,IAAIY,EAAE,EAAExC,EAAEyC,YAAY7E,OAAOoC,EAAE0C,cAAcH,EAAET,aAAavD,KAAKiE,EAAE,CAAC,MAAMjF,EAAEV,KAAKmF,kBAAkBzD,EAAEQ,MAAMR,EAAEF,IAAIE,EAAED,IAAIM,GAAGoB,EAAEyC,YAAYE,KAAKpF,GAAG,MAAMF,EAAE,KAAK2C,EAAEyC,YAAYG,gBAAgBrF,IAAIA,EAAE0B,KAAK5B,EAAEA,IAAI,+BAA+B,IAAIR,KAAK8E,MAAMkB,UAAU,OAAO,MAAMtF,EAAEV,KAAK8E,MAAMkB,UAAUxF,EAAEE,EAAEoB,MAAM9B,KAAK8D,cAAcmC,QAAQjG,KAAKuE,sBAAsB,CAACjD,QAAQ,CAACW,IAAIvB,EAAEwF,KAAKpE,MAAMtB,EAAE,YAAEA,GAAG,KAAK2B,YAAYnC,KAAK8E,MAAM3C,YAAYZ,QAAQvB,KAAKuB,QAAQS,KAAKhC,KAAK8E,MAAM9C,MAAM5B,MAAMJ,KAAKmG,KAAK9F,OAAOL,KAAKmG,KAAKjE,MAAM,EAAEV,IAAI,EAAEC,IAAI,GAAG,kBAAkBf,EAAEF,EAAEC,EAAEG,GAAGA,EAAEsB,MAAMxB,EAAEE,EAAEY,IAAIhB,EAAEA,EAAER,KAAKmG,KAAKvF,EAAEa,IAAIhB,EAAEA,EAAET,KAAKmG,KAAK,MAAM/E,EAAE,EAAER,GAAG,OAAOZ,KAAK8D,cAAcsC,IAAIhF,GAAG,2BAA2BV,GAAGV,KAAK0D,iBAAiB,GAAGhD,GAAGA,EAAE2F,QAAS3F,GAAGV,KAAK0D,iBAAiBhD,EAAEwB,QAAO,GAAK,WAAW,MAAMxB,EAAEV,KAAK,MAAM,CAAC,yBAAyB,OAAOU,EAAEmD,qBAAqB,uBAAuBrD,GAAGE,EAAEmD,oBAAoBrD,GAAG8F,WAAW,CAAC9F,EAAEC,EAAEG,MAAMF,EAAE8D,kBAAkBhE,EAAEC,EAAEG,EAAEF,EAAE6D,0BAA0BjB,EAAEuC,aAAa,EAAEvC,EAAEsC,YAAY,IAAI,IAAE,CAACW,YAAYpD,EAAE0C,eAAe,YAAE,CAAC,YAAE,CAACW,eAAc,EAAGxE,KAAKyE,UAAUnD,EAAEoD,UAAU,cAAS,GAAQ,YAAE,CAAC,YAAE,WAAWpD,EAAEoD,UAAU,aAAa,MAAM,YAAE,CAAC,YAAE,CAACC,UAAS,EAAG3E,KAAKyE,UAAUnD,EAAEoD,UAAU,OAAO,MAAM,YAAE,CAAC,YAAE,CAACF,eAAc,EAAGxE,KAAKyE,UAAUnD,EAAEoD,UAAU,qBAAgB,GAAQ,YAAE,CAAC,YAAE,CAACF,eAAc,KAAMlD,EAAEoD,UAAU,aAAQ,GAAQ,YAAE,CAAC,YAAE,CAACF,eAAc,KAAMlD,EAAEoD,UAAU,eAAU,GAAQpD,EAAEH,EAAE,YAAE,CAAC,YAAE,qCAAqCG,I,iCCJnrK,iFAI6B,MAAMlC,EAAE,CAACY,KAAK,IAAE4E,KAAK,CAACC,QAAQ,CAACvF,QAAQ,CAACwF,KAAK,CAACC,OAAO,CAAC,WAAW,WAAW,WAAW,SAAS,UAAUC,OAAO9F,OAAO,SAASA,EAAEE,EAAEF,EAAEN,EAAEC,GAAG,IAAIO,EAAE,OAAO,KAAK,MAAM6F,SAASxG,EAAEyG,SAAS1G,EAAE2G,OAAOvF,EAAEwF,OAAO/F,GAAGH,EAAE,GAAG,MAAMU,GAAG,MAAMP,EAAE,OAAOR,GAAGA,EAAEwG,gBAAgB,IAAEzE,SAASxB,GAAG,IAAEwB,SAAS,IAAIxB,EAAEkG,KAAKlG,EAAEkG,KAAKC,OAAO,EAAGrF,MAAMxB,KAAK,MAAMA,GAAGA,GAAGkB,GAAGlB,GAAGW,KAAM,GAAG,IAAIZ,GAAG,IAAID,EAAE,CAAC,MAAMU,EAAER,GAAGM,KAAKwG,MAAM,IAAI9G,GAAG,IAAIE,EAAEH,EAAES,EAAET,GAAG,IAAII,EAAEL,EAAEU,EAAEV,IAAG,IAAK,OAAO,IAAEoC,SAAS,IAAIxB,EAAEkG,KAAKlG,EAAEkG,KAAKC,OAAQ7G,IAAI,MAAMU,EAAEF,EAAER,EAAE+G,OAAO,OAAOrG,GAAGR,GAAGQ,GAAGP,MAAO,OAAO,IAAE+B,SAASxB,K,iCCA7iB,SAASV,EAAEA,EAAEQ,EAAET,GAAG,OAAGS,EAAEwG,QAAQ,EAAGC,UAAUjH,KAAKA,GAAIK,SAASL,EAAEK,WAAwBL,EAAEkH,KAAMlH,GAAGA,EAAEmH,WAAW,YAAYpH,GAAGC,EAAEmH,WAAW,YAAYpH,GAAGC,EAAEmH,WAAW,YAAYpH,GAAGC,EAAEmH,WAAW,gBAAgBpH,GAAGC,EAAEmH,WAAW,WAAWpH,GAAGC,EAAEmH,WAAW,iBAAiBpH,GAAGC,EAAEmH,WAAW,UAAUpH,KAAMW,EAAEV,EAAEQ,IAAG,SAASA,EAAER,EAAEQ,EAAET,GAAG,QAAQC,EAAEkH,KAAMlH,IAAI,MAAMQ,EAAER,EAAEqG,OAAO,SAAS7F,GAAG,cAAcA,EAAEc,MAAMd,EAAE4G,aAAapH,EAAE4E,MAAMpE,EAAE6G,YAAY7G,EAAE6G,aAAatH,EAAEsH,cAAcrH,EAAEmH,WAAW,YAAY,GAAGnH,EAAEmH,WAAW,gBAAgB,GAAGnH,EAAEmH,WAAW,WAAW,GAAGnH,EAAEmH,WAAW,iBAAiB,MAAOzG,EAAEV,EAAEQ,GAAG,SAASE,EAAEV,EAAEQ,GAAG,IAAIR,IAAIA,EAAEK,OAAO,OAAM,EAAG,MAAMK,EAAEF,EAAE8G,QAAQC,UAAUP,QAAQ,EAAGC,UAAUjH,KAAKA,GAAGA,EAAEwH,UAAUD,WAAYE,IAAKzH,GAAGA,EAAE4E,IAAK4C,UAAU,GAAGxH,EAAEK,OAAOK,EAAEL,OAAO,OAAM,EAAG,IAAIN,EAAE,EAAE,MAAMI,EAAEO,EAAEL,OAAO,IAAI,MAAMuE,GAAG9E,KAAKE,EAAE,CAAC,KAAKD,EAAEI,GAAGO,EAAEX,KAAKD,GAAGC,IAAI,GAAGA,GAAGI,EAAE,OAAM,EAAG,OAAM,EAAG,SAASJ,EAAEC,GAAG,QAAQA,GAAGA,EAAEkH,KAAMlH,GAAG,MAAMA,EAAEuG,UAAUvG,EAAE0H,iBAAiB,MAAM1H,EAAE0H,gBAAgBnB,UAJ18B,uG,iCCAA,qIAI+kB,MAAM5F,EAAEA,IAAI,IAAIT,EAAE,cAAcS,EAAE,cAAckC,SAAS8E,WAAWrI,KAAKsI,UAAU,KAAKtI,KAAKiH,SAAS,EAAEjH,KAAKkH,SAAS,EAAElH,KAAKuI,iBAAiB,KAAKvI,KAAK+E,SAAS,KAAK/E,KAAKwI,aAAa,KAAK,aAAa9H,EAAEU,GAAG,OAAO,MAAMA,EAAE+F,QAAQ,MAAM/F,EAAEgG,OAAO1G,EAAE,EAAE,aAAaA,EAAEU,GAAG,OAAO,MAAMA,EAAE+F,QAAQ,MAAM/F,EAAEgG,OAAO1G,EAAE,EAAE,wBAAwB,OAAOV,KAAKyI,SAAS,KAAK,iBAAiB/H,EAAEU,GAAG,OAAOA,EAAEsH,cAActH,EAAEsH,aAAaC,QAAQ,YAAY,EAAE,IAAI,IAAE,CAAC7D,MAAM9E,OAAO,OAAO,OAAO,YAAE,CAAC,YAAE,CAAC4G,KAAK,CAACE,KAAK,CAACC,OAAO,qBAAqBnG,EAAE8F,UAAU,iBAAY,GAAQ,YAAE,CAAC,eAAK9F,EAAE8F,UAAU,gBAAW,GAAQ,YAAE,CAAC,YAAE,UAAU,aAAa9F,EAAE8F,UAAU,eAAe,MAAM,YAAE,CAAC,eAAK9F,EAAE8F,UAAU,gBAAW,GAAQ,YAAE,CAAC,YAAE,UAAU,aAAa9F,EAAE8F,UAAU,eAAe,MAAM,YAAE,CAAC,YAAE,CAAC1E,KAAK,OAAKpB,EAAE8F,UAAU,wBAAmB,GAAQ,YAAE,CAAC,YAAE,CAACC,UAAS,KAAM/F,EAAE8F,UAAU,oBAAoB,MAAM,YAAE,CAAC,YAAE,MAAI9F,EAAE8F,UAAU,gBAAW,GAAQ,YAAE,CAAC,eAAK9F,EAAE8F,UAAU,oBAAe,GAAQ,YAAE,CAAC,YAAE,UAAU,eAAe,CAAC,kBAAkB9F,EAAE8F,UAAU,mBAAmB,MAAM,YAAE,CAAC,eAAK9F,EAAE8F,UAAU,eAAU,GAAQ9F,EAAE,YAAE,CAAC,YAAE,2CAA2CA,GAAGA,I,iCCJtrD,IAIilEgI,EAJjlE,mWAImlE,SAASC,EAAEnI,GAAG,OAAOA,GAAG,YAAYA,EAAEsB,KAAK,SAAS8G,EAAEpI,EAAEU,EAAEX,GAAG,IAAID,EAAE,MAAMK,EAAEb,KAAK6H,WAAWzG,IAAI,YAAEX,EAAEsI,QAAQ,MAAM,CAACC,cAAa,EAAGC,UAAUpI,EAAEqI,UAAUzI,GAAI,eAAe,OAAOD,EAAEC,EAAEqE,YAAO,EAAOtE,EAAEwB,QAAQvB,EAAE0I,wBAAwBtI,IAAK,SAASuI,EAAE1I,EAAEU,EAAEX,GAAG,IAAID,EAAE,MAAM,CAAC0I,UAAUzI,GAAI,UAAU,OAAOD,EAAEC,EAAEqE,YAAO,EAAOtE,EAAEwB,OAAOhC,KAAKqJ,cAAcjI,IAAK,SAASkI,EAAE5I,EAAEU,EAAEX,GAAG,MAAM,CAACuI,cAAa,EAAGE,QAAQzI,GAAGA,EAAE0I,yBAAwB,GAAI,SAASI,EAAE7I,EAAEU,EAAEX,GAAG,MAAM,CAACuI,cAAa,EAAGE,UAAUzI,IAAIA,EAAE0I,wBAAwBnJ,KAAK6H,WAAWzG,IAAI,YAAEX,EAAEsI,UAAU,MAAMS,EAAE,IAAEnG,UAAU,gCAAgC,IAAIoG,EAAE,EAAE,MAAMC,EAAE,IAAIC,IAAID,EAAE3F,IAAI,SAAS2F,EAAE3F,IAAI,UAAU2F,EAAE3F,IAAI,UAAU2F,EAAE3F,IAAI,cAAc2F,EAAE3F,IAAI,aAAa2F,EAAE3F,IAAI,gBAAgB,IAAI6F,EAAEhB,EAAE,cAAc,WAAD,CAAG,YAAE,YAAE,QAAM,YAAYlI,GAAG6C,MAAM7C,GAAGV,KAAK0I,kBAAa,EAAO1I,KAAK6J,OAAO,KAAK7J,KAAK8J,WAAW,KAAK9J,KAAK+J,cAAc,KAAK/J,KAAKgK,eAAc,EAAGhK,KAAKiK,cAAc,KAAKjK,KAAKkK,cAAa,EAAGlK,KAAKmK,cAAc,KAAKnK,KAAKoK,WAAW,KAAKpK,KAAKqK,MAAM,KAAKrK,KAAKsK,YAAY,KAAKtK,KAAKuK,MAAM,KAAK,WAAW7J,GAAG,OAAOV,KAAKwK,oBAAoB,WAAW,IAAIpJ,EAAE,IAAIpB,KAAK8E,QAAQ9E,KAAKiC,IAAI,MAAM,IAAI,IAAE,yBAAyB,yDAAyD,CAACwI,SAASzK,OAAO,IAAIS,EAAE,KAAK,IAAIT,KAAK8E,OAAO9E,KAAK6H,WAAW,OAAO,GAAG,gBAAgB,OAAOzG,EAAEpB,KAAK+G,aAAQ,EAAO3F,EAAEY,MAAOvB,SAAS,kBAAET,KAAKiC,IAAI,CAACyI,aAAa,OAAO5I,MAAM,CAACC,EAAE,WAAWrB,KAAK2B,SAAS,CAAC,IAAI7B,EAAE,IAAIY,EAAEpB,KAAKsF,GAAG,eAAe,OAAO9E,EAAER,KAAK+G,aAAQ,EAAOvG,EAAEwB,QAAQZ,EAAEpB,KAAK+G,OAAOe,YAAYrH,QAAQT,KAAK8E,MAAM6F,kBAAkBvJ,EAAEV,GAAGD,IAAIT,KAAKoK,WAAW3J,EAAET,KAAK8G,KAAK,CAACsB,gBAAgB3H,GAAG,CAACsI,OAAO,cAA3hB,IAA6iB/I,KAAK,iBAAiBU,EAAEU,GAAG,MAAMX,GAAGC,GAAGU,EAAEA,EAAEgH,iBAAiBhH,GAAGsH,cAAchI,GAAGA,EAAEkK,cAAcC,MAAM,KAAK1C,IAAKzH,GAAGA,EAAEoK,QAAS,GAAG,MAAM,CAACC,UAAU,CAACC,uBAAuB5J,EAAE6J,gBAAgBC,WAAW,CAACC,eAAe,IAAI1K,EAAEkI,QAAQ,WAAW,yBAAyBjI,GAAGV,KAAKoL,mBAAmB,uBAAuB1K,GAAG,kBAAkB,OAAO,IAAI,IAAEV,KAAK6J,QAAQ,IAAI,6BAA6BnJ,EAAEU,GAAG,IAAIA,EAAEA,EAAEgH,iBAAiBhH,GAAG2I,cAAc,OAAO3I,EAAE2I,cAAc,GAAG3I,EAAEyI,OAAO,IAAI,MAAMpJ,KAAKW,EAAEyI,OAAO,GAAG,0BAA0BpJ,EAAEuB,KAAK,OAAOvB,EAAE4K,KAAK,SAAS,MAAM3K,EAAEV,KAAKsL,KAAK,MAAM,OAAO,MAAM5K,EAAE+I,IAAI/I,EAAE,OAAOA,GAAGV,KAAKsL,KAAK,QAAQ5K,KAAI,IAAKV,KAAKoG,IAAI,sDAAsDpG,KAAKuL,KAAK,KAAK7K,GAAGV,KAAKwL,gBAAgB,KAAK,kFAAkF,iBAAiB9K,GAAGV,KAAKoL,mBAAmB,eAAe1K,GAAG,kBAAkBA,EAAEU,EAAEX,EAAED,GAAGE,GAAGA,EAAEK,SAASK,EAAEgH,gBAAgB,CAACqD,YAAY,CAACC,aAAahL,EAAEyH,IAAKzH,GAAGA,EAAEiL,MAAM,GAAGnL,OAAQ,kBAAkBE,GAAGV,KAAKoL,mBAAmB,gBAAgB1K,GAAG,UAAUA,GAAGV,KAAKuL,KAAK,QAAQ7K,GAAGV,KAAK2H,WAAW3H,KAAK2H,UAAUtB,QAASjF,GAAGA,EAAE0D,MAAMpE,GAAI,aAAaA,GAAGV,KAAKuL,KAAK,WAAW7K,GAAG,aAAaA,GAAGV,KAAKoL,mBAAmB,WAAW1K,GAAG,aAAaA,EAAEU,GAAG,OAAOA,EAAE6F,UAAU7F,EAAEgH,iBAAiBhH,EAAEgH,gBAAgBnB,UAAU,EAAE,aAAavG,GAAGV,KAAKoL,mBAAmB,WAAW1K,GAAG,aAAaA,EAAEU,GAAG,OAAOA,EAAE8F,UAAU9F,EAAEgH,iBAAiBhH,EAAEgH,gBAAgBlB,UAAU,EAAE,6BAA6BxG,EAAEU,GAAG,IAAIA,EAAEA,EAAEgH,iBAAiBhH,GAAG6I,cAAc,OAAO7I,EAAE6I,cAAc,GAAG7I,EAAEyI,OAAO,IAAI,MAAMpJ,KAAKW,EAAEyI,OAAO,GAAG,qBAAqBpJ,EAAEuB,KAAK,OAAOvB,EAAE4K,KAAK,YAAY3K,GAAGV,KAAKoL,mBAAmB,UAAU1K,GAAG,YAAYA,EAAEU,GAAG,MAAMX,EAAEW,EAAEgH,gBAAgB,OAAO,EAAE,KAAK,MAAM3H,EAAEmL,aAAanL,EAAEmL,aAAanL,EAAEgL,YAAYG,cAAc,aAAalL,EAAEU,EAAEX,EAAED,GAAGY,EAAEgH,gBAAgB,CAACqD,YAAY,CAACG,aAAa,IAAI,IAAIlL,IAAI,YAAYA,EAAEU,GAAGpB,KAAK6L,QAAQ7L,KAAK6L,SAAS7L,KAAK8E,MAAM1D,EAAE0K,cAAc,YAAE9L,KAAK6L,OAAOvG,IAAIlE,EAAE0K,eAAe,EAAE,2BAA2B,OAAO9L,KAAK+L,sBAAsB,aAAarL,GAAG,GAAGA,EAAE,IAAI,MAAMU,KAAKV,EAAEsL,aAAa,GAAG,YAAE5K,GAAG,CAACoI,EAAEyC,KAAK,2CAA2C,MAAMjM,KAAKoL,mBAAmB,WAAW1K,GAAG,aAAa,OAAOV,KAAKsL,KAAK,WAAW,IAAI,IAAE,CAACxD,WAAW9H,KAAKsF,KAAK,WAAW5E,GAAGV,KAAKoL,mBAAmB,SAAS1K,GAAG,cAAcA,GAAGV,KAAKkM,uBAAuBxL,EAAEV,KAAKsL,KAAK,cAActL,KAAKuL,KAAK,YAAY7K,GAAG,cAAcA,GAAG,OAAO,YAAE,IAAEyL,OAAOvD,GAAGlI,GAAG,eAAeA,EAAEU,EAAEX,GAAGT,KAAKoG,IAAI,sBAAsBhF,EAAEX,GAAGT,KAAK2H,UAAUQ,IAAKzH,GAAGA,EAAE4E,IAAK4C,UAAUD,WAAW,gBAAgBvH,EAAEU,GAAG,IAAIX,GAAGW,EAAEA,EAAEgH,iBAAiBhH,GAAGkJ,YAAY,GAAG7J,GAAGW,EAAEyI,OAAO,CAACpJ,EAAEA,EAAEmK,cAAc,MAAMlK,EAAEU,EAAEyI,OAAOuC,KAAM1L,GAAGA,EAAE2K,KAAKT,gBAAgBnK,GAAIC,IAAID,EAAEC,EAAE2K,MAAM,OAAO,KAAK,UAAU,IAAI3K,EAAEU,EAAE,MAAMX,EAAE,OAAOC,EAAE,OAAOU,EAAEpB,KAAK8E,YAAO,EAAO1D,EAAE4E,WAAWtF,EAAEV,KAAKqM,eAAe7L,EAAER,KAAK+G,OAAO,IAAItG,EAAE,OAAO,KAAK,GAAGT,KAAKqM,eAAe5L,EAAE,eAAe,MAAMD,OAAE,EAAOA,EAAEwB,MAAM,MAAM,GAAGvB,EAAEyF,QAAQ1F,EAAEsH,aAAa,MAAMjH,EAAE,CAACiE,MAAMwH,KAAKC,UAAU,CAACxF,OAAO/G,KAAK+G,UAAU,MAAM,GAAGtG,EAAEyF,qBAAqB,YAAErF,KAAK,QAAQH,GAAGA,EAAEV,KAAKwM,UAAU,MAAM9L,GAAGV,KAAKyM,eAAe,OAAO,YAAY/L,GAAGV,KAAKoL,mBAAmB,UAAU1K,GAAG,aAAaA,EAAEU,EAAEX,EAAED,GAAGY,EAAEX,GAAGT,KAAK0M,YAAY,oBAAoB,YAAYhM,EAAE,QAAQ,MAAMiM,MAAMjM,GAAG,YAAEV,MAAMoB,EAAE,IAAIwH,EAAE,OAAO,YAAExH,GAAGuL,MAAMjM,EAAEkM,MAAMlD,GAAG1J,KAAK6M,eAAe,OAAOzL,EAAEiL,eAAerM,KAAKqM,eAAejL,EAAE,oBAAoBV,GAAG,OAAO,YAAEV,KAAKU,GAAG,cAAc,OAAO,IAAI,IAAE,CAACoM,gBAAe,EAAGC,MAAM/M,KAAKgN,sBAAsB,QAAQ,2BAA2B,IAAItM,EAAEU,EAAE,GAAGpB,KAAKiN,eAAe,aAAa,OAAO,KAAK,MAAMxM,EAAE,OAAOC,EAAEV,KAAK8E,YAAO,EAAOpE,EAAEsF,UAAUxF,EAAE,IAAG,SAAU,0CAA8B0M,SAAS,CAACjL,IAAIxB,EAAEyF,OAAO,OAAOzF,GAAGT,KAAK+G,SAAS,cAAc/G,KAAK+G,OAAO/E,KAAKxB,EAAE2M,QAAQnN,KAAK+G,OAAOe,WAAWtH,EAAE4M,kBAAkBpN,KAAK+G,QAAQ,MAAM/G,KAAK8E,MAAMuI,kBAAkB7M,EAAE6M,gBAAgBrN,KAAK8E,MAAMuI,iBAAiBrN,KAAKgN,uBAAuBxM,EAAEwM,qBAAqBhN,KAAKgN,sBAAsBhN,KAAK6H,WAAW,gBAAgB,IAAIrH,EAAEkL,aAAa,YAAE1L,KAAK0L,eAAe1L,KAAK6H,WAAW,iBAAiB,IAAIrH,EAAE8M,cAActN,KAAKsN,eAAetN,KAAK6H,WAAW,iBAAiB,IAAIrH,EAAEwJ,cAAchK,KAAKgK,eAAehK,KAAK6H,WAAW,WAAW,IAAIrH,EAAE+M,QAAQvN,KAAKuN,SAASvN,KAAK6H,WAAW,YAAY,IAAIrH,EAAEyG,SAASjH,KAAKiH,UAAUjH,KAAK6H,WAAW,YAAY,IAAIrH,EAAE0G,SAASlH,KAAKkH,UAAUlH,KAAK6H,WAAW,WAAW,IAAIrH,EAAEgN,QAAQxN,KAAKwN,SAASxN,KAAK6H,WAAW,iBAAiB,IAAIrH,EAAE2J,cAAc,YAAEnK,KAAKmK,gBAAgBnK,KAAK6H,WAAW,YAAY,IAAIrH,EAAEiN,SAAS,YAAEzN,KAAKyN,WAAW,gBAAgB,OAAOrM,EAAEpB,KAAK+G,aAAQ,EAAO3F,EAAEY,QAAQxB,EAAE4M,kBAAkBpN,KAAK+G,OAAO6F,SAAS5M,KAAK6H,WAAW,SAAS,IAAIrH,EAAE6J,MAAMrK,KAAKqK,OAAO,cAAcrK,KAAK8E,MAAM9C,MAAMhC,KAAK8E,MAAM+C,WAAW,oBAAoB,IAAIrH,EAAEkN,iBAAiB1N,KAAK8E,MAAM4I,kBAAkB,SAAS1N,KAAK8E,MAAM9C,MAAMhC,KAAK8E,MAAM+C,WAAW,oBAAoB,IAAIrH,EAAEkN,iBAAiB1N,KAAK8E,MAAM4I,kBAAkBlN,EAAE,eAAeE,GAAG,MAAM4J,YAAYlJ,EAAEmJ,MAAM9J,GAAGT,KAAK,IAAIoB,IAAIV,EAAE,OAAO,KAAK,MAAMF,EAAEE,EAAEiN,WAAWjN,EAAEiN,WAAWvM,QAAG,EAAO,GAAG,MAAMZ,EAAE,OAAO,KAAK,IAAIK,EAAE,KAAK,OAAOJ,EAAEmH,KAAMlH,IAAI,MAAM4E,GAAGlE,GAAGV,EAAE,OAAO,MAAMU,IAAIA,EAAEwM,aAAapN,EAAEoN,aAAa/M,EAAEH,KAAKG,KAAMA,EAAE,eAAeH,EAAEU,GAAG,MAAMX,EAAEW,GAAGA,EAAEyM,QAAQrN,EAAER,KAAK8N,eAAerN,GAAG,GAAGD,EAAE,CAAC,MAAMY,EAAEZ,EAAEuN,SAASvN,EAAEuN,QAAQrN,GAAG,GAAGU,GAAG,cAAcA,EAAEY,KAAK,OAAOZ,EAAE,OAAOpB,KAAKgO,gBAAgBtN,GAAG,oBAAoBA,EAAEV,KAAKiO,cAAc7M,GAAG,IAAIX,EAAED,EAAEK,EAAEQ,EAAE,SAASrB,KAAKkO,QAAQlO,KAAKoG,IAAI,yCAAyC,MAAM,IAAI,IAAE,yBAAyB,uCAAuC,OAAO+H,aAAaxN,IAAIuM,QAAQhM,UAAUmD,QAAQ+J,IAAI,CAAC,yCAA+C,2CAA6CzI,QAAQhF,EAAEX,KAAKiC,IAAI,IAAEoM,KAAK3N,GAAG,OAAOD,EAAE,OAAOD,EAAER,KAAK8E,YAAO,EAAOtE,EAAE+H,kBAAkB9H,EAAE,KAAK,IAAIW,EAAEU,MAAM,IAAI,OAAOjB,EAAEb,KAAK8E,YAAO,EAAOjE,EAAE6M,iBAAiBY,MAAM,OAAOjN,EAAErB,KAAK8E,YAAO,EAAOzD,EAAEkN,UAAUC,EAAEtN,EAAE0B,SAAS+C,EAAEtD,MAAM,GAAG,MAAMmM,GAAGA,EAAEC,SAAS,IAAI,MAAM7N,KAAK4N,EAAEC,SAAS7N,EAAE8N,YAAY1O,KAAK,OAAOwO,EAAE,oBAAoB,IAAI9N,EAAE,MAAMU,EAAE,CAACkE,GAAGtF,KAAKsF,GAAGyB,QAAQ,OAAOrG,EAAEV,KAAK+G,aAAQ,EAAOrG,EAAEiO,WAAW,CAAC7G,WAAW9H,KAAKsF,GAAGtD,KAAK,aAAahC,KAAKgN,uBAAuB5L,EAAE4L,qBAAqBhN,KAAKgN,sBAAsB,MAAMvM,EAAE,CAAC,WAAW,eAAe,UAAU,iBAAiBmO,OAAO,CAAElO,EAAEU,KAAKV,EAAEU,GAAGpB,KAAK6H,WAAWzG,GAAGV,GAAI,IAAI,GAAGoC,OAAO+L,KAAKpO,GAAGmH,KAAMlH,GAAGD,EAAEC,GAAG,GAAI,CAAC,MAAMA,EAAEU,EAAEqK,YAAY,GAAGhL,EAAEgN,SAAS,IAAI/M,EAAE+M,SAASzN,KAAKyN,SAASzN,KAAKyN,SAASkB,SAAS,MAAMlO,EAAE6M,cAAc,IAAI5M,EAAEoO,WAAW9O,KAAKsN,eAAetN,KAAKsN,eAAe7M,EAAEiL,aAAa,IAAIhL,EAAEgL,aAAa1L,KAAK0L,aAAa1L,KAAK0L,aAAavD,IAAKzH,GAAGA,EAAEiL,MAAM,GAAG,CAAC5C,OAAO,UAAUjE,MAAM9E,KAAK8E,SAAU,KAAKpE,EAAEoO,YAAW,GAAIrO,EAAE+M,QAAQ,IAAI9M,EAAEkL,aAAa,IAAI,IAAI5L,KAAKwN,SAASxN,KAAK+O,2BAA2BrO,EAAE+M,UAAU,OAAOrM,EAAE,2BAA2BV,GAAGV,KAAKgP,4BAA4BtO,EAAGA,IAAIA,EAAEuO,OAAO,aAAavO,EAAEwO,OAAO,iBAAiBxO,EAAEwO,QAAQxO,EAAEyO,SAASzO,EAAEyO,QAAQF,MAAMvO,EAAEuO,MAAMvO,EAAEyO,QAAQF,MAAMvO,EAAEuO,MAAM,CAAC,EAAE,EAAE,EAAE,MAAO,4BAA4BvO,EAAEU,GAAG,GAAGV,EAAE,CAAC,MAAMD,EAAE,qBAAqBC,EAAEA,EAAE0O,iBAAiB,oBAAoB1O,EAAEA,EAAE2O,gBAAgB,GAAG,IAAI,MAAM3O,KAAKD,EAAEoI,EAAEnI,EAAE4O,SAASlO,EAAEV,EAAE4O,QAAQ,WAAW5O,GAAGmI,EAAEnI,EAAE4O,SAASlO,EAAEV,EAAE4O,QAAQ,kBAAkB5O,GAAGmI,EAAEnI,EAAE6O,gBAAgBnO,EAAEV,EAAE6O,gBAAgB,mBAAmB7O,EAAEU,GAAG,MAAMX,EAAET,KAAK8E,MAAMtE,EAAER,KAAKsL,KAAK5K,GAAG,IAAIG,EAAEQ,EAAE,OAAOX,GAAG,IAAI,uBAAuBG,EAAE,uCAAuC,IAAI,WAAW,IAAI,WAAW,IAAI,UAAUA,EAAE,6BAA6B,MAAM,IAAI,eAAe,IAAI,gBAAgB,IAAI,UAAU,IAAI,WAAW,IAAI,SAASA,EAAE,wBAAwBQ,EAAE,uBAAuB,MAAMV,EAAE,YAAEX,MAAMwP,mBAAmB,GAAG,YAAY7O,EAAE,CAAC,GAAGE,IAAG,IAAKb,KAAKoG,IAAI,gCAAgCvF,GAAK,YAAYb,KAAKwL,gBAAgB9K,EAAE,0DAA0DG,MAAM,GAAGQ,IAAG,IAAKrB,KAAKoG,IAAI,0BAA0B/E,GAAK,YAAYrB,KAAKwL,gBAAgB9K,EAAE,oDAAoDW,MAAM,WAAWX,GAAG,eAAeV,KAAKyP,YAAYzP,KAAKuL,KAAK7K,EAAEU,GAAG,YAAYT,GAAGH,IAAIY,GAAGX,GAAGA,EAAEiP,MAAMjP,EAAEiP,KAAK,kBAAkB,CAACC,aAAajP,EAAEkP,OAAO5P,QAAQA,KAAKwL,gBAAgB9K,EAAE,2DAA2D,uBAAuBA,EAAEU,GAAGA,IAAIA,EAAEiF,QAAS3F,IAAIA,EAAEmL,OAAO,KAAKnL,EAAEoE,MAAM,OAAQ9E,KAAK6P,QAAQC,aAAapP,IAAIA,EAAE2F,QAAS3F,IAAIA,EAAEmL,OAAO7L,KAAKU,EAAEoE,MAAM9E,KAAK8E,QAAS9E,KAAK6P,QAAQ9L,IAAI,CAACrD,EAAEqP,GAAG,YAAY,EAAGC,KAAKtP,MAAMA,EAAEmL,OAAO7L,KAAKU,EAAEoE,MAAM9E,KAAK8E,QAASpE,EAAEqP,GAAG,eAAe,EAAGC,KAAKtP,MAAMA,EAAEmL,OAAO,KAAKnL,EAAEoE,MAAM,OAAQpE,EAAEqP,GAAG,iBAAkBrP,IAAI,MAAMU,EAAEpB,KAAKoG,IAAI,yDAAyD,MAAMhF,GAAGA,IAAIoI,EAAEpF,MAAM,IAAI,IAAE,oCAAoC,wEAAwE,CAACqG,SAASzK,KAAK8E,MAAM9E,KAAK8E,SAASpE,EAAEuP,uBAAwB,gBAAgBvP,EAAEU,GAAGoI,EAAEpF,MAAM,IAAI,IAAE,kBAAkB,aAAa1D,mDAAmDV,KAAK8E,MAAMQ,MAAM,CAAC4K,OAAO9O,EAAEqJ,SAASzK,KAAK8E,MAAM9E,KAAK8E,SAAS,gBAAgBpE,GAAG,MAAMU,EAAEpB,KAAKmQ,YAAY/J,IAAI1F,GAAG,OAAOU,EAAEA,EAAEgP,OAAO,OAAOxG,EAAEyG,KAAK,CAACC,8BAA8B5P,GAAGA,IAAI4I,GAAG5I,IAAIoI,EAAEyH,+BAA+B7P,GAAGA,IAAI0I,GAAG,YAAE,CAAC,YAAE,CAACzC,UAAS,KAAMiD,EAAElD,UAAU,oBAAe,GAAQ,YAAE,CAAC,YAAE,UAAU,eAAe,CAAC,iCAAiC,kCAAkCkD,EAAElD,UAAU,mBAAmB,MAAM,YAAE,CAAC,YAAE,CAAC1E,KAAKwO,OAAOC,MAAM,KAAK7J,KAAK,CAACyE,KAAK,uCAAuCM,MAAM,CAAC+E,eAAe5H,OAAOc,EAAElD,UAAU,uBAAuB,MAAM,YAAE,CAAC,YAAE,CAAC1E,KAAK,CAAC,KAAG4E,KAAK,CAACC,QAAQ,CAACvF,QAAQ,CAACwF,KAAK,CAACC,OAAO,gCAAgC6C,EAAElD,UAAU,cAAS,GAAQ,YAAE,CAAC,YAAE,CAACC,UAAS,KAAMiD,EAAElD,UAAU,cAAc,MAAM,YAAE,CAAC,YAAE,CAAC1E,KAAK,IAAE4E,KAAK,CAACE,KAAK,CAACC,OAAO,8BAA8B6C,EAAElD,UAAU,kBAAa,GAAQ,YAAE,CAAC,YAAE,CAAC1E,KAAKwO,UAAU5G,EAAElD,UAAU,qBAAgB,GAAQ,YAAE,CAAC,YAAE,UAAU,gBAAgB,CAAC,gCAAgC,4BAA4BkD,EAAElD,UAAU,+BAA+B,MAAM,YAAE,CAAC,YAAE,CAAC1E,KAAK,IAAE4E,KAAK,CAAC+E,MAAM,CAAC3C,cAAa,OAAQY,EAAElD,UAAU,KAAK,MAAM,YAAE,CAAC,YAAE,CAAC+J,MAAM,KAAKzO,KAAK,CAAC,KAAG4E,KAAK,CAACE,KAAK,CAACC,OAAO,4CAA4C4E,MAAM,CAACiE,OAAO,2CAA2Cc,eAAepH,OAAOM,EAAElD,UAAU,eAAe,MAAM,YAAE,CAAC,YAAE,iBAAiBkD,EAAElD,UAAU,oBAAoB,MAAM,YAAE,CAAC,YAAE,CAAC1E,KAAK2O,QAAQF,OAAM,EAAG7J,KAAK,CAACE,KAAK,CAACC,OAAO,0CAA0C4E,MAAM,CAACiE,OAAO,yCAAyCc,eAAepH,OAAOM,EAAElD,UAAU,gBAAgB,MAAM,YAAE,CAAC,YAAE,CAAC+J,MAAM,QAAQ7G,EAAElD,UAAU,QAAQ,MAAM,YAAE,CAAC,YAAE,CAAC1E,KAAK2O,QAAQF,OAAM,EAAG7J,KAAK,CAACC,QAAQ,CAACvF,QAAQ,CAACwF,KAAK,CAACoC,SAAQ,KAAMpC,KAAK,CAACC,OAAO,cAAc4E,MAAM,CAACiE,OAAO,aAAac,eAAenH,OAAOK,EAAElD,UAAU,qBAAgB,GAAQ,YAAE,CAAC,YAAE,CAAC1E,KAAK,CAAC,OAAO,OAAO,iBAAiByO,MAAM,OAAO7J,KAAK,CAACE,MAAK,EAAG6E,OAAM,EAAG9E,QAAQ,CAAC,YAAY,CAACC,MAAK,EAAG6E,OAAM,QAAS/B,EAAElD,UAAU,WAAW,MAAM,YAAE,CAAC,YAAE,CAAC1E,KAAKyE,OAAOgK,MAAM,EAAE7J,KAAK,CAAC+E,MAAM,CAAC+E,eAAepH,OAAOM,EAAElD,UAAU,WAAW,MAAM,YAAE,CAAC,YAAE,WAAW,CAAC,WAAW,8BAA8BkD,EAAElD,UAAU,eAAe,MAAM,YAAE,CAAC,YAAE,CAAC1E,KAAKyE,OAAOgK,MAAM,EAAE7J,KAAK,CAAC+E,MAAM,CAAC+E,eAAepH,OAAOM,EAAElD,UAAU,WAAW,MAAM,YAAE,CAAC,YAAE,WAAW,CAAC,WAAW,8BAA8BkD,EAAElD,UAAU,eAAe,MAAM,YAAE,CAAC,YAAE,CAAC1E,KAAKwO,UAAU5G,EAAElD,UAAU,qBAAgB,GAAQ,YAAE,CAAC,YAAE,UAAU,gBAAgB,CAAC,gCAAgC,4BAA4BkD,EAAElD,UAAU,+BAA+B,MAAM,YAAE,CAAC,YAAE,CAAC1E,KAAKyE,OAAOgK,MAAM,EAAE7J,KAAK,CAAC+E,MAAM,CAACiE,OAAO,2CAA2Cc,eAAepH,OAAOM,EAAElD,UAAU,UAAU,MAAM,YAAE,CAAC,YAAE,UAAU,CAAC,2CAA2C,kCAAkCkD,EAAElD,UAAU,cAAc,MAAM,YAAE,CAAC,YAAE,YAAYkD,EAAElD,UAAU,eAAe,MAAM,YAAE,CAAC,YAAE,CAACE,KAAK,CAAC5E,KAAK,IAAE2J,MAAM,CAACiE,OAAO,gBAAgB3G,WAAU,EAAGyH,eAAepH,OAAOM,EAAElD,UAAU,cAAS,GAAQ,YAAE,CAAC,YAAE,WAAWkD,EAAElD,UAAU,cAAc,MAAM,YAAE,CAAC,YAAE,CAAC1E,KAAK2O,QAAQF,OAAM,EAAG7J,KAAK,CAACE,KAAK,CAACC,OAAO,eAAeC,OAAO,CAACtG,EAAEU,KAAKA,EAAEwP,cAAcjF,MAAM,CAACiE,OAAO,eAAec,eAAenH,EAAE,OAAO7I,EAAEU,EAAEX,GAAGW,EAAEX,IAAIC,QAAQkJ,EAAElD,UAAU,oBAAe,GAAQ,YAAE,CAAC,YAAE,CAAC1E,KAAK,IAAE4E,KAAK,CAACE,KAAK,CAACC,OAAO,aAAa4E,MAAM,CAACiE,OAAO,YAAYc,eAAenH,OAAOK,EAAElD,UAAU,qBAAgB,GAAQ,YAAE,CAAC,YAAE,CAACC,UAAS,KAAMiD,EAAElD,UAAU,uBAAuB,MAAM,YAAE,CAAC,YAAE,CAAC6D,MAAM,IAAEkG,MAAM,KAAK7J,KAAK,CAACyE,KAAK,uCAAuCM,MAAM,CAAC+E,eAAepH,GAAGzC,QAAQ,CAAC,YAAY,CAAC0D,MAAM,IAAEc,KAAK,uCAAuCM,MAAM,CAAC+E,eAAepH,SAASM,EAAElD,UAAU,WAAW,MAAM,YAAE,CAAC,YAAE,CAAC6D,MAAM,CAACsG,IAAI,OAAOC,KAAK,KAAKC,QAAQ,CAAC,aAAa,IAAE,YAAY,MAAI,KAAKrQ,GAAG,GAAGA,EAAE,CAAC,GAAG,eAAeA,EAAE,OAAO,YAAE,IAAEA,GAAG,GAAG,eAAeA,EAAE,OAAO,YAAE,IAAEA,GAAG,OAAOA,GAAGkG,KAAK,CAACyE,KAAK,yBAAyBM,MAAM,CAAC+E,eAAepH,OAAOM,EAAElD,UAAU,SAAS,MAAM,YAAE,CAAC,eAAKkD,EAAElD,UAAU,kBAAa,GAAQ,YAAE,CAAC,YAAE,CAAC+J,MAAM,KAAK7J,KAAK,CAAC5E,KAAK,CAAC,KAAG2J,MAAM,CAACiE,OAAO,cAAc3G,WAAU,EAAGyH,eAAepH,OAAOM,EAAElD,UAAU,YAAY,MAAM,YAAE,CAAC,YAAE,cAAckD,EAAElD,UAAU,gBAAgB,MAAM,YAAE,CAAC,YAAE,cAAckD,EAAElD,UAAU,iBAAiB,MAAM,YAAE,CAAC,YAAE,CAAC1E,KAAKwO,OAAO5J,KAAK,CAACE,KAAK,CAACC,OAAO,QAAQ4E,MAAM,CAACiE,OAAO,OAAO3G,WAAU,EAAGyH,eAAenH,OAAOK,EAAElD,UAAU,aAAQ,GAAQ,YAAE,CAAC,YAAE,CAAC1E,KAAKwO,UAAU5G,EAAElD,UAAU,mBAAc,GAAQ,YAAE,CAAC,YAAE,cAAc,CAAC,iCAAiCkD,EAAElD,UAAU,kBAAkB,MAAM,YAAE,CAAC,YAAE,CAAC1E,KAAK,CAAC,KAAG4E,KAAK,CAACC,QAAQ,CAACvF,QAAQ,CAACwF,KAAK,CAACC,OAAO,+BAA+B6C,EAAElD,UAAU,aAAQ,GAAQ,YAAE,CAAC,YAAE,CAAC1E,KAAKwO,OAAO5J,KAAK,CAACE,KAAK,CAACC,OAAO,YAAY4E,MAAM,CAACiE,OAAO,WAAWc,eAAetH,OAAOQ,EAAElD,UAAU,MAAM,MAAM,YAAE,CAAC,YAAE,CAAC1E,KAAK2O,QAAQF,OAAM,EAAG7J,KAAK,CAACE,KAAK,CAACC,OAAO,qBAAqB4E,MAAM,CAACiE,OAAO,oBAAoBc,eAAepH,OAAOM,EAAElD,UAAU,UAAU,MAAM,YAAE,CAAC,YAAE,YAAYkD,EAAElD,UAAU,eAAe,MAAMkD,EAAEhB,EAAE,YAAE,CAAC,YAAE,iCAAiCgB,GAAG,IAAIoH,EAAEpH,EAAiB,O,iCCJhxiB,2SAIsvD,MAAMqH,EAAE,CAAC,8BAA8B,mCAAmC,+BAA+B,oCAAoC,4BAA4B,iCAAiC,yBAAyB,8BAA8B,gBAAgB,wCAAwC,kDAAkD,iCAAiC,gBAAgB,mBAAmB,kBAAkB,IAAIC,EAAE,cAAc,WAAD,CAAG,YAAE,YAAE,YAAE,YAAE,YAAE,YAAE,YAAE,YAAE,YAAE,YAAE,YAAE,YAAE,kBAAgB,eAAexQ,GAAG6C,SAAS7C,GAAGV,KAAKmR,SAAS,OAAOnR,KAAKoR,YAAY,KAAKpR,KAAKqR,qBAAqB,6BAA6BrR,KAAKsR,YAAW,EAAGtR,KAAKoK,WAAW,KAAKpK,KAAKuI,iBAAiB,KAAKvI,KAAKkG,KAAK,KAAKlG,KAAK2H,UAAU,KAAK3H,KAAKgC,KAAK,OAAOhC,KAAKiC,IAAI,KAAK,kBAAkBvB,EAAEU,GAAG,MAAM,iBAAiBV,EAAE,CAACuB,IAAIvB,KAAKU,GAAGV,EAAE,KAAKA,GAAG,MAAMU,EAAE,YAAEV,GAAGA,EAAEgE,OAAO,KAAK,OAAO1E,KAAKwK,oBAAoBxK,KAAKuR,eAAe,CAACC,eAAe,CAAC,gBAAgB9Q,GAAG4B,MAAM,KAAGF,KAAK,IAAKpC,KAAKyR,cAAcrQ,KAAMiD,QAAQI,QAAQzE,MAAM,yBAAyB,IAAIU,EAAE,MAAMU,EAAE,OAAOV,EAAEV,KAAKgG,gBAAW,EAAOtF,EAAEwF,KAAK0E,cAAc,OAAOxJ,GAAGpB,KAAK0R,uBAAuB1R,KAAK2R,YAAYvQ,IAAI,qBAAqBV,EAAEU,GAAG,OAAOV,EAAEA,GAAGU,EAAE2D,UAAU3D,EAAE2D,SAASwD,mBAAmB,IAAE3F,SAASlC,GAAG,eAAeA,EAAEU,EAAEZ,EAAEa,GAAG,IAAIrB,KAAK4R,SAASlR,EAAE,OAAO,MAAMD,EAAEC,EAAEsH,QAAQC,UAAUP,QAAQ,EAAGC,UAAUjH,KAAKA,GAAGA,EAAEwH,UAAUD,WAAYC,UAAUrH,EAAE,GAAGF,EAAE,CAACwI,wBAAuB,KAAM9H,GAAGZ,EAAE4F,QAAS3F,IAAI,MAAMU,EAAEV,EAAEiL,MAAM,GAAGhL,GAAGE,EAAEiF,KAAK1E,KAAMP,EAAE+G,KAAMlH,GAAGoC,OAAO+L,KAAKnO,GAAGK,OAAO,KAAMK,EAAEyQ,OAAOhR,GAAG,kBAAkB,OAAOb,KAAK8R,uBAAuB9R,KAAKgG,UAAUE,MAAM,gBAAgBxF,GAAG,OAAOuC,MAAMC,QAAQxC,GAAGA,EAAEyH,IAAKzH,GAAG,YAAEA,GAAGwF,MAAO,KAAK,UAAUxF,EAAEF,EAAEa,EAAEZ,EAAE,IAAI,MAAMiE,OAAO7D,EAAEkR,UAAUpR,GAAGF,EAAEG,EAAEZ,KAAKgS,WAAWtR,EAAEF,EAAEa,GAAGH,EAAE,CAACwJ,aAAa,QAAQhG,OAAO7D,GAAG,OAAO,MAAMF,IAAIO,EAAEY,MAAM,CAACmQ,IAAIxR,EAAEsR,YAAY,kBAAEnR,EAAEM,GAAGkB,KAAM1B,GAAGA,EAAE2B,MAAO,WAAW3B,EAAEU,EAAEZ,GAAG,MAAMa,GAAGrB,KAAKwI,cAAcxI,KAAKkS,kBAAkBzR,EAAE,YAAE,IAAIT,KAAKgG,UAAUlE,MAAMqQ,WAAW9Q,GAAG,QAAQrB,KAAK0N,iBAAiBY,MAAMtO,KAAKuO,SAAS1N,EAAEb,KAAKmC,YAAY,MAAM,GAAGtB,GAAGA,EAAEE,OAAOF,EAAEO,EAAEP,EAAEE,QAAQf,KAAKgG,UAAUE,aAAaxF,KAAKU,KAAKZ,IAAIC,EAAE,IAAIA,EAAE,KAAK,cAAcC,GAAG,OAAO,IAAI2D,QAAQ,CAAEhD,EAAER,KAAK,GAAGb,KAAKoK,WAAW,CAAC,GAAG,MAAMpK,KAAKoK,WAAWgI,WAAW,MAAMpS,KAAKoK,WAAWiI,WAAW,MAAM,IAAI,IAAE,6BAA6B,sDAAsD,YAAYhR,EAAE,CAACgB,KAAKrC,KAAKoK,aAAa,IAAIpK,KAAKgG,UAAU,MAAM,IAAI,IAAE,2BAA2B,8BAA8B,MAAMrF,EAAE,YAAEX,KAAKgG,UAAUE,MAAM,GAAG,YAAEvF,IAAI,gBAAgBA,EAAE2R,WAAW,MAAM,IAAI,IAAE,6BAA6B,sDAAsD,kBAAEtS,KAAKgG,UAAUE,KAAK,CAACpE,MAAM,CAACC,EAAE,UAAU/B,KAAKgG,UAAUlE,SAAS9B,KAAK0N,iBAAiBY,MAAMtO,KAAKuO,QAAQ7D,aAAa,OAAOhG,OAAOhE,IAAI0B,KAAKf,EAAER,KAAMuB,KAAMhB,IAAI,GAAGA,EAAEmR,MAAMvS,KAAKiC,IAAIjC,KAAKiC,IAAIuQ,QAAQ,UAAU,WAAWxS,KAAKoK,WAAWhJ,EAAEiB,KAAKrC,KAAK8G,KAAK1F,EAAEiB,KAAK,CAAC0G,OAAO,UAAU9G,IAAIjC,KAAKgG,YAAY,OAAOhG,KAAKyI,UAAU,YAAEzI,KAAKiC,KAAK,OAAOjC,KAAKyS,oBAAoBzS,KAAKiC,IAAIvB,GAAG0B,KAAM1B,IAAIV,KAAK8G,KAAK,CAAC4L,eAAehS,MAAO4B,MAAM,UAAa,oBAAoB5B,EAAEW,GAAG,IAAI,YAAEX,GAAG,OAAO2D,QAAQC,SAAS,MAAM7D,EAAEC,EAAE8R,QAAQ,kBAAkB,MAAM,QAAQ,OAAO,kBAAE/R,EAAE,CAACqB,MAAM,CAACC,EAAE,UAAU/B,KAAK0N,iBAAiBY,MAAMtO,KAAKuO,QAAQ7D,aAAa,OAAOhG,OAAOrD,IAAIe,KAAM1B,IAAI,GAAGA,EAAE2B,MAAM3B,EAAE2B,KAAKqQ,eAAe,OAAOhS,EAAE2B,KAAKqQ,eAAe,MAAM,IAAI,IAAE,sCAAuC,YAAYhS,GAAG,MAAMU,EAAEV,EAAEiS,MAAM,gKAAgK,OAAOvR,GAAGA,EAAE,GAAG,uBAAuBV,GAAG,IAAIA,EAAE,OAAO,IAAIU,EAAEV,EAAEA,EAAEkK,cAAc,IAAI,IAAIpK,EAAE,EAAEa,EAAE4P,EAAElQ,OAAOP,EAAEa,EAAEb,IAAI,GAAGY,EAAE6P,EAAEzQ,GAAGY,EAAEwJ,cAAcjC,QAAQjI,IAAI,EAAE,OAAO,YAAE,mCAAmCU,GAAG,uBAAuBV,GAAG,MAAMU,GAAG,IAAIV,EAAEkS,OAAO,+CAA+CpS,GAAG,IAAIE,EAAEkS,OAAO,iDAAiD,OAAOxR,GAAGZ,EAAE,CAACE,EAAEA,EAAE8R,QAAQpR,EAAE,wBAAwB,0BAA0BA,EAAE,wBAAwB,wBAAwB,GAAG,6BAA6B,OAAOpB,KAAK6S,UAAUC,gBAAgB,YAAE,CAAC,YAAE,CAACnM,UAAS,KAAMuK,EAAExK,UAAU,qBAAqB,MAAM,YAAE,CAAC,YAAE,CAAC1E,KAAK,CAAC,OAAO,OAAO,oBAAoBkP,EAAExK,UAAU,gBAAW,GAAQ,YAAE,CAAC,YAAE,CAAC1E,KAAK2O,QAAQ/J,KAAK,CAACE,MAAK,EAAG6E,MAAM,CAACzC,SAAQ,EAAGwH,eAAe,KAAI,CAAExH,SAAQ,SAAUgI,EAAExK,UAAU,mBAAc,GAAQ,YAAE,CAAC,YAAE,CAACC,UAAS,EAAG3E,KAAK,CAAC,iCAAiCkP,EAAExK,UAAU,4BAAuB,GAAQ,YAAE,CAAC,YAAE,CAAC1E,KAAK2O,WAAWO,EAAExK,UAAU,kBAAa,GAAQ,YAAE,CAAC,eAAKwK,EAAExK,UAAU,kBAAa,GAAQ,YAAE,CAAC,YAAE,CAAC1E,KAAK,OAAKkP,EAAExK,UAAU,wBAAmB,GAAQ,YAAE,CAAC,YAAE,mBAAmB,CAAC,mBAAmB,cAAcwK,EAAExK,UAAU,uBAAuB,MAAM,YAAE,CAAC,YAAE,CAAC1E,KAAKwO,OAAO5J,KAAK,CAACC,QAAQ,CAAC,YAAY,CAACC,MAAK,EAAG6E,OAAM,IAAK7E,MAAK,MAAOoK,EAAExK,UAAU,YAAO,GAAQ,YAAE,CAAC,YAAE,CAACC,UAAS,KAAMuK,EAAExK,UAAU,iBAAY,GAAQ,YAAE,CAAC,YAAE,YAAY,CAACmL,OAAO,CAAC7P,KAAK,CAAC,SAAOkP,EAAExK,UAAU,iBAAiB,MAAM,YAAE,CAAC,YAAE,CAACE,KAAK,CAACE,MAAK,EAAG6E,OAAM,MAAOuF,EAAExK,UAAU,oBAAe,GAAQ,YAAE,CAAC,eAAKwK,EAAExK,UAAU,cAAc,MAAM,YAAE,CAAC,YAAE,gBAAgBwK,EAAExK,UAAU,kBAAkB,MAAM,YAAE,CAAC,YAAE,CAACC,UAAS,EAAGC,KAAK,CAACE,MAAK,MAAOoK,EAAExK,UAAU,YAAO,GAAQ,YAAE,CAAC,YAAE,MAAIwK,EAAExK,UAAU,WAAM,GAAQwK,EAAE,YAAE,CAAC,YAAE,0BAA0BA,GAAGA,EAAExK,UAAUmM,UAAUC,eAAc,EAAG,IAAIhK,EAAEoI,EAAiB,a,iCCJ//N,gKAI0tB,MAAM1C,EAAEA,IAAI,IAAI5M,EAAE,cAAc4M,EAAE,cAAcjL,SAAS8E,WAAWrI,KAAK0I,kBAAa,EAAO1I,KAAKsI,UAAU,KAAKtI,KAAK8J,WAAW,KAAK9J,KAAKgK,eAAc,EAAGhK,KAAKuI,iBAAiB,KAAKvI,KAAKyI,QAAQ,KAAK,iBAAiB/H,EAAEU,GAAG,MAAMC,EAAED,EAAEsH,cAActH,EAAEsH,aAAamC,MAAM,KAAK1C,IAAKzH,GAAGA,EAAEkK,cAAcE,QAAS,IAAIzJ,EAAE,MAAM,CAAC6J,WAAW,CAACC,eAAc,EAAG4H,mBAAkB,EAAGC,qBAAoB,EAAGC,iBAAgB,GAAIlI,UAAU,KAAKmI,YAAY,MAAM,MAAM1S,EAAER,KAAKgC,KAAKvB,GAAG,IAAIY,EAAEsH,QAAQ,SAAShD,GAAG,IAAItE,EAAEsH,QAAQ,OAAOhI,IAAIS,EAAE+R,mBAAmBvS,GAAG,IAAIS,EAAEsH,QAAQ,WAAWzH,EAAE,SAASV,KAAKY,EAAEgS,sBAAsBC,EAAE,SAAS7S,KAAKY,EAAE2D,UAAU7D,GAAGS,EAAE,SAASnB,KAAKY,EAAE2D,UAAU7D,GAAGsN,EAAE,SAAShO,EAAEoB,IAAIR,EAAEkS,YAAY,IAAEC,MAAMnS,EAAEkS,YAAYE,MAAM,EAAE,GAAG,MAAM,CAACtI,WAAW,CAACC,cAAc1K,EAAEsS,kBAAkBpN,EAAEqN,oBAAoBrS,EAAEsS,gBAAgBrS,GAAGmK,UAAUpF,EAAE,CAAC8N,oCAAoC7R,EAAE8R,yBAAyBlF,EAAE4E,sBAAsBlS,EAAEyS,2BAA2BN,EAAEO,qCAAqCjS,GAAG,KAAKuR,YAAYvS,EAAE,CAACkT,qBAAqBzS,EAAEyS,qBAAqB,MAAM,YAAYnT,EAAEU,GAAG,IAAIC,EAAED,EAAEsR,eAAe,OAAOrR,IAAIA,EAAED,EAAE6L,eAAe,iBAAiB7L,EAAE6L,eAAe,UAAU,GAAG7L,EAAE6L,eAAe,6BAA6B,KAAK,KAAK5L,EAAE,wBAAwBX,EAAEU,GAAG,aAAapB,KAAK8T,wBAAwB1S,GAAGpB,KAAK+T,uBAAuB3N,IAAI1F,GAAG,8BAA8BA,SAASV,KAAKkO,KAAKxN,GAAGV,KAAKgU,6BAA6BhU,KAAKgU,2BAA2B,kBAAE,YAAEhU,KAAKiC,KAAKiE,KAAK,UAAU,CAACwE,aAAa,OAAO5I,MAAM,CAACC,EAAE,UAAU/B,KAAK0N,iBAAiBY,MAAMtO,KAAKuO,UAAUnM,KAAM1B,IAAIV,KAAK+T,uBAAuB,IAAIE,IAAI,IAAI,MAAM7S,KAAKV,EAAE2B,KAAKwP,OAAO7R,KAAK+T,uBAAuBG,IAAI9S,EAAEkE,GAAGlE,GAAG,MAAM,CAAC+S,OAAOzT,EAAE2B,OAAS3B,IAAG,CAAE0D,MAAM1D,MAAO,MAAMG,QAAQb,KAAKgU,2BAA2B,GAAG,YAAEtT,GAAG,WAAWG,EAAE,OAAOA,EAAEsT,OAAO,MAAMtT,EAAEuD,QAAQ,OAAO,YAAE,CAAC,YAAE,CAACuC,UAAS,KAAM/E,EAAE8E,UAAU,oBAAe,GAAQ,YAAE,CAAC,YAAE,UAAU,eAAe,CAAC,eAAe,qBAAqB,sBAAsB,wBAAwB,cAAc9E,EAAE8E,UAAU,mBAAmB,MAAM,YAAE,CAAC,YAAE,CAACE,KAAK,CAACE,KAAK,CAACC,OAAO,qBAAqBnF,EAAE8E,UAAU,iBAAY,GAAQ,YAAE,CAAC,YAAE,CAAC1E,KAAK,OAAKJ,EAAE8E,UAAU,kBAAa,GAAQ,YAAE,CAAC,YAAE,MAAI9E,EAAE8E,UAAU,UAAK,GAAQ,YAAE,CAAC,YAAE,CAAC1E,KAAK2O,QAAQ/J,KAAK,CAACC,QAAQ,CAACvF,QAAQ,CAACwF,KAAK,CAACoC,SAAQ,KAAMpC,KAAK,CAACC,OAAO,cAAc4E,MAAM,CAACiE,OAAO,kBAAkBhO,EAAE8E,UAAU,qBAAgB,GAAQ,YAAE,CAAC,YAAE,MAAI9E,EAAE8E,UAAU,oBAAe,GAAQ,YAAE,CAAC,YAAE,CAAC1E,KAAK,OAAKJ,EAAE8E,UAAU,wBAAmB,GAAQ,YAAE,CAAC,eAAK9E,EAAE8E,UAAU,eAAU,GAAQ,YAAE,CAAC,YAAE,UAAU,CAAC,iBAAiB,eAAe,SAAS,+BAA+B9E,EAAE8E,UAAU,cAAc,MAAM9E,EAAE,YAAE,CAAC,YAAE,wCAAwCA,GAAGA,I,iCCJ/1G,2JAIorB,MAAMwS,EAAE,IAAE/Q,UAAU,yBAAgR,MAAMxB,EAAE,IAAEsK,OAAO,KAA+F,MAAMpK,EAAElB,IAAI,IAAIkB,EAAE,cAAclB,EAAE,eAAeH,GAAG6C,SAAS7C,GAAGV,KAAKqU,aAAa,IAAI,IAAE,CAACC,eAAe,IAAI,CAACtU,KAAK2H,WAAW4M,oBAAoB7T,GAAGA,EAAEiH,YAAY3H,KAAKwU,oBAAoB,CAACC,EAAE,GAAGC,EAAE,GAAGC,EAAE,GAAGC,EAAE,IAAI5U,KAAK6P,QAAQ9L,IAAI/D,KAAKgE,MAAM,YAAY,CAAEtD,EAAEU,IAAIpB,KAAKkM,uBAAuBxL,EAAEU,IAAI,IAAK,cAAcV,EAAEU,GAAG,IAAIA,IAAIV,EAAE,OAAO,MAAM8T,oBAAoBnT,GAAGrB,KAAKQ,EAAE,YAAEY,EAAE2H,QAAQ,GAAGvI,EAAE,EAAE,OAAO,GAAGa,EAAEb,GAAG,CAACqU,QAAQzT,EAAE0T,cAAcpU,EAAEoU,eAAezT,EAAEb,GAAGsU,cAAcjD,OAAOnR,EAAEmR,QAAQxQ,EAAEb,GAAGqR,QAAQrR,EAAE,EAAE,OAAOR,KAAKuL,KAAK,mBAAmBvL,KAAK+U,yBAAyB,WAAWpN,WAAW,MAAMA,UAAU9G,EAAEkI,OAAOpI,GAAGX,KAAK+U,yBAAyB,gBAAgBtU,EAAE,YAAET,MAAMS,EAAEuU,iBAAiBrU,GAAGX,KAAKuL,KAAK,YAAY,IAAI1J,EAAEhB,IAAIJ,EAAEuU,iBAAiB,QAAQ,iBAAiBtU,GAAG,OAAOV,KAAKqU,aAAajI,KAAMhL,GAAGA,EAAEkE,KAAK5E,GAAI,yBAAyB,OAAOV,KAAK+U,yBAAyB,WAAWpN,UAAU,yBAAyBjH,GAAG,MAAMU,EAAE,YAAE,iBAAiBV,EAAE,UAAUA,GAAG,IAAIW,EAAE,EAAEb,EAAER,KAAKwU,oBAAoB,GAAG3C,OAAOhR,EAAEb,KAAKwU,oBAAoB,GAAGK,QAAQlU,EAAE,KAAK,MAAMC,EAAE,CAAC,EAAE,EAAE,GAAG2G,OAAQ7G,GAAGA,GAAGU,GAAI,IAAI,MAAMF,KAAKN,EAAE,CAAC,MAAMF,EAAEV,KAAKwU,oBAAoBtT,GAAG,YAAER,EAAEmR,UAAUxQ,EAAEH,EAAEV,EAAEE,EAAEmR,OAAOhR,EAAEH,EAAEmU,QAAQnU,EAAEoU,gBAAgBnU,EAAE,CAACmU,cAAcpU,EAAEoU,cAAcD,QAAQnU,EAAEmU,WAAW,MAAMpU,EAAE,CAAC,EAAE,EAAE,GAAG8G,OAAQ7G,GAAGA,EAAEW,GAAGX,GAAGU,GAAI,IAAIoN,EAAE,KAAK,IAAI,MAAMtN,KAAKT,EAAE,CAAC,MAAMoR,OAAOnR,EAAEoU,cAAc1T,EAAEyT,QAAQxT,GAAGrB,KAAKwU,oBAAoBtT,GAAGR,IAAI8N,EAAE,CAACqD,OAAOnR,EAAEmU,QAAQxT,IAAID,IAAIT,EAAE,CAACmU,cAAc1T,EAAEyT,QAAQxT,IAAI,MAAM+S,EAAjyD,SAAW1T,EAAEU,GAAG,MAAMC,EAAE,GAAGb,EAAE,GAAG,OAAOE,GAAGA,EAAE2F,QAAS3F,IAAI,MAAMG,EAAE,IAAI,IAAE,GAAGA,EAAEiG,KAAKpG,EAAEU,GAAGZ,EAAEK,EAAEyE,IAAIzE,EAAE,MAAMH,EAAEoL,gBAAgB,IAAIpL,EAAEoL,cAAc,CAAC,MAAM1K,EAAEZ,EAAEE,EAAEoL,eAAe1K,EAAEuG,YAAYvG,EAAEuG,UAAU,IAAIvG,EAAEuG,UAAUsN,QAAQpU,QAAQQ,EAAE4T,QAAQpU,KAAMQ,GAAGA,EAA8iDsE,CAAEnF,EAAEK,GAAGkB,EAAE,IAAIkS,IAAIiB,EAAE,IAAIvL,IAAI,GAAG6E,EAAE,IAAI,MAAMtN,KAAKsN,EAAEqD,OAAO9P,EAAEmS,IAAIhT,EAAEoE,GAAGpE,GAAG,GAAGP,EAAE,IAAI,MAAMO,KAAKP,EAAEmU,cAAcI,EAAEnR,IAAI7C,GAAG,OAA3oD,SAASQ,EAAEhB,EAAEU,GAAGV,GAAGA,EAAE2F,QAAS3F,IAAIU,EAAEV,GAAGA,EAAEiH,WAAWjH,EAAEiH,UAAU5G,QAAQW,EAAEhB,EAAEiH,UAAUvG,KAA4jDM,CAAE0S,EAAG1T,IAAI8N,GAAG9N,EAAEoG,KAAK/E,EAAEqE,IAAI1F,EAAE4E,IAAIkJ,EAAEqG,SAASlU,GAAGD,EAAEoG,KAAK,CAACqO,kBAAkBD,EAAE3P,IAAI7E,EAAE4E,KAAK3E,EAAEkU,WAAY,CAAC9L,OAAO,YAAE1H,GAAGsG,UAAU,IAAI9F,EAAE,CAACuT,MAAMhB,KAAK,KAAK1T,EAAEU,GAAGmC,MAAMuD,KAAKpG,EAAEU,GAAGpB,KAAKqV,cAAc3U,EAAEU,GAAG,uBAAuBV,EAAEU,GAAGA,IAAIA,EAAEiF,QAAS3F,IAAIA,EAAEmL,OAAO,KAAKnL,EAAEoE,MAAM,OAAQ9E,KAAK6P,QAAQpK,OAAO,oBAAoB/E,IAAIA,EAAE2F,QAAS3F,IAAIA,EAAEmL,OAAO7L,KAAKU,EAAEoE,MAAM9E,OAAQA,KAAK6P,QAAQ9L,IAAI,CAACrD,EAAEqP,GAAG,YAAY,EAAGC,KAAKtP,MAAMA,EAAEmL,OAAO7L,KAAKU,EAAEoE,MAAM9E,OAAQU,EAAEqP,GAAG,eAAe,EAAGC,KAAKtP,MAAMA,EAAEmL,OAAO,KAAKnL,EAAEoE,MAAM,QAAS,mBAAmB,SAAS9E,KAAKgC,MAAMhC,KAAK6P,QAAQ9L,IAAIrD,EAAEqP,GAAG,iBAAkBrP,IAAI0T,EAAEhQ,MAAM,IAAI,IAAE,qCAAqC,yEAAyE,CAACU,MAAM9E,QAAQU,EAAEuP,mBAAoB,sBAAsB,OAAO,YAAE,CAAC,YAAE,CAACtJ,UAAS,KAAM5E,EAAE2E,UAAU,oBAAe,GAAQ,YAAE,CAAC,YAAE,CAACC,UAAS,EAAG3E,KAAK,IAAEmK,OAAO,QAAMpK,EAAE2E,UAAU,wBAAmB,GAAQ,YAAE,CAAC,YAAE,CAAC+J,MAAM,KAAKzO,KAAKH,EAAE+E,KAAK,CAACE,MAAK,EAAG6E,MAAM,CAAC1C,WAAU,EAAGD,cAAa,OAAQjH,EAAE2E,UAAU,iBAAY,GAAQ,YAAE,CAAC,YAAE,CAACC,UAAS,KAAM5E,EAAE2E,UAAU,2BAAsB,GAAQ3E,EAAE,YAAE,CAAC,YAAE,sCAAsCA,GAAGA","file":"static/js/59.82bcdbb7.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from\"../../request.js\";import{constant as i}from\"../../core/arrayUtils.js\";import e from\"../../core/Error.js\";import{clone as a}from\"../../core/lang.js\";class l{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability=\"unknown\",this.byteSize=40}getAvailability(t,i){if(\"unknown\"!==this._allAvailability)return this._allAvailability;const e=(t-this.location.top)*this.location.width+(i-this.location.left),a=e%8,l=e>>3,o=this._tileAvailabilityBitSet;return l<0||l>o.length?\"unknown\":o[l]&1<<a?\"available\":\"unavailable\"}_updateFromData(t){const i=this.location.width,e=this.location.height;let a=!0,l=!0;const o=Math.ceil(i*e/8),n=new Uint8Array(o);let r=0;for(let s=0;s<t.length;s++){const i=s%8;t[s]?(l=!1,n[r]|=1<<i):a=!1,7===i&&++r}l?this._allAvailability=\"unavailable\":a?this._allAvailability=\"available\":(this._allAvailability=\"unknown\",this._tileAvailabilityBitSet=n,this.byteSize+=n.length)}static fromDefinition(a,o){const r=a.service.request||t,{row:s,col:h,width:c,height:m}=a,d={query:{f:\"json\"}};return o=o?{...d,...o}:d,r(n(a),o).then((t=>t.data)).catch((t=>{if(t&&t.details&&422===t.details.httpStatus)return{location:{top:s,left:h,width:c,height:m},valid:!0,data:i(c*m,0)};throw t})).then((t=>{if(t.location&&(t.location.top!==s||t.location.left!==h||t.location.width!==c||t.location.height!==m))throw new e(\"tilemap:location-mismatch\",\"Tilemap response for different location than requested\",{response:t,definition:{top:s,left:h,width:c,height:m}});return l.fromJSON(t)}))}static fromJSON(t){l.validateJSON(t);const i=new l;return i.location=Object.freeze(a(t.location)),i._updateFromData(t.data),Object.freeze(i)}static validateJSON(t){if(!t||!t.location)throw new e(\"tilemap:missing-location\",\"Location missing from tilemap response\");if(!1===t.valid)throw new e(\"tilemap:invalid\",\"Tilemap response was marked as invalid\");if(!t.data)throw new e(\"tilemap:missing-data\",\"Data missing from tilemap response\");if(!Array.isArray(t.data))throw new e(\"tilemap:data-mismatch\",\"Data must be an array of numbers\");if(t.data.length!==t.location.width*t.location.height)throw new e(\"tilemap:data-mismatch\",\"Number of data items does not match width/height of tilemap\")}}function o(t){return`${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}function n(t){let i;if(\"vector-tile\"===t.service.type)i=`${t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;else{const e=t.service.tileServers;i=`${e&&e.length?e[t.row%e.length]:t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}const e=t.service.query;return e&&(i=`${i}?${e}`),i}export default l;export{l as Tilemap,o as tilemapDefinitionId};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../request.js\";import i from\"../../core/Accessor.js\";import l from\"../../core/Error.js\";import r from\"../../core/Handles.js\";import s from\"../../core/Logger.js\";import a from\"../../core/LRUCache.js\";import o from\"../../core/PooledArray.js\";import{onAbort as n,createAbortError as c,isAbortError as h,createAbortController as p,isAborted as m}from\"../../core/promiseUtils.js\";import{waitTicks as u}from\"../../core/scheduling.js\";import{objectToQuery as f}from\"../../core/urlUtils.js\";import{init as v}from\"../../core/watchUtils.js\";import{property as y}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import{cast as _}from\"../../core/accessorSupport/decorators/cast.js\";import{subclass as d}from\"../../core/accessorSupport/decorators/subclass.js\";import{tilemapDefinitionId as b,Tilemap as g}from\"./Tilemap.js\";var w;const T=s.getLogger(\"esri.layers.support.TilemapCache\");let j=w=class extends i{constructor(e){super(e),this._handles=new r,this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2097152,this.request=t,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new a(this.cacheByteSize),this._handles.add([this.watch([\"layer.parsedUrl\",\"layer.tileServers?\"],(()=>this._initializeTilemapDefinition())),v(this,\"layer.tileInfo.lods\",(e=>this._initializeAvailableLevels(e)),!0)]),this._initializeTilemapDefinition()}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}castLevels(e){return e<=2?(T.error(\"Minimum levels for Tilemap is 3, but got \",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,i,r){if(!this._availableLevels[e])return Promise.reject(new l(\"tilemap-cache:level-unavailable\",`Level ${e} is unavailable in the service`));const s=this._tmpTilemapDefinition,a=this._tilemapFromCache(e,t,i,s);if(a)return Promise.resolve(a);const o=r&&r.signal;return r={...r,signal:null},new Promise(((e,t)=>{n(o,(()=>t(c())));const i=b(s);let l=this._pendingTilemapRequests[i];if(!l){l=g.fromDefinition(s,r).then((e=>(this._tilemapCache.put(i,e,e.byteSize),e)));const e=()=>delete this._pendingTilemapRequests[i];this._pendingTilemapRequests[i]=l,l.then(e,e)}l.then(e,t)}))}getAvailability(e,t,i){if(!this._availableLevels[e])return\"unavailable\";const l=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return l?l.getAvailability(t,i):\"unknown\"}getAvailabilityUpsample(e,t,i,l){l.level=e,l.row=t,l.col=i;const r=this.layer.tileInfo;for(r.updateTileInfo(l);;){const e=this.getAvailability(l.level,l.row,l.col);if(\"unavailable\"!==e)return e;if(!r.upsampleTile(l))return\"unavailable\"}}fetchAvailability(e,t,i,r){return this._availableLevels[e]?this.fetchTilemap(e,t,i,r).catch((e=>e)).then((r=>{if(r instanceof g){const s=r.getAvailability(t,i);return\"unavailable\"===s?Promise.reject(new l(\"tile-map:tile-unavailable\",\"Tile is not available\",{level:e,row:t,col:i})):s}if(h(r))throw r;return\"unknown\"})):Promise.reject(new l(\"tilemap-cache:level-unavailable\",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,i,l,r){l.level=e,l.row=t,l.col=i;const s=this.layer.tileInfo;s.updateTileInfo(l);const a=this.fetchAvailability(e,t,i,r).catch((e=>{if(h(e))throw e;if(s.upsampleTile(l))return this.fetchAvailabilityUpsample(l.level,l.row,l.col,l);throw e}));return this._fetchAvailabilityUpsamplePrefetch(l.id,e,t,i,r,a),a}async _fetchAvailabilityUpsamplePrefetch(e,t,i,l,r,s){if(!this._prefetchingEnabled)return;const a=`prefetch-${e}`;if(this._handles.has(a))return;const o=p();s.then((()=>o.abort()),(()=>o.abort()));let n=!1;const c={remove(){n||(n=!0,o.abort())}};if(this._handles.add(c,a),await u(10,o.signal).catch((()=>{})),n||(n=!0,this._handles.remove(a)),m(o))return;const h={id:e,level:t,row:i,col:l},f={...r,signal:o.signal},v=this.layer.tileInfo;for(let p=0;w._prefetches.length<w._maxPrefetch&&v.upsampleTile(h);++p){const e=this.fetchAvailability(h.level,h.row,h.col,f);w._prefetches.push(e);const t=()=>{w._prefetches.removeUnordered(e)};e.then(t,t)}}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?f(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,i,l){l.level=e,l.row=t-t%this.size,l.col=i-i%this.size;const r=b(l);return this._tilemapCache.get(r)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach((e=>this._availableLevels[e.level]=!0))}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,i,l)=>!!e._tilemapFromCache(t,i,l,e._tmpTilemapDefinition)}}};j._maxPrefetch=4,j._prefetches=new o({initialSize:w._maxPrefetch}),e([y({constructOnly:!0,type:Number})],j.prototype,\"levels\",void 0),e([_(\"levels\")],j.prototype,\"castLevels\",null),e([y({readOnly:!0,type:Number})],j.prototype,\"size\",null),e([y({constructOnly:!0,type:Number})],j.prototype,\"cacheByteSize\",void 0),e([y({constructOnly:!0})],j.prototype,\"layer\",void 0),e([y({constructOnly:!0})],j.prototype,\"request\",void 0),j=w=e([d(\"esri.layers.support.TilemapCache\")],j);export{j as TilemapCache};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"./TileInfo.js\";const r={type:e,json:{origins:{service:{read:{source:[\"tileInfo\",\"minScale\",\"maxScale\",\"minLOD\",\"maxLOD\"],reader:n}}}}};function n(r,n,l,o){if(!r)return null;const{minScale:i,maxScale:t,minLOD:m,maxLOD:s}=n;if(null!=m&&null!=s)return o&&o.ignoreMinMaxLOD?e.fromJSON(r):e.fromJSON({...r,lods:r.lods.filter((({level:e})=>null!=e&&e>=m&&e<=s))});if(0!==i&&0!==t){const n=e=>Math.round(1e4*e)/1e4,l=i?n(i):1/0,o=t?n(t):-1/0;return e.fromJSON({...r,lods:r.lods.filter((e=>{const r=n(e.scale);return r<=l&&r>=o}))})}return e.fromJSON(r)}export{n as readServiceTileInfo,r as serviceTileInfoProperty};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction e(e,n,i){if(n.flatten((({sublayers:e})=>e)).length!==e.length)return!0;return!!e.some((e=>e.originIdOf(\"minScale\")>i||e.originIdOf(\"maxScale\")>i||e.originIdOf(\"renderer\")>i||e.originIdOf(\"labelingInfo\")>i||e.originIdOf(\"opacity\")>i||e.originIdOf(\"labelsVisible\")>i||e.originIdOf(\"source\")>i))||!r(e,n)}function n(e,n,i){return!!e.some((e=>{const n=e.source;return!(!n||\"map-layer\"===n.type&&n.mapLayerId===e.id&&(!n.gdbVersion||n.gdbVersion===i.gdbVersion))||e.originIdOf(\"renderer\")>2||e.originIdOf(\"labelingInfo\")>2||e.originIdOf(\"opacity\")>2||e.originIdOf(\"labelsVisible\")>2}))||!r(e,n)}function r(e,n){if(!e||!e.length)return!0;const r=n.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).map((e=>e.id)).toArray();if(e.length>r.length)return!1;let i=0;const o=r.length;for(const{id:t}of e){for(;i<o&&r[i]!==t;)i++;if(i>=o)return!1}return!0}function i(e){return!!e&&e.some((e=>null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale))}export{n as isExportDynamic,i as isSublayerOverhaul,e as shouldWriteSublayerStructure};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{reader as o}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import{serviceTileInfoProperty as i}from\"../support/serviceTileInfoProperty.js\";import{TilemapCache as p}from\"../support/TilemapCache.js\";import a from\"../../geometry/SpatialReference.js\";const s=s=>{let l=class extends s{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(e,r){return null!=r.minLOD&&null!=r.maxLOD?e:0}readMaxScale(e,r){return null!=r.minLOD&&null!=r.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,r){return r.capabilities&&r.capabilities.indexOf(\"Tilemap\")>-1?new p({layer:this}):null}};return e([r({json:{read:{source:\"copyrightText\"}}})],l.prototype,\"copyright\",void 0),e([r()],l.prototype,\"minScale\",void 0),e([o(\"service\",\"minScale\")],l.prototype,\"readMinScale\",null),e([r()],l.prototype,\"maxScale\",void 0),e([o(\"service\",\"maxScale\")],l.prototype,\"readMaxScale\",null),e([r({type:a})],l.prototype,\"spatialReference\",void 0),e([r({readOnly:!0})],l.prototype,\"supportsBlankTile\",null),e([r(i)],l.prototype,\"tileInfo\",void 0),e([r()],l.prototype,\"tilemapCache\",void 0),e([o(\"service\",\"tilemapCache\",[\"capabilities\"])],l.prototype,\"readTilemapCache\",null),e([r()],l.prototype,\"version\",void 0),l=e([t(\"esri.layers.mixins.ArcGISCachedService\")],l),l};export{s as ArcGISCachedService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import r from\"../../PopupTemplate.js\";import\"../../renderers/ClassBreaksRenderer.js\";import\"../../renderers/DictionaryRenderer.js\";import\"../../renderers/DotDensityRenderer.js\";import\"../../renderers/HeatmapRenderer.js\";import\"../../renderers/Renderer.js\";import\"../../renderers/SimpleRenderer.js\";import\"../../renderers/UniqueValueRenderer.js\";import\"../../renderers/support/jsonUtils.js\";import{rendererTypes as i,webSceneRendererTypes as t}from\"../../renderers/support/types.js\";import o from\"../../request.js\";import{isSymbol3D as s}from\"../../symbols.js\";import a from\"../../core/Collection.js\";import l from\"../../core/Error.js\";import{HandleOwnerMixin as n}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as p}from\"../../core/Identifiable.js\";import{clone as y}from\"../../core/lang.js\";import d from\"../../core/Loadable.js\";import u from\"../../core/Logger.js\";import{MultiOriginJSONMixin as c}from\"../../core/MultiOriginJSONSupport.js\";import{objectToQuery as f}from\"../../core/urlUtils.js\";import{property as m}from\"../../core/accessorSupport/decorators/property.js\";import{getProperties as h}from\"../../core/accessorSupport/utils.js\";import{cast as b}from\"../../core/accessorSupport/decorators/cast.js\";import\"../../core/has.js\";import{reader as g}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as v}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as S}from\"../../core/accessorSupport/decorators/writer.js\";import{ensureInteger as I,ensureType as w,Integer as j,ensureClass as L}from\"../../core/accessorSupport/ensureType.js\";import{nameToId as D}from\"../../core/accessorSupport/PropertyOrigin.js\";import O from\"./FeatureType.js\";import x from\"./Field.js\";import P from\"./FieldsIndex.js\";import F from\"./LabelClass.js\";import{DataLayerSource as _}from\"./source/DataLayerSource.js\";import{MapLayerSource as E}from\"./source/MapLayerSource.js\";import M from\"../../rest/support/Query.js\";import{createPopupTemplate as N}from\"../../support/popupUtils.js\";import T from\"../../geometry/Extent.js\";var V;function k(e){return e&&\"esriSMS\"===e.type}function C(e,r,i){var t;const o=this.originIdOf(r)>=D(i.origin);return{ignoreOrigin:!0,allowNull:o,enabled:!!i&&(\"map-image\"===(null==(t=i.layer)?void 0:t.type)&&(i.writeSublayerStructure||o))}}function A(e,r,i){var t;return{enabled:!!i&&(\"tile\"===(null==(t=i.layer)?void 0:t.type)&&this._isOverridden(r))}}function q(e,r,i){return{ignoreOrigin:!0,enabled:i&&i.writeSublayerStructure||!1}}function U(e,r,i){return{ignoreOrigin:!0,enabled:!!i&&(i.writeSublayerStructure||this.originIdOf(r)>=D(i.origin))}}const $=u.getLogger(\"esri.layers.support.Sublayer\");let J=0;const R=new Set;R.add(\"layer\"),R.add(\"parent\"),R.add(\"loaded\"),R.add(\"loadStatus\"),R.add(\"loadError\"),R.add(\"loadWarnings\");let B=V=class extends(n(c(p(d)))){constructor(e){super(e),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null}async load(e){return this.addResolvingPromise((async()=>{var r;if(!this.layer&&!this.url)throw new l(\"sublayer:missing-layer\",\"Sublayer can't be loaded without being part of a layer\",{sublayer:this});let i=null;if(!this.layer||this.originIdOf(\"url\")>2||\"data-layer\"===(null==(r=this.source)?void 0:r.type)){i=(await o(this.url,{responseType:\"json\",query:{f:\"json\"},...e})).data}else{var t;let r=this.id;\"map-layer\"===(null==(t=this.source)?void 0:t.type)&&(r=this.source.mapLayerId),i=await this.layer.fetchSublayerInfo(r,e)}i&&(this.sourceJSON=i,this.read({layerDefinition:i},{origin:\"service\"}))})()),this}readCapabilities(e,r){const i=(e=(r=r.layerDefinition||r).capabilities||e)?e.toLowerCase().split(\",\").map((e=>e.trim())):[];return{exportMap:{supportsModification:!!r.canModifyLayer},operations:{supportsQuery:-1!==i.indexOf(\"query\")}}}set definitionExpression(e){this._setAndNotifyLayer(\"definitionExpression\",e)}get fieldsIndex(){return new P(this.fields||[])}readGlobalIdFieldFromService(e,r){if((r=r.layerDefinition||r).globalIdField)return r.globalIdField;if(r.fields)for(const i of r.fields)if(\"esriFieldTypeGlobalID\"===i.type)return i.name}get id(){const e=this._get(\"id\");return null==e?J++:e}set id(e){this._get(\"id\")!==e&&(!1!==this.get(\"layer.capabilities.exportMap.supportsDynamicLayers\")?this._set(\"id\",e):this._logLockedError(\"id\",\"capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'\"))}set labelingInfo(e){this._setAndNotifyLayer(\"labelingInfo\",e)}writeLabelingInfo(e,r,i,t){e&&e.length&&(r.layerDefinition={drawingInfo:{labelingInfo:e.map((e=>e.write({},t)))}})}set labelsVisible(e){this._setAndNotifyLayer(\"labelsVisible\",e)}set layer(e){this._set(\"layer\",e),this.sublayers&&this.sublayers.forEach((r=>r.layer=e))}set listMode(e){this._set(\"listMode\",e)}set minScale(e){this._setAndNotifyLayer(\"minScale\",e)}readMinScale(e,r){return r.minScale||r.layerDefinition&&r.layerDefinition.minScale||0}set maxScale(e){this._setAndNotifyLayer(\"maxScale\",e)}readMaxScale(e,r){return r.maxScale||r.layerDefinition&&r.layerDefinition.maxScale||0}readObjectIdFieldFromService(e,r){if((r=r.layerDefinition||r).objectIdField)return r.objectIdField;if(r.fields)for(const i of r.fields)if(\"esriFieldTypeOID\"===i.type)return i.name}set opacity(e){this._setAndNotifyLayer(\"opacity\",e)}readOpacity(e,r){const i=r.layerDefinition;return 1-.01*(null!=i.transparency?i.transparency:i.drawingInfo.transparency)}writeOpacity(e,r,i,t){r.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,r){this.parent&&this.parent!==this.layer?r.parentLayerId=I(this.parent.id):r.parentLayerId=-1}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){if(e)for(const r of e.getSymbols())if(s(r)){$.warn(\"Sublayer renderer should use 2D symbols\");break}this._setAndNotifyLayer(\"renderer\",e)}get source(){return this._get(\"source\")||new E({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer(\"source\",e)}set sublayers(e){this._handleSublayersChange(e,this._get(\"sublayers\")),this._set(\"sublayers\",e)}castSublayers(e){return w(a.ofType(V),e)}writeSublayers(e,r,i){this.get(\"sublayers.length\")&&(r[i]=this.sublayers.map((e=>e.id)).toArray().reverse())}readTypeIdField(e,r){let i=(r=r.layerDefinition||r).typeIdField;if(i&&r.fields){i=i.toLowerCase();const e=r.fields.find((e=>e.name.toLowerCase()===i));e&&(i=e.name)}return null}get url(){var e,r;const i=null!=(e=null==(r=this.layer)?void 0:r.parsedUrl)?e:this._lastParsedUrl,t=this.source;if(!i)return null;if(this._lastParsedUrl=i,\"map-layer\"===(null==t?void 0:t.type))return`${i.path}/${t.mapLayerId}`;const o={layer:JSON.stringify({source:this.source})};return`${i.path}/dynamicLayer?${f(o)}`}set url(e){e?this._override(\"url\",e):this._clearOverride(\"url\")}set visible(e){this._setAndNotifyLayer(\"visible\",e)}writeVisible(e,r,i,t){r[i]=this.getAtOrigin(\"defaultVisibility\",\"service\")||e}clone(){const{store:e}=h(this),r=new V;return h(r).store=e.clone(R),this.commitProperty(\"url\"),r._lastParsedUrl=this._lastParsedUrl,r}createPopupTemplate(e){return N(this,e)}createQuery(){return new M({returnGeometry:!0,where:this.definitionExpression||\"1=1\"})}async createFeatureLayer(){var e,r;if(this.hasOwnProperty(\"sublayers\"))return null;const i=null==(e=this.layer)?void 0:e.parsedUrl,t=new(0,(await import(\"../FeatureLayer.js\")).default)({url:i.path});return i&&this.source&&(\"map-layer\"===this.source.type?t.layerId=this.source.mapLayerId:t.dynamicDataSource=this.source),null!=this.layer.refreshInterval&&(t.refreshInterval=this.layer.refreshInterval),this.definitionExpression&&(t.definitionExpression=this.definitionExpression),this.originIdOf(\"labelingInfo\")>2&&(t.labelingInfo=y(this.labelingInfo)),this.originIdOf(\"labelsVisible\")>0&&(t.labelsVisible=this.labelsVisible),this.originIdOf(\"legendEnabled\")>0&&(t.legendEnabled=this.legendEnabled),this.originIdOf(\"visible\")>0&&(t.visible=this.visible),this.originIdOf(\"minScale\")>0&&(t.minScale=this.minScale),this.originIdOf(\"maxScale\")>0&&(t.maxScale=this.maxScale),this.originIdOf(\"opacity\")>0&&(t.opacity=this.opacity),this.originIdOf(\"popupTemplate\")>0&&(t.popupTemplate=y(this.popupTemplate)),this.originIdOf(\"renderer\")>2&&(t.renderer=y(this.renderer)),\"data-layer\"===(null==(r=this.source)?void 0:r.type)&&(t.dynamicDataSource=this.source.clone()),this.originIdOf(\"title\")>0&&(t.title=this.title),\"map-image\"===this.layer.type&&this.layer.originIdOf(\"customParameters\")>0&&(t.customParameters=this.layer.customParameters),\"tile\"===this.layer.type&&this.layer.originIdOf(\"customParameters\")>0&&(t.customParameters=this.layer.customParameters),t}getFeatureType(e){const{typeIdField:r,types:i}=this;if(!r||!e)return null;const t=e.attributes?e.attributes[r]:void 0;if(null==t)return null;let o=null;return i.some((e=>{const{id:r}=e;return null!=r&&(r.toString()===t.toString()&&(o=e),!!o)})),o}getFieldDomain(e,r){const i=r&&r.feature,t=this.getFeatureType(i);if(t){const r=t.domains&&t.domains[e];if(r&&\"inherited\"!==r.type)return r}return this._getLayerDomain(e)}async queryFeatures(e=this.createQuery(),r){var i,t,o,s;if(await this.load(),!this.get(\"capabilities.operations.supportsQuery\"))throw new l(\"Sublayer.queryFeatures\",\"this layer doesn't support queries.\");const[{executeQuery:a},{default:n}]=await Promise.all([import(\"../../rest/query/operations/query.js\"),import(\"../../rest/support/FeatureSet.js\")]),p=await a(this.url,M.from(e),null!=(i=null==(t=this.layer)?void 0:t.spatialReference)?i:null,{...r,query:{...null==(o=this.layer)?void 0:o.customParameters,token:null==(s=this.layer)?void 0:s.apiKey}}),y=n.fromJSON(p.data);if(null!=y&&y.features)for(const l of y.features)l.sourceLayer=this;return y}toExportImageJSON(){var e;const r={id:this.id,source:(null==(e=this.source)?void 0:e.toJSON())||{mapLayerId:this.id,type:\"mapLayer\"}};this.definitionExpression&&(r.definitionExpression=this.definitionExpression);const i=[\"renderer\",\"labelingInfo\",\"opacity\",\"labelsVisible\"].reduce(((e,r)=>(e[r]=this.originIdOf(r),e)),{});if(Object.keys(i).some((e=>i[e]>2))){const e=r.drawingInfo={};i.renderer>2&&(e.renderer=this.renderer?this.renderer.toJSON():null),i.labelsVisible>2&&(e.showLabels=this.labelsVisible),this.labelsVisible&&i.labelingInfo>2&&(e.labelingInfo=this.labelingInfo?this.labelingInfo.map((e=>e.write({},{origin:\"service\",layer:this.layer}))):null,e.showLabels=!0),i.opacity>2&&(e.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(e.renderer)}return r}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,(e=>{e.color||\"esriSMSX\"!==e.style&&\"esriSMSCross\"!==e.style||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])}))}_forEachSimpleMarkerSymbols(e,r){if(e){const i=\"uniqueValueInfos\"in e?e.uniqueValueInfos:\"classBreakInfos\"in e?e.classBreakInfos:[];for(const e of i)k(e.symbol)&&r(e.symbol);\"symbol\"in e&&k(e.symbol)&&r(e.symbol),\"defaultSymbol\"in e&&k(e.defaultSymbol)&&r(e.defaultSymbol)}}_setAndNotifyLayer(e,r){const i=this.layer,t=this._get(e);let o,s;switch(e){case\"definitionExpression\":o=\"supportsSublayerDefinitionExpression\";case\"minScale\":case\"maxScale\":case\"visible\":o=\"supportsSublayerVisibility\";break;case\"labelingInfo\":case\"labelsVisible\":case\"opacity\":case\"renderer\":case\"source\":o=\"supportsDynamicLayers\",s=\"supportsModification\"}const a=h(this).getDefaultOrigin();if(\"service\"!==a){if(o&&!1===this.get(`layer.capabilities.exportMap.${o}`))return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${o}'`);if(s&&!1===this.get(`capabilities.exportMap.${s}`))return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${s}'`)}\"source\"!==e||\"not-loaded\"===this.loadStatus?(this._set(e,r),\"service\"!==a&&t!==r&&i&&i.emit&&i.emit(\"sublayer-update\",{propertyName:e,target:this})):this._logLockedError(e,\"'source' can't be changed after calling sublayer.load()\")}_handleSublayersChange(e,r){r&&(r.forEach((e=>{e.parent=null,e.layer=null})),this.handles.removeAll()),e&&(e.forEach((e=>{e.parent=this,e.layer=this.layer})),this.handles.add([e.on(\"after-add\",(({item:e})=>{e.parent=this,e.layer=this.layer})),e.on(\"after-remove\",(({item:e})=>{e.parent=null,e.layer=null})),e.on(\"before-changes\",(e=>{const r=this.get(\"layer.capabilities.exportMap.supportsSublayersChanges\");null==r||r||($.error(new l(\"sublayer:sublayers-non-modifiable\",\"Sublayer can't be added, moved, or removed from the layer's sublayers\",{sublayer:this,layer:this.layer})),e.preventDefault())}))]))}_logLockedError(e,r){$.error(new l(\"sublayer:locked\",`Property '${e}' can't be changed on Sublayer from the layer '${this.layer.id}'`,{reason:r,sublayer:this,layer:this.layer}))}_getLayerDomain(e){const r=this.fieldsIndex.get(e);return r?r.domain:null}};B.test={isMapImageLayerOverridePolicy:e=>e===q||e===C,isTileImageLayerOverridePolicy:e=>e===A},e([m({readOnly:!0})],B.prototype,\"capabilities\",void 0),e([g(\"service\",\"capabilities\",[\"layerDefinition.canModifyLayer\",\"layerDefinition.capabilities\"])],B.prototype,\"readCapabilities\",null),e([m({type:String,value:null,json:{name:\"layerDefinition.definitionExpression\",write:{overridePolicy:C}}})],B.prototype,\"definitionExpression\",null),e([m({type:[x],json:{origins:{service:{read:{source:\"layerDefinition.fields\"}}}}})],B.prototype,\"fields\",void 0),e([m({readOnly:!0})],B.prototype,\"fieldsIndex\",null),e([m({type:T,json:{read:{source:\"layerDefinition.extent\"}}})],B.prototype,\"fullExtent\",void 0),e([m({type:String})],B.prototype,\"globalIdField\",void 0),e([g(\"service\",\"globalIdField\",[\"layerDefinition.globalIdField\",\"layerDefinition.fields\"])],B.prototype,\"readGlobalIdFieldFromService\",null),e([m({type:j,json:{write:{ignoreOrigin:!0}}})],B.prototype,\"id\",null),e([m({value:null,type:[F],json:{read:{source:\"layerDefinition.drawingInfo.labelingInfo\"},write:{target:\"layerDefinition.drawingInfo.labelingInfo\",overridePolicy:q}}})],B.prototype,\"labelingInfo\",null),e([S(\"labelingInfo\")],B.prototype,\"writeLabelingInfo\",null),e([m({type:Boolean,value:!0,json:{read:{source:\"layerDefinition.drawingInfo.showLabels\"},write:{target:\"layerDefinition.drawingInfo.showLabels\",overridePolicy:q}}})],B.prototype,\"labelsVisible\",null),e([m({value:null})],B.prototype,\"layer\",null),e([m({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:\"showLegend\"},write:{target:\"showLegend\",overridePolicy:U}}})],B.prototype,\"legendEnabled\",void 0),e([m({type:[\"show\",\"hide\",\"hide-children\"],value:\"show\",json:{read:!1,write:!1,origins:{\"web-scene\":{read:!0,write:!0}}}})],B.prototype,\"listMode\",null),e([m({type:Number,value:0,json:{write:{overridePolicy:q}}})],B.prototype,\"minScale\",null),e([g(\"minScale\",[\"minScale\",\"layerDefinition.minScale\"])],B.prototype,\"readMinScale\",null),e([m({type:Number,value:0,json:{write:{overridePolicy:q}}})],B.prototype,\"maxScale\",null),e([g(\"maxScale\",[\"maxScale\",\"layerDefinition.maxScale\"])],B.prototype,\"readMaxScale\",null),e([m({type:String})],B.prototype,\"objectIdField\",void 0),e([g(\"service\",\"objectIdField\",[\"layerDefinition.objectIdField\",\"layerDefinition.fields\"])],B.prototype,\"readObjectIdFieldFromService\",null),e([m({type:Number,value:1,json:{write:{target:\"layerDefinition.drawingInfo.transparency\",overridePolicy:q}}})],B.prototype,\"opacity\",null),e([g(\"opacity\",[\"layerDefinition.drawingInfo.transparency\",\"layerDefinition.transparency\"])],B.prototype,\"readOpacity\",null),e([S(\"opacity\")],B.prototype,\"writeOpacity\",null),e([m({json:{type:j,write:{target:\"parentLayerId\",allowNull:!0,overridePolicy:q}}})],B.prototype,\"parent\",void 0),e([S(\"parent\")],B.prototype,\"writeParent\",null),e([m({type:Boolean,value:!0,json:{read:{source:\"disablePopup\",reader:(e,r)=>!r.disablePopup},write:{target:\"disablePopup\",overridePolicy:U,writer(e,r,i){r[i]=!e}}}})],B.prototype,\"popupEnabled\",void 0),e([m({type:r,json:{read:{source:\"popupInfo\"},write:{target:\"popupInfo\",overridePolicy:U}}})],B.prototype,\"popupTemplate\",void 0),e([m({readOnly:!0})],B.prototype,\"defaultPopupTemplate\",null),e([m({types:i,value:null,json:{name:\"layerDefinition.drawingInfo.renderer\",write:{overridePolicy:q},origins:{\"web-scene\":{types:t,name:\"layerDefinition.drawingInfo.renderer\",write:{overridePolicy:q}}}}})],B.prototype,\"renderer\",null),e([m({types:{key:\"type\",base:null,typeMap:{\"data-layer\":_,\"map-layer\":E}},cast(e){if(e){if(\"mapLayerId\"in e)return L(E,e);if(\"dataSource\"in e)return L(_,e)}return e},json:{name:\"layerDefinition.source\",write:{overridePolicy:q}}})],B.prototype,\"source\",null),e([m()],B.prototype,\"sourceJSON\",void 0),e([m({value:null,json:{type:[j],write:{target:\"subLayerIds\",allowNull:!0,overridePolicy:q}}})],B.prototype,\"sublayers\",null),e([b(\"sublayers\")],B.prototype,\"castSublayers\",null),e([S(\"sublayers\")],B.prototype,\"writeSublayers\",null),e([m({type:String,json:{read:{source:\"name\"},write:{target:\"name\",allowNull:!0,overridePolicy:U}}})],B.prototype,\"title\",void 0),e([m({type:String})],B.prototype,\"typeIdField\",void 0),e([g(\"typeIdField\",[\"layerDefinition.typeIdField\"])],B.prototype,\"readTypeIdField\",null),e([m({type:[O],json:{origins:{service:{read:{source:\"layerDefinition.types\"}}}}})],B.prototype,\"types\",void 0),e([m({type:String,json:{read:{source:\"layerUrl\"},write:{target:\"layerUrl\",overridePolicy:A}}})],B.prototype,\"url\",null),e([m({type:Boolean,value:!0,json:{read:{source:\"defaultVisibility\"},write:{target:\"defaultVisibility\",overridePolicy:q}}})],B.prototype,\"visible\",null),e([S(\"visible\")],B.prototype,\"writeVisible\",null),B=V=e([v(\"esri.layers.support.Sublayer\")],B);var Q=B;export default Q;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../geometry.js\";import r from\"../request.js\";import t from\"../core/Error.js\";import{HandleOwnerMixin as s}from\"../core/HandleOwner.js\";import{isSome as i}from\"../core/maybe.js\";import{MultiOriginJSONMixin as o}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as a}from\"../core/promiseUtils.js\";import{urlToObject as l,objectToQuery as n,makeAbsolute as p}from\"../core/urlUtils.js\";import{property as c}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import{cast as u}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/Logger.js\";import{reader as m}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as h}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as d}from\"../core/accessorSupport/decorators/writer.js\";import y from\"./Layer.js\";import{APIKeyMixin as f}from\"./mixins/APIKeyMixin.js\";import{ArcGISCachedService as v}from\"./mixins/ArcGISCachedService.js\";import{ArcGISMapService as g}from\"./mixins/ArcGISMapService.js\";import{ArcGISService as _}from\"./mixins/ArcGISService.js\";import{BlendLayer as S}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as j}from\"./mixins/CustomParametersMixin.js\";import{OperationalLayer as b}from\"./mixins/OperationalLayer.js\";import{PortalLayer as T}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as w}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as O}from\"./mixins/ScaleRangeLayer.js\";import{SublayersOwner as L}from\"./mixins/SublayersOwner.js\";import{parse as R,isHostedAgolService as x,isArcGISUrl as U}from\"./support/arcgisLayerUrl.js\";import{url as P}from\"./support/commonProperties.js\";import A from\"./support/Sublayer.js\";import W from\"../geometry/SpatialReference.js\";const I=[\"Canvas/World_Dark_Gray_Base\",\"Canvas/World_Dark_Gray_Reference\",\"Canvas/World_Light_Gray_Base\",\"Canvas/World_Light_Gray_Reference\",\"Elevation/World_Hillshade\",\"Elevation/World_Hillshade_Dark\",\"Ocean/World_Ocean_Base\",\"Ocean/World_Ocean_Reference\",\"Ocean_Basemap\",\"Reference/World_Boundaries_and_Places\",\"Reference/World_Boundaries_and_Places_Alternate\",\"Reference/World_Transportation\",\"World_Imagery\",\"World_Street_Map\",\"World_Topo_Map\"];let M=class extends(S(L(O(w(b(T(v(g(_(o(s(f(j(y)))))))))))))){constructor(...e){super(...e),this.listMode=\"show\",this.isReference=null,this.operationalLayerType=\"ArcGISTiledMapServiceLayer\",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type=\"tile\",this.url=null}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){const r=i(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Map Service\"]},e).catch(a).then((()=>this._fetchService(r)))),Promise.resolve(this)}get attributionDataUrl(){var e;const r=null==(e=this.parsedUrl)?void 0:e.path.toLowerCase();return r&&this._getDefaultAttribution(this._getMapName(r))}readSpatialReference(e,r){return(e=e||r.tileInfo&&r.tileInfo.spatialReference)&&W.fromJSON(e)}writeSublayers(e,r,t,s){if(!this.loaded||!e)return;const i=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray(),o=[],a={writeSublayerStructure:!1,...s};i.forEach((e=>{const r=e.write({},a);o.push(r)}));o.some((e=>Object.keys(e).length>1))&&(r.layers=o)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl.path)}castTileServers(e){return Array.isArray(e)?e.map((e=>l(e).path)):null}fetchTile(e,t,s,i={}){const{signal:o,timestamp:a}=i,l=this.getTileUrl(e,t,s),n={responseType:\"image\",signal:o};return null!=a&&(n.query={_ts:i.timestamp}),r(l,n).then((e=>e.data))}getTileUrl(e,r,t){const s=!this.tilemapCache&&this.supportsBlankTile,i=n({...this.parsedUrl.query,blankTile:!s&&null,...this.customParameters,token:this.apiKey}),o=this.tileServers;return`${o&&o.length?o[r%o.length]:this.parsedUrl.path}/tile/${e}/${r}/${t}${i?\"?\"+i:\"\"}`}_fetchService(e){return new Promise(((s,o)=>{if(this.sourceJSON){if(null!=this.sourceJSON.bandCount&&null!=this.sourceJSON.pixelSizeX)throw new t(\"tile-layer:unsupported-url\",\"use ImageryTileLayer to open a tiled image service\");return void s({data:this.sourceJSON})}if(!this.parsedUrl)throw new t(\"tile-layer:undefined-url\",\"layer's url is not defined\");const a=R(this.parsedUrl.path);if(i(a)&&\"ImageServer\"===a.serverType)throw new t(\"tile-layer:unsupported-url\",\"use ImageryTileLayer to open a tiled image service\");r(this.parsedUrl.path,{query:{f:\"json\",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:\"json\",signal:e}).then(s,o)})).then((r=>{if(r.ssl&&(this.url=this.url.replace(/^http:/i,\"https:\")),this.sourceJSON=r.data,this.read(r.data,{origin:\"service\",url:this.parsedUrl}),10.1===this.version&&!x(this.url))return this._fetchServerVersion(this.url,e).then((e=>{this.read({currentVersion:e})})).catch((()=>{}))}))}_fetchServerVersion(e,s){if(!U(e))return Promise.reject();const i=e.replace(/(.*\\/rest)\\/.*/i,\"$1\")+\"/info\";return r(i,{query:{f:\"json\",...this.customParameters,token:this.apiKey},responseType:\"json\",signal:s}).then((e=>{if(e.data&&e.data.currentVersion)return e.data.currentVersion;throw new t(\"tile-layer:version-not-available\")}))}_getMapName(e){const r=e.match(/^(?:https?:)?\\/\\/(server\\.arcgisonline\\.com|services\\.arcgisonline\\.com|ibasemaps-api\\.arcgis\\.com)\\/arcgis\\/rest\\/services\\/([^\\/]+(\\/[^\\/]+)*)\\/mapserver/i);return r&&r[2]}_getDefaultAttribution(e){if(!e)return;let r;e=e.toLowerCase();for(let t=0,s=I.length;t<s;t++)if(r=I[t],r.toLowerCase().indexOf(e)>-1)return p(\"//static.arcgis.com/attribution/\"+r)}_getDefaultTileServers(e){const r=-1!==e.search(/^(?:https?:)?\\/\\/server\\.arcgisonline\\.com/i),t=-1!==e.search(/^(?:https?:)?\\/\\/services\\.arcgisonline\\.com/i);return r||t?[e,e.replace(r?/server\\.arcgisonline/i:/services\\.arcgisonline/i,r?\"services.arcgisonline\":\"server.arcgisonline\")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile.__isDefault__}};e([c({readOnly:!0})],M.prototype,\"attributionDataUrl\",null),e([c({type:[\"show\",\"hide\",\"hide-children\"]})],M.prototype,\"listMode\",void 0),e([c({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],M.prototype,\"isReference\",void 0),e([c({readOnly:!0,type:[\"ArcGISTiledMapServiceLayer\"]})],M.prototype,\"operationalLayerType\",void 0),e([c({type:Boolean})],M.prototype,\"resampling\",void 0),e([c()],M.prototype,\"sourceJSON\",void 0),e([c({type:W})],M.prototype,\"spatialReference\",void 0),e([m(\"spatialReference\",[\"spatialReference\",\"tileInfo\"])],M.prototype,\"readSpatialReference\",null),e([c({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0}},read:!1}})],M.prototype,\"path\",void 0),e([c({readOnly:!0})],M.prototype,\"sublayers\",void 0),e([d(\"sublayers\",{layers:{type:[A]}})],M.prototype,\"writeSublayers\",null),e([c({json:{read:!1,write:!1}})],M.prototype,\"popupEnabled\",void 0),e([c()],M.prototype,\"tileServers\",null),e([u(\"tileServers\")],M.prototype,\"castTileServers\",null),e([c({readOnly:!0,json:{read:!1}})],M.prototype,\"type\",void 0),e([c(P)],M.prototype,\"url\",void 0),M=e([h(\"esri.layers.TileLayer\")],M),M.prototype.fetchTile.__isDefault__=!0;var C=M;export default C;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../request.js\";import{throwIfAborted as s}from\"../../core/promiseUtils.js\";import{urlToObject as t}from\"../../core/urlUtils.js\";import{Version as o}from\"../../core/Version.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{reader as p}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import l from\"../../geometry/Extent.js\";import n from\"../../geometry/SpatialReference.js\";import{id as u,popupEnabled as c}from\"../support/commonProperties.js\";const y=y=>{let m=class extends y{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=null}readCapabilities(e,r){const s=r.capabilities&&r.capabilities.split(\",\").map((e=>e.toLowerCase().trim()));if(!s)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const t=this.type,i=-1!==s.indexOf(\"query\"),p=-1!==s.indexOf(\"map\"),a=!!r.exportTilesAllowed,l=-1!==s.indexOf(\"tilemap\"),n=\"tile\"!==t&&!!r.supportsDynamicLayers,u=\"tile\"!==t&&(!r.tileInfo||n),c=\"tile\"!==t&&(!r.tileInfo||n),y=\"tile\"!==t,m=!!r.cimVersion&&o.parse(r.cimVersion).since(1,4);return{operations:{supportsQuery:i,supportsExportMap:p,supportsExportTiles:a,supportsTileMap:l},exportMap:p?{supportsArcadeExpressionForLabeling:m,supportsSublayersChanges:y,supportsDynamicLayers:n,supportsSublayerVisibility:u,supportsSublayerDefinitionExpression:c}:null,exportTiles:a?{maxExportTilesCount:+r.maxExportTilesCount}:null}}readVersion(e,r){let s=r.currentVersion;return s||(s=r.hasOwnProperty(\"capabilities\")||r.hasOwnProperty(\"tables\")?10:r.hasOwnProperty(\"supportedImageFormatTypes\")?9.31:9.3),s}async fetchSublayerInfo(e,r){return await this.fetchAllLayersAndTables(r),this._allLayersAndTablesMap.get(e)}async fetchAllLayersAndTables(e){await this.load(e),this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=r(t(this.url).path+\"/layers\",{responseType:\"json\",query:{f:\"json\",...this.customParameters,token:this.apiKey}}).then((e=>{this._allLayersAndTablesMap=new Map;for(const r of e.data.layers)this._allLayersAndTablesMap.set(r.id,r);return{result:e.data}}),(e=>({error:e}))));const o=await this._allLayersAndTablesPromise;if(s(e),\"result\"in o)return o.result;throw o.error}};return e([i({readOnly:!0})],m.prototype,\"capabilities\",void 0),e([p(\"service\",\"capabilities\",[\"capabilities\",\"exportTilesAllowed\",\"maxExportTilesCount\",\"supportsDynamicLayers\",\"tileInfo\"])],m.prototype,\"readCapabilities\",null),e([i({json:{read:{source:\"copyrightText\"}}})],m.prototype,\"copyright\",void 0),e([i({type:l})],m.prototype,\"fullExtent\",void 0),e([i(u)],m.prototype,\"id\",void 0),e([i({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:\"showLegend\"},write:{target:\"showLegend\"}}})],m.prototype,\"legendEnabled\",void 0),e([i(c)],m.prototype,\"popupEnabled\",void 0),e([i({type:n})],m.prototype,\"spatialReference\",void 0),e([i()],m.prototype,\"version\",void 0),e([p(\"version\",[\"currentVersion\",\"capabilities\",\"tables\",\"supportedImageFormatTypes\"])],m.prototype,\"readVersion\",null),m=e([a(\"esri.layers.mixins.ArcGISMapService\")],m),m};export{y as ArcGISMapService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Collection.js\";import s from\"../../core/CollectionFlattener.js\";import t from\"../../core/Error.js\";import o from\"../../core/Logger.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import{getProperties as l}from\"../../core/accessorSupport/utils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import{nameToId as n,idToName as u}from\"../../core/accessorSupport/PropertyOrigin.js\";import y from\"../support/Sublayer.js\";import{isSublayerOverhaul as c}from\"../support/sublayerUtils.js\";const b=o.getLogger(\"esri.layers.TileLayer\");function p(e,r){const s=[],t={};return e?(e.forEach((e=>{const o=new y;if(o.read(e,r),t[o.id]=o,null!=e.parentLayerId&&-1!==e.parentLayerId){const r=t[e.parentLayerId];r.sublayers||(r.sublayers=[]),r.sublayers.unshift(o)}else s.unshift(o)})),s):s}const d=r.ofType(y);function h(e,r){e&&e.forEach((e=>{r(e),e.sublayers&&e.sublayers.length&&h(e.sublayers,r)}))}const f=o=>{let f=class extends o{constructor(...e){super(...e),this.allSublayers=new s({getCollections:()=>[this.sublayers],getChildrenFunction:e=>e.sublayers}),this.sublayersSourceJSON={2:{},3:{},4:{},5:{}},this.handles.add(this.watch(\"sublayers\",((e,r)=>this._handleSublayersChange(e,r)),!0))}readSublayers(e,r){if(!r||!e)return;const{sublayersSourceJSON:s}=this,t=n(r.origin);if(t<2)return;if(s[t]={context:r,visibleLayers:e.visibleLayers||s[t].visibleLayers,layers:e.layers||s[t].layers},t>2)return;this._set(\"serviceSublayers\",this.createSublayersForOrigin(\"service\").sublayers);const{sublayers:o,origin:a}=this.createSublayersForOrigin(\"web-document\"),i=l(this);i.setDefaultOrigin(a),this._set(\"sublayers\",new d(o)),i.setDefaultOrigin(\"user\")}findSublayerById(e){return this.allSublayers.find((r=>r.id===e))}createServiceSublayers(){return this.createSublayersForOrigin(\"service\").sublayers}createSublayersForOrigin(e){const r=n(\"web-document\"===e?\"web-map\":e);let s=2,t=this.sublayersSourceJSON[2].layers,o=this.sublayersSourceJSON[2].context,a=null;const l=[3,4,5].filter((e=>e<=r));for(const n of l){const e=this.sublayersSourceJSON[n];c(e.layers)&&(s=n,t=e.layers,o=e.context,e.visibleLayers&&(a={visibleLayers:e.visibleLayers,context:e.context}))}const i=[3,4,5].filter((e=>e>s&&e<=r));let y=null;for(const n of i){const{layers:e,visibleLayers:r,context:s}=this.sublayersSourceJSON[n];e&&(y={layers:e,context:s}),r&&(a={visibleLayers:r,context:s})}const b=p(t,o),f=new Map,S=new Set;if(y)for(const n of y.layers)f.set(n.id,n);if(a)for(const n of a.visibleLayers)S.add(n);return h(b,(e=>{y&&e.read(f.get(e.id),y.context),a&&e.read({defaultVisibility:S.has(e.id)},a.context)})),{origin:u(s),sublayers:new d({items:b})}}read(e,r){super.read(e,r),this.readSublayers(e,r)}_handleSublayersChange(e,r){r&&(r.forEach((e=>{e.parent=null,e.layer=null})),this.handles.remove(\"sublayers-owner\")),e&&(e.forEach((e=>{e.parent=this,e.layer=this})),this.handles.add([e.on(\"after-add\",(({item:e})=>{e.parent=this,e.layer=this})),e.on(\"after-remove\",(({item:e})=>{e.parent=null,e.layer=null}))],\"sublayers-owner\"),\"tile\"===this.type&&this.handles.add(e.on(\"before-changes\",(e=>{b.error(new t(\"tilelayer:sublayers-non-modifiable\",\"ISublayer can't be added, moved, or removed from the layer's sublayers\",{layer:this})),e.preventDefault()})),\"sublayers-owner\"))}};return e([a({readOnly:!0})],f.prototype,\"allSublayers\",void 0),e([a({readOnly:!0,type:r.ofType(y)})],f.prototype,\"serviceSublayers\",void 0),e([a({value:null,type:d,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],f.prototype,\"sublayers\",void 0),e([a({readOnly:!0})],f.prototype,\"sublayersSourceJSON\",void 0),f=e([i(\"esri.layers.mixins.SublayersOwner\")],f),f};export{f as SublayersOwner,h as forEachSublayer};\n"],"sourceRoot":""}