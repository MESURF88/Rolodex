{"version":3,"sources":["node_modules/@arcgis/core/layers/WebTileLayer.js","node_modules/@arcgis/core/layers/support/WMTSLayerInfo.js","node_modules/@arcgis/core/layers/support/TileMatrixSet.js","node_modules/@arcgis/core/layers/support/WMTSStyle.js","node_modules/@arcgis/core/layers/support/WMTSSublayer.js","node_modules/@arcgis/core/layers/support/wmtsUtils.js","node_modules/@arcgis/core/layers/WMTSLayer.js"],"names":["R","e","super","this","copyright","fullExtent","WebMercator","legendEnabled","isReference","popupEnabled","spatialReference","subDomains","tileInfo","size","dpi","format","compressionQuality","origin","x","y","lods","level","scale","resolution","type","urlTemplate","wmtsInfo","t","loadFromPortal","supportedTypes","then","equals","length","authority","indexOf","title","id","addResolvingPromise","Promise","resolve","levelValue","fromJSON","r","l","o","scheme","i","push","split","s","replace","map","charAt","substring","templateUrl","signal","timestamp","n","getTileUrl","a","responseType","query","_ts","data","levelValues","tileServers","urlPath","z","col","row","String","value","json","write","prototype","readOnly","read","Boolean","enabled","overridePolicy","origins","source","p","customLayerParameters","customParameters","layerIdentifier","tileMatrixSet","url","Object","hasOwnProperty","clone","description","legendUrl","isDefault","keywords","slice","h","imageFormats","layer","styles","tileMatrixSetId","tileMatrixSets","_get","_set","console","error","getItemAt","find","imageFormat","styleId","ofType","ignoreOrigin","DOMParser","parseFromString","documentElement","Map","f","c","u","querySelector","getElementsByTagName","d","Array","call","g","T","M","serviceMode","S","some","attributes","nodeValue","getAttribute","V","E","b","C","N","layers","set","formats","tileUrl","layerMap","dimensionMap","nodeType","Node","ELEMENT_NODE","childNodes","nodeName","textContent","forEach","get","dimensions","dimensions2","toLowerCase","template","resourceType","xmin","parseFloat","ymin","xmax","ymax","wkid","abstract","parseInt","pop","includes","I","Number","v","L","w","toJSON","A","values","Math","PI","metersPerDegree","_","Set","_sublayersHandles","operationalLayerType","resourceInfo","sublayers","version","watch","removeAll","add","on","item","catch","_fetchService","activeLayer","_getLowerCasedUrlParams","isArray","m","style","getUrlTemplate","_mergeParams","toArray","_override","_clearOverride","substr","_getTileMatrixSetById","_appendCustomLayerParameters","ssl","_getCapabilities","_getCapabilitiesUrl","findSublayerById","encodeURIComponent","_appendCustomParameters","keys","has","target","service","O"],"mappings":"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","file":"static/js/92.40bb484e.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../geometry.js\";import t from\"../request.js\";import r from\"../core/Error.js\";import{MultiOriginJSONMixin as l}from\"../core/MultiOriginJSONSupport.js\";import{replace as o}from\"../core/string.js\";import{Url as s,isProtocolRelative as i,normalize as n}from\"../core/urlUtils.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{reader as p}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as u}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as m}from\"../core/accessorSupport/decorators/writer.js\";import c from\"./Layer.js\";import{BlendLayer as f}from\"./mixins/BlendLayer.js\";import{OperationalLayer as y}from\"./mixins/OperationalLayer.js\";import{PortalLayer as h}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as d}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as v}from\"./mixins/ScaleRangeLayer.js\";import w from\"./support/LOD.js\";import g from\"./support/TileInfo.js\";import j from\"./support/WMTSLayerInfo.js\";import T from\"../geometry/Extent.js\";import b from\"../geometry/SpatialReference.js\";import S from\"../geometry/Point.js\";let R=class extends(f(d(v(y(h(l(c))))))){constructor(...e){super(...e),this.copyright=\"\",this.fullExtent=new T(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,b.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=b.WebMercator,this.subDomains=null,this.tileInfo=new g({size:[256,256],dpi:96,format:\"png8\",compressionQuality:0,origin:new S({x:-20037508.342787,y:20037508.342787,spatialReference:b.WebMercator}),spatialReference:b.WebMercator,lods:[new w({level:0,scale:591657527.591555,resolution:156543.033928}),new w({level:1,scale:295828763.795777,resolution:78271.5169639999}),new w({level:2,scale:147914381.897889,resolution:39135.7584820001}),new w({level:3,scale:73957190.948944,resolution:19567.8792409999}),new w({level:4,scale:36978595.474472,resolution:9783.93962049996}),new w({level:5,scale:18489297.737236,resolution:4891.96981024998}),new w({level:6,scale:9244648.868618,resolution:2445.98490512499}),new w({level:7,scale:4622324.434309,resolution:1222.99245256249}),new w({level:8,scale:2311162.217155,resolution:611.49622628138}),new w({level:9,scale:1155581.108577,resolution:305.748113140558}),new w({level:10,scale:577790.554289,resolution:152.874056570411}),new w({level:11,scale:288895.277144,resolution:76.4370282850732}),new w({level:12,scale:144447.638572,resolution:38.2185141425366}),new w({level:13,scale:72223.819286,resolution:19.1092570712683}),new w({level:14,scale:36111.909643,resolution:9.55462853563415}),new w({level:15,scale:18055.954822,resolution:4.77731426794937}),new w({level:16,scale:9027.977411,resolution:2.38865713397468}),new w({level:17,scale:4513.988705,resolution:1.19432856685505}),new w({level:18,scale:2256.994353,resolution:.597164283559817}),new w({level:19,scale:1128.497176,resolution:.298582141647617})]}),this.type=\"web-tile\",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(e,t){return\"string\"==typeof e?{urlTemplate:e,...t}:e}load(e){const t=this.loadFromPortal({supportedTypes:[\"WMTS\"]},e).then((()=>{let e=\"\";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const t=new s(this.urlTemplate);!!this.subDomains&&this.subDomains.length>0||-1===t.authority.indexOf(\"{subDomain}\")||(e=\"is missing 'subDomains' property\")}else e=\"spatialReference must match tileInfo.spatialReference\";else e=\"is missing the required 'urlTemplate' property value\";if(e)throw new r(\"web-tile-layer:load\",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${e}`)}));return this.addResolvingPromise(t),Promise.resolve(this)}get levelValues(){const e=[];if(!this.tileInfo)return null;for(const t of this.tileInfo.lods)e[t.level]=t.levelValue||t.level;return e}readSpatialReference(e,t){return e||t.fullExtent&&t.fullExtent.spatialReference&&b.fromJSON(t.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const e=[],{urlTemplate:t,subDomains:r}=this,l=new s(t),o=l.scheme?l.scheme+\"://\":\"//\",i=o+l.authority+\"/\";if(-1===l.authority.indexOf(\"{subDomain}\"))e.push(i);else if(r&&r.length>0&&l.authority.split(\".\").length>1)for(const s of r)e.push(o+l.authority.replace(/\\{subDomain\\}/gi,s)+\"/\");return e.map((e=>(\"/\"!==e.charAt(e.length-1)&&(e+=\"/\"),e)))}get urlPath(){if(!this.urlTemplate)return null;const e=this.urlTemplate,t=new s(e),r=(t.scheme?t.scheme+\"://\":\"//\")+t.authority+\"/\";return e.substring(r.length)}readUrlTemplate(e,t){return e||t.templateUrl}writeUrlTemplate(e,t){e&&i(e)&&(e=\"https:\"+e),e&&(e=e.replace(/\\{z\\}/gi,\"{level}\").replace(/\\{x\\}/gi,\"{col}\").replace(/\\{y\\}/gi,\"{row}\"),e=n(e)),t.templateUrl=e}fetchTile(e,r,l,o={}){const{signal:s,timestamp:i}=o,n=this.getTileUrl(e,r,l),a={responseType:\"image\",signal:s};return null!=i&&(a.query={_ts:o.timestamp}),t(n,a).then((e=>e.data))}getTileUrl(e,t,r){const l=this.levelValues[e];return this.tileServers[t%this.tileServers.length]+o(this.urlPath,{level:l,z:l,col:r,x:r,row:t,y:t})}};e([a({type:String,value:\"\",json:{write:!0}})],R.prototype,\"copyright\",void 0),e([a({type:T,json:{write:!0}})],R.prototype,\"fullExtent\",void 0),e([a({readOnly:!0,json:{read:!1,write:!1}})],R.prototype,\"legendEnabled\",void 0),e([a({type:[\"show\",\"hide\"]})],R.prototype,\"listMode\",void 0),e([a()],R.prototype,\"levelValues\",null),e([a({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],R.prototype,\"isReference\",void 0),e([a({type:[\"WebTiledLayer\"],value:\"WebTiledLayer\"})],R.prototype,\"operationalLayerType\",void 0),e([a({readOnly:!0,json:{read:!1,write:!1}})],R.prototype,\"popupEnabled\",void 0),e([a({type:b})],R.prototype,\"spatialReference\",void 0),e([p(\"spatialReference\",[\"spatialReference\",\"fullExtent.spatialReference\"])],R.prototype,\"readSpatialReference\",null),e([a({type:[String],json:{write:!0}})],R.prototype,\"subDomains\",void 0),e([a({type:g,json:{write:!0}})],R.prototype,\"tileInfo\",void 0),e([a({readOnly:!0})],R.prototype,\"tileServers\",null),e([a({json:{read:!1}})],R.prototype,\"type\",void 0),e([a()],R.prototype,\"urlPath\",null),e([a({type:String,json:{origins:{\"portal-item\":{read:{source:\"url\"}}}}})],R.prototype,\"urlTemplate\",void 0),e([p(\"urlTemplate\",[\"urlTemplate\",\"templateUrl\"])],R.prototype,\"readUrlTemplate\",null),e([m(\"urlTemplate\",{templateUrl:{type:String}})],R.prototype,\"writeUrlTemplate\",null),e([a({type:j,json:{write:!0}})],R.prototype,\"wmtsInfo\",void 0),R=e([u(\"esri.layers.WebTileLayer\")],R);var x=R;export default x;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import{clone as e}from\"../../core/lang.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";var i;let p=i=class extends t{constructor(r){super(r)}clone(){return new i({customLayerParameters:e(this.customLayerParameters),customParameters:e(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};r([o({json:{type:Object,write:!0}})],p.prototype,\"customLayerParameters\",void 0),r([o({json:{type:Object,write:!0}})],p.prototype,\"customParameters\",void 0),r([o({type:String,json:{write:!0}})],p.prototype,\"layerIdentifier\",void 0),r([o({type:String,json:{write:!0}})],p.prototype,\"tileMatrixSet\",void 0),r([o({type:String,json:{write:!0}})],p.prototype,\"url\",void 0),p=i=r([s(\"esri.layer.support.WMTSLayerInfo\")],p);var a=p;export default a;export{p as WMTSLayerInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import s from\"../../geometry/Extent.js\";import i from\"./TileInfo.js\";var l;let n=l=class extends o{constructor(t){super(t),this.fullExtent=null,this.id=null,this.tileInfo=null}clone(){const t=new l;return this.hasOwnProperty(\"fullExtent\")&&(t.fullExtent=this.fullExtent&&this.fullExtent.clone()),this.hasOwnProperty(\"id\")&&(t.id=this.id),this.hasOwnProperty(\"tileInfo\")&&(t.tileInfo=this.tileInfo&&this.tileInfo.clone()),t}};t([e({type:s,json:{read:{source:\"fullExtent\"}}})],n.prototype,\"fullExtent\",void 0),t([e({type:String,json:{read:{source:\"id\"}}})],n.prototype,\"id\",void 0),t([e({type:i,json:{read:{source:\"tileInfo\"}}})],n.prototype,\"tileInfo\",void 0),n=l=t([r(\"esri.layer.support.TileMatrixSet\")],n);var p=n;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{JSONSupport as e}from\"../../core/JSONSupport.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";var o;let i=o=class extends e{constructor(r){super(r),this.id=null,this.title=null,this.description=null,this.legendUrl=null}clone(){const r=new o;return this.hasOwnProperty(\"description\")&&(r.description=this.description),this.hasOwnProperty(\"id\")&&(r.id=this.id),this.hasOwnProperty(\"isDefault\")&&(r.isDefault=this.isDefault),this.hasOwnProperty(\"keywords\")&&(r.keywords=this.keywords&&this.keywords.slice()),this.hasOwnProperty(\"legendUrl\")&&(r.legendUrl=this.legendUrl),this.hasOwnProperty(\"title\")&&(r.title=this.title),r}};r([s({json:{read:{source:\"id\"}}})],i.prototype,\"id\",void 0),r([s({json:{read:{source:\"title\"}}})],i.prototype,\"title\",void 0),r([s({json:{read:{source:\"abstract\"}}})],i.prototype,\"description\",void 0),r([s({json:{read:{source:\"legendUrl\"}}})],i.prototype,\"legendUrl\",void 0),r([s({json:{read:{source:\"isDefault\"}}})],i.prototype,\"isDefault\",void 0),r([s({json:{read:{source:\"keywords\"}}})],i.prototype,\"keywords\",void 0),i=o=r([t(\"esri.layer.support.WMTSStyle\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Collection.js\";import{JSONSupport as r}from\"../../core/JSONSupport.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{reader as i}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import l from\"../../geometry/Extent.js\";import a from\"./TileMatrixSet.js\";import n from\"./WMTSStyle.js\";var p;let h=p=class extends r{constructor(t){super(t),this.fullExtent=null,this.imageFormats=null,this.id=null,this.layer=null,this.styles=null,this.tileMatrixSetId=null,this.tileMatrixSets=null}get description(){return this._get(\"description\")}set description(t){this._set(\"description\",t)}readFullExtent(t,e){return(t=e.fullExtent)?l.fromJSON(t):null}get imageFormat(){let t=this._get(\"imageFormat\");return t||(t=this.imageFormats&&this.imageFormats.length?this.imageFormats[0]:\"\"),t}set imageFormat(t){const e=this.imageFormats;t&&(t.indexOf(\"image/\")>-1||e&&-1===e.indexOf(t))&&(-1===t.indexOf(\"image/\")&&(t=\"image/\"+t),e&&-1===e.indexOf(t))?console.error(\"The layer doesn't support the format of \"+t):this._set(\"imageFormat\",t)}get styleId(){let t=this._get(\"styleId\");return t||(t=this.styles&&this.styles.length?this.styles.getItemAt(0).id:\"\"),t}set styleId(t){this._set(\"styleId\",t)}get title(){return this._get(\"title\")}set title(t){this._set(\"title\",t)}get tileMatrixSet(){return this.tileMatrixSets?this.tileMatrixSets.find((t=>t.id===this.tileMatrixSetId)):null}clone(){const t=new p;return this.hasOwnProperty(\"description\")&&(t.description=this.description),this.hasOwnProperty(\"imageFormats\")&&(t.imageFormats=this.imageFormats&&this.imageFormats.slice()),this.hasOwnProperty(\"imageFormat\")&&(t.imageFormat=this.imageFormat),this.hasOwnProperty(\"fullExtent\")&&(t.fullExtent=this.fullExtent&&this.fullExtent.clone()),this.hasOwnProperty(\"id\")&&(t.id=this.id),this.hasOwnProperty(\"layer\")&&(t.layer=this.layer),this.hasOwnProperty(\"styleId\")&&(t.styleId=this.styleId),this.hasOwnProperty(\"styles\")&&(t.styles=this.styles&&this.styles.clone()),this.hasOwnProperty(\"tileMatrixSetId\")&&(t.tileMatrixSetId=this.tileMatrixSetId),this.hasOwnProperty(\"tileMatrixSets\")&&(t.tileMatrixSets=this.tileMatrixSets.clone()),this.hasOwnProperty(\"title\")&&(t.title=this.title),t}};t([s()],h.prototype,\"description\",null),t([s()],h.prototype,\"fullExtent\",void 0),t([i(\"fullExtent\",[\"fullExtent\"])],h.prototype,\"readFullExtent\",null),t([s()],h.prototype,\"imageFormat\",null),t([s({json:{read:{source:\"formats\"}}})],h.prototype,\"imageFormats\",void 0),t([s()],h.prototype,\"id\",void 0),t([s()],h.prototype,\"layer\",void 0),t([s()],h.prototype,\"styleId\",null),t([s({type:e.ofType(n),json:{read:{source:\"styles\"}}})],h.prototype,\"styles\",void 0),t([s({value:null,json:{write:{ignoreOrigin:!0}}})],h.prototype,\"title\",null),t([s()],h.prototype,\"tileMatrixSetId\",void 0),t([s({readOnly:!0})],h.prototype,\"tileMatrixSet\",null),t([s({type:e.ofType(a),json:{read:{source:\"tileMatrixSets\"}}})],h.prototype,\"tileMatrixSets\",void 0),h=p=t([o(\"esri.layers.support.WMTSSublayer\")],h);var m=h;export default m;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import i from\"../../geometry/Extent.js\";import n from\"../../geometry/Point.js\";import{getReferenceEllipsoidFromWKID as r}from\"../../geometry/projectionEllipsoid.js\";import l from\"../../geometry/SpatialReference.js\";import o from\"../../geometry/support/WKIDUnitConversion.js\";import s from\"./TileInfo.js\";const a=90.71428571428571,c=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function u(t,i){var n,r;t=t.replace(/ows:/gi,\"\");const l=(new DOMParser).parseFromString(t,\"text/xml\").documentElement,o=new Map,s=new Map,a=f(\"Contents\",l);if(!a)throw new e(\"wmtslayer:wmts-capabilities-xml-is-not-valid\");const c=f(\"OperationsMetadata\",l),u=null==c?void 0:c.querySelector(\"[name='GetTile']\"),p=null==u?void 0:u.getElementsByTagName(\"Get\"),d=p&&Array.prototype.slice.call(p),g=null!=(n=(null==i||null==(r=i.url)?void 0:r.indexOf(\"https\"))>-1)&&n;let T,y,M=i.serviceMode,S=i&&i.url;if(d&&d.length&&d.some((e=>{const t=f(\"Constraint\",e);return!t||x(\"AllowedValues\",\"Value\",M,t)?(S=e.attributes[0].nodeValue,!0):(!t||x(\"AllowedValues\",\"Value\",\"RESTful\",t)||x(\"AllowedValues\",\"Value\",\"REST\",t)?y=e.attributes[0].nodeValue:t&&!x(\"AllowedValues\",\"Value\",\"KVP\",t)||(T=e.attributes[0].nodeValue),!1)})),!S)if(y)S=y,M=\"RESTful\";else if(T)S=T,M=\"KVP\";else{const e=f(\"ServiceMetadataURL\",l);S=e&&e.getAttribute(\"xlink:href\")}const V=S.indexOf(\"1.0.0/\");-1===V&&\"RESTful\"===M?S+=\"/\":V>-1&&(S=S.substring(0,V)),\"KVP\"===M&&(S+=V>-1?\"\":\"?\"),g&&(S=S.replace(/^http:/i,\"https:\"));const E=h(\"ServiceIdentification>ServiceTypeVersion\",l),b=h(\"ServiceIdentification>AccessConstraints\",l),C=m(\"Layer\",a),N=m(\"TileMatrixSet\",a);return{copyright:b,layers:C.map((e=>{const t=h(\"Identifier\",e);return o.set(t,e),w(t,e,N,g,E)})),tileUrl:S,serviceMode:M,layerMap:o,dimensionMap:s}}function p(e){return e.layers.forEach((e=>{e.tileMatrixSets.forEach((e=>{const t=e.tileInfo;96!==t.dpi&&(t.lods.forEach((i=>{i.scale=96*i.scale/t.dpi,i.resolution=A(t.spatialReference.wkid,i.scale*a/96,e.id)})),t.dpi=96)}))})),e}function d(e){return e.nodeType===Node.ELEMENT_NODE}function f(e,t){for(let i=0;i<t.childNodes.length;i++){const n=t.childNodes[i];if(d(n)&&n.nodeName===e)return n}return null}function m(e,t){const i=[];for(let n=0;n<t.childNodes.length;n++){const r=t.childNodes[n];d(r)&&r.nodeName===e&&i.push(r)}return i}function g(e,t){const i=[];for(let n=0;n<t.childNodes.length;n++){const r=t.childNodes[n];d(r)&&r.nodeName===e&&i.push(r)}return i.map((e=>e.textContent))}function h(e,t){return e.split(\">\").forEach((e=>{t&&(t=f(e,t))})),t&&t.textContent}function x(e,t,i,n){let r;return Array.prototype.slice.call(n.childNodes).some((n=>{if(n.nodeName.indexOf(e)>-1){const e=f(t,n),l=e&&e.textContent;if(l===i||i.split(\":\")&&i.split(\":\")[1]===l)return r=n,!0}return!1})),r}function w(e,t,i,n,r){const l=h(\"Abstract\",t),o=g(\"Format\",t);return{id:e,fullExtent:S(t),description:l,formats:o,styles:V(t,n),title:h(\"Title\",t),tileMatrixSets:E(r,t,i)}}function T(e,t){var i;const n=[],r=null==(i=e.layerMap)?void 0:i.get(t);if(!r)return;const l=m(\"ResourceURL\",r),o=m(\"Dimension\",r);let s,a,c,u;return o.length&&(s=h(\"Identifier\",o[0]),a=g(\"Default\",o[0])||g(\"Value\",o[0])),o.length>1&&(c=h(\"Identifier\",o[1]),u=g(\"Default\",o[1])||g(\"Value\",o[1])),e.dimensionMap.set(t,{dimensions:a,dimensions2:u}),l.forEach((e=>{let t=e.getAttribute(\"template\");if(\"tile\"===e.getAttribute(\"resourceType\")){if(s&&a.length)if(t.indexOf(\"{\"+s+\"}\")>-1)t=t.replace(\"{\"+s+\"}\",\"{dimensionValue}\");else{const e=t.toLowerCase().indexOf(\"{\"+s.toLowerCase()+\"}\");e>-1&&(t=t.substring(0,e)+\"{dimensionValue}\"+t.substring(e+s.length+2))}if(c&&u.length)if(t.indexOf(\"{\"+c+\"}\")>-1)t=t.replace(\"{\"+c+\"}\",\"{dimensionValue2}\");else{const e=t.toLowerCase().indexOf(\"{\"+c.toLowerCase()+\"}\");e>-1&&(t=t.substring(0,e)+\"{dimensionValue2}\"+t.substring(e+c.length+2))}n.push({template:t,format:e.getAttribute(\"format\"),resourceType:\"tile\"})}})),n}function y(e,t,i,n,r,l,o,s){const{dimensionMap:a}=e,c=T(e,t),u=a.get(t).dimensions&&a.get(t).dimensions[0],p=a.get(t).dimensions2&&a.get(t).dimensions2[0];let d=\"\";if(c&&c.length>0){let e=null;c.some((t=>t.format===n&&(e=t,!0))),e||(e=c[o%c.length]),d=e.template.replace(/\\{Style\\}/gi,r).replace(/\\{TileMatrixSet\\}/gi,i).replace(/\\{TileMatrix\\}/gi,l).replace(/\\{TileRow\\}/gi,\"\"+o).replace(/\\{TileCol\\}/gi,\"\"+s).replace(/\\{dimensionValue\\}/gi,u).replace(/\\{dimensionValue2\\}/gi,p)}return d}function M(e,t,i,n){const{dimensionMap:r}=e,l=T(e,t);let o=\"\";if(l&&l.length>0){const e=r.get(t).dimensions&&r.get(t).dimensions[0],s=r.get(t).dimensions2&&r.get(t).dimensions2[0];o=l[0].template,o.indexOf(\".xxx\")===o.length-4&&(o=o.slice(0,o.length-4)),o=o.replace(/\\{Style\\}/gi,n),o=o.replace(/\\{TileMatrixSet\\}/gi,i),o=o.replace(/\\{TileMatrix\\}/gi,\"{level}\"),o=o.replace(/\\{TileRow\\}/gi,\"{row}\"),o=o.replace(/\\{TileCol\\}/gi,\"{col}\"),o=o.replace(/\\{dimensionValue\\}/gi,e),o=o.replace(/\\{dimensionValue2\\}/gi,s)}return o}function S(e){const t=f(\"WGS84BoundingBox\",e),i=t?h(\"LowerCorner\",t).split(\" \"):[\"-180\",\"-90\"],n=t?h(\"UpperCorner\",t).split(\" \"):[\"180\",\"90\"];return{xmin:parseFloat(i[0]),ymin:parseFloat(i[1]),xmax:parseFloat(n[0]),ymax:parseFloat(n[1]),spatialReference:{wkid:4326}}}function V(e,t){return m(\"Style\",e).map((e=>{const i=f(\"LegendURL\",e),n=f(\"Keywords\",e),r=n&&g(\"Keyword\",n);let l=i&&i.getAttribute(\"xlink:href\");t&&(l=l&&l.replace(/^http:/i,\"https:\"));return{abstract:h(\"Abstract\",e),id:h(\"Identifier\",e),isDefault:\"true\"===e.getAttribute(\"isDefault\"),keywords:r,legendUrl:l,title:h(\"Title\",e)}}))}function E(e,t,i){return m(\"TileMatrixSetLink\",t).map((e=>f(\"TileMatrixSet\",e).textContent)).map((n=>b(e,n,t,i)))}function b(e,t,i,n){const r=g(\"TileMatrix\",x(\"TileMatrixSetLink\",\"TileMatrixSet\",t,i)),l=n.find((e=>{const i=f(\"Identifier\",e),n=i&&i.textContent;return!!(n===t||t.split(\":\")&&t.split(\":\")[1]===n)})),o=C(l),a=o.spatialReference,c=a.wkid,u=f(\"TileMatrix\",l),p=[parseInt(h(\"TileWidth\",u),10),parseInt(h(\"TileHeight\",u),10)],d=[];if(r.length)r.forEach(((e,i)=>{const n=x(\"TileMatrix\",\"Identifier\",e,l);d.push(L(n,c,i,t))}));else{m(\"TileMatrix\",l).forEach(((e,i)=>{d.push(L(e,c,i,t))}))}const w=N(e,l,o,p,d[0]);return{id:t,fullExtent:w.toJSON(),tileInfo:new s({dpi:96,spatialReference:a,size:p,origin:o,lods:d}).toJSON()}}function C(e){let i=h(\"SupportedCRS\",e);i&&(i=i.toLowerCase());let r=parseInt(i.split(\":\").pop(),10);900913!==r&&3857!==r||(r=102100);const o=I(i);t(o)&&(r=o);const s=new l({wkid:r}),a=h(\"TopLeftCorner\",f(\"TileMatrix\",e)).split(\" \"),c=a[0].split(\"E\").map((e=>Number(e))),u=a[1].split(\"E\").map((e=>Number(e))),p=c.length>1?c[0]*10**c[1]:c[0],d=u.length>1?u[0]*10**u[1]:u[0];return i.includes(\"epsg\")&&v(r)?new n(d,p,s):new n(p,d,s)}function N(e,t,n,r,l){const o=f(\"BoundingBox\",t);let s,a,c,u,p,d;if(o&&(s=h(\"LowerCorner\",o).split(\" \"),a=h(\"UpperCorner\",o).split(\" \")),s&&s.length>1&&a&&a.length>1)c=parseFloat(s[0]),p=parseFloat(s[1]),u=parseFloat(a[0]),d=parseFloat(a[1]);else{const e=f(\"TileMatrix\",t),i=parseFloat(h(\"MatrixWidth\",e)),o=parseFloat(h(\"MatrixHeight\",e));c=n.x,d=n.y,u=c+i*r[0]*l.resolution,p=d-o*r[1]*l.resolution}return R(e,n.spatialReference)?new i(p,c,d,u,n.spatialReference):new i(c,p,u,d,n.spatialReference)}function R(e,t){return\"1.0.0\"===e&&v(t.wkid)}function v(e){return c.some((([t,i])=>e>=t&&e<=i))}function I(e){return e.includes(\"crs84\")||e.includes(\"crs:84\")?4326:e.includes(\"crs83\")||e.includes(\"crs:83\")?4269:e.includes(\"crs27\")||e.includes(\"crs:27\")?4267:null}function L(e,t,i,n){const r=h(\"Identifier\",e),l=h(\"ScaleDenominator\",e).split(\"E\").map((e=>Number(e)));let o;o=l.length>1?l[0]*10**l[1]:l[0];const s=A(t,o,n);return o*=96/a,{level:i,levelValue:r,scale:o,resolution:s}}function A(e,t,i){let n;return n=o.hasOwnProperty(String(e))?o.values[o[e]]:\"default028mm\"===i?6370997*Math.PI/180:r(e).metersPerDegree,7*t/25e3/n}export{y as getTileUrlFromResourceUrls,M as getTileUrlTemplateFromResourceUrls,u as parseCapabilities,p as parseResourceInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../request.js\";import r from\"../core/Collection.js\";import i from\"../core/Error.js\";import s from\"../core/Handles.js\";import{clone as a}from\"../core/lang.js\";import{MultiOriginJSONMixin as o}from\"../core/MultiOriginJSONSupport.js\";import{getDeepValue as l}from\"../core/object.js\";import{throwIfAbortError as n}from\"../core/promiseUtils.js\";import{urlToObject as m}from\"../core/urlUtils.js\";import{property as c}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{reader as u}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as p}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as y}from\"../core/accessorSupport/decorators/writer.js\";import d from\"../geometry/Extent.js\";import h from\"./Layer.js\";import f from\"./WebTileLayer.js\";import{BlendLayer as v}from\"./mixins/BlendLayer.js\";import{OperationalLayer as g}from\"./mixins/OperationalLayer.js\";import{PortalLayer as L}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as w}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as I}from\"./mixins/ScaleRangeLayer.js\";import S from\"./support/TileInfo.js\";import M from\"./support/WMTSLayerInfo.js\";import P from\"./support/WMTSSublayer.js\";import{getTileUrlFromResourceUrls as T,getTileUrlTemplateFromResourceUrls as b,parseCapabilities as j,parseResourceInfo as x}from\"./support/wmtsUtils.js\";const E={\"image/png\":\".png\",\"image/png8\":\".png\",\"image/png24\":\".png\",\"image/png32\":\".png\",\"image/jpg\":\".jpg\",\"image/jpeg\":\".jpeg\",\"image/gif\":\".gif\",\"image/bmp\":\".bmp\",\"image/tiff\":\".tif\",\"image/jpgpng\":\"\",\"image/jpegpng\":\"\",\"image/unknown\":\"\"},_=new Set([\"version\",\"service\",\"request\",\"layer\",\"style\",\"format\",\"tilematrixset\",\"tilematrix\",\"tilerow\",\"tilecol\"]);let C=class extends(v(w(I(g(L(o(h))))))){constructor(...e){super(...e),this._sublayersHandles=new s,this.copyright=\"\",this.customParameters=null,this.customLayerParameters=null,this.fullExtent=null,this.operationalLayerType=\"WebTiledLayer\",this.resourceInfo=null,this.serviceMode=\"RESTful\",this.sublayers=null,this.type=\"wmts\",this.version=\"1.0.0\",this.watch(\"activeLayer\",((e,t)=>{t&&(t.layer=null),e&&(e.layer=this)}),!0),this.watch(\"sublayers\",((e,t)=>{t&&(t.forEach((e=>{e.layer=null})),this._sublayersHandles.removeAll(),this._sublayersHandles=null),e&&(e.forEach((e=>{e.layer=this})),this._sublayersHandles||(this._sublayersHandles=new s),this._sublayersHandles.add([e.on(\"after-add\",(({item:e})=>{e.layer=this})),e.on(\"after-remove\",(({item:e})=>{e.layer=null}))]))}),!0)}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}load(e){if(\"KVP\"===this.serviceMode||\"RESTful\"===this.serviceMode)return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"WMTS\"]},e).catch(n).then((()=>this._fetchService(e))).catch((e=>{throw n(e),new i(\"wmtslayer:unsupported-service-data\",\"Invalid response from the WMTS service.\",{error:e})}))),Promise.resolve(this);console.error(\"WMTS mode could only be 'KVP' or 'RESTful'\")}get activeLayer(){return this._get(\"activeLayer\")}set activeLayer(e){this._set(\"activeLayer\",e)}readActiveLayerFromService(e,t,r){let i;return this.activeLayer?t.layers.some((e=>e.id===this.activeLayer.id&&(i=e,!0))):(this.activeLayer=new P,i=t.layers[0]),this.activeLayer.read(i,r),this.activeLayer}readActiveLayerFromItemOrWebDoc(e,t){const{templateUrl:r,wmtsInfo:i}=t,s=r?this._getLowerCasedUrlParams(r):null,a=i&&i.layerIdentifier;let o=null;const l=i&&i.tileMatrixSet;l&&(Array.isArray(l)?l.length&&(o=l[0]):o=l);const n=s&&s.format,m=s&&s.style;return new P({id:a,imageFormat:n,styleId:m,tileMatrixSetId:o})}writeActiveLayer(e,t,r,i){const s=this.activeLayer;t.templateUrl=this.getUrlTemplate(s.id,s.tileMatrixSetId,s.imageFormat,s.styleId);const a=l(\"tileMatrixSet.tileInfo\",s);t.tileInfo=a?a.toJSON(i):null,t.wmtsInfo={...t.wmtsInfo,layerIdentifier:s.id,tileMatrixSet:s.tileMatrixSetId}}readCustomParameters(e,t){const r=t.wmtsInfo;return r?this._mergeParams(r.customParameters,r.url):null}get fullExtents(){const e=[];return this.activeLayer.tileMatrixSets.forEach((t=>{t.fullExtent&&e.push(t.fullExtent)})),e}readServiceMode(e,t){return t.templateUrl.indexOf(\"?\")>-1?\"KVP\":\"RESTful\"}readSublayersFromService(e,t,r){return R(t.layers,r)}get supportedSpatialReferences(){return this.activeLayer.tileMatrixSets.map((e=>e.tileInfo.spatialReference)).toArray()}get title(){var e,t;return null!=(e=null==(t=this.activeLayer)?void 0:t.title)?e:\"Layer\"}set title(e){e?this._override(\"title\",e):this._clearOverride(\"title\")}get url(){return this._get(\"url\")}set url(e){e&&\"/\"===e.substr(-1)?this._set(\"url\",e.slice(0,-1)):this._set(\"url\",e)}createWebTileLayer(e){const t=this.getUrlTemplate(this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId),r=this._getTileMatrixSetById(e.tileMatrixSetId).tileInfo,i=e.fullExtent,s=new M({layerIdentifier:e.id,tileMatrixSet:e.tileMatrixSetId,url:this.url});return this.customLayerParameters&&(s.customLayerParameters=this.customLayerParameters),this.customParameters&&(s.customParameters=this.customParameters),new f({fullExtent:i,urlTemplate:t,tileInfo:r,wmtsInfo:s})}fetchTile(e,r,i){const s=this.getTileUrl(e,r,i);return t(s,{responseType:\"image\"}).then((e=>e.data))}findSublayerById(e){return this.sublayers.find((t=>t.id===e))}getTileUrl(e,t,r){const i=this._getTileMatrixSetById(this.activeLayer.tileMatrixSetId).tileInfo.lods[e],s=i?i.levelValue?i.levelValue:`${i.level}`:`${e}`;let a=this.resourceInfo?\"\":T({dimensionMap:this.dimensionMap,layerMap:this.layerMap},this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId,s,t,r);if(!a){a=this.getUrlTemplate(this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId).replace(/\\{level\\}/gi,s).replace(/\\{row\\}/gi,`${t}`).replace(/\\{col\\}/gi,`${r}`)}return a=this._appendCustomLayerParameters(a),a}getUrlTemplate(e,t,r,i){if(!this.resourceInfo){const r=b({dimensionMap:this.dimensionMap,layerMap:this.layerMap},e,t,i);if(r)return r}if(\"KVP\"===this.serviceMode)return this.url+\"?SERVICE=WMTS&VERSION=\"+this.version+\"&REQUEST=GetTile&LAYER=\"+e+\"&STYLE=\"+i+\"&FORMAT=\"+r+\"&TILEMATRIXSET=\"+t+\"&TILEMATRIX={level}&TILEROW={row}&TILECOL={col}\";if(\"RESTful\"===this.serviceMode){let s=\"\";return E[r.toLowerCase()]&&(s=E[r.toLowerCase()]),this.url+e+\"/\"+i+\"/\"+t+\"/{level}/{row}/{col}\"+s}return\"\"}async _fetchService(e){let t;if(this.resourceInfo)\"KVP\"===this.resourceInfo.serviceMode&&(this.url+=this.url.indexOf(\"?\")>-1?\"\":\"?\"),t={ssl:!1,data:this.resourceInfo};else try{t=await this._getCapabilities(this.serviceMode,e)}catch{const s=\"KVP\"===this.serviceMode?\"RESTful\":\"KVP\";try{t=await this._getCapabilities(s,e),this.serviceMode=s}catch(r){throw new i(\"wmtslayer:unsupported-service-data\",\"Services does not support RESTful or KVP service modes.\",{error:r})}}this.resourceInfo?t.data=x(t.data):t.data=j(t.data,{serviceMode:this.serviceMode,url:this.url}),t.data&&this.read(t.data,{origin:\"service\"})}async _getCapabilities(e,r){const i=this._getCapabilitiesUrl(e);return await t(i,{...r,responseType:\"text\"})}_getTileMatrixSetById(e){return this.findSublayerById(this.activeLayer.id).tileMatrixSets.find((t=>t.id===e))}_appendCustomParameters(e){if(this.customParameters)for(const t in this.customParameters)e+=(-1===e.indexOf(\"?\")?\"?\":\"&\")+t+\"=\"+encodeURIComponent(this.customParameters[t]);return e}_appendCustomLayerParameters(e){if(this.customLayerParameters||this.customParameters){const t={...a(this.customParameters),...this.customLayerParameters};for(const r in t)e+=(-1===e.indexOf(\"?\")?\"?\":\"&\")+r+\"=\"+encodeURIComponent(t[r])}return e}_getCapabilitiesUrl(e){let t;return this.url=this.url.split(\"?\")[0],\"KVP\"===e?t=this.url+\"?request=GetCapabilities&service=WMTS&version=\"+this.version:\"RESTful\"===e&&(t=this.url+\"/\"+this.version+\"/WMTSCapabilities.xml\"),t=this._appendCustomParameters(t),t}_getLowerCasedUrlParams(e){if(!e)return null;const t=m(e).query;if(!t)return null;const r={};return Object.keys(t).forEach((e=>{r[e.toLowerCase()]=t[e]})),r}_mergeParams(e,t){const r=this._getLowerCasedUrlParams(t);if(r){const t=Object.keys(r);t.length&&(e=e?a(e):{},t.forEach((t=>{e.hasOwnProperty(t)||_.has(t)||(e[t]=r[t])})))}return e}};function R(e,t){return e.map((e=>{const r=new P;return r.read(e,t),r}))}e([c()],C.prototype,\"dimensionMap\",void 0),e([c()],C.prototype,\"layerMap\",void 0),e([c({type:P,json:{origins:{\"web-document\":{write:{ignoreOrigin:!0}}}}})],C.prototype,\"activeLayer\",null),e([u(\"service\",\"activeLayer\",[\"layers\"])],C.prototype,\"readActiveLayerFromService\",null),e([u([\"web-document\",\"portal-item\"],\"activeLayer\",[\"wmtsInfo\"])],C.prototype,\"readActiveLayerFromItemOrWebDoc\",null),e([y([\"web-document\",\"portal-item\"],\"activeLayer\",{templateUrl:{type:String},tileInfo:{type:S},\"wmtsInfo.layerIdentifier\":{type:String},\"wmtsInfo.tileMatrixSet\":{type:String}})],C.prototype,\"writeActiveLayer\",null),e([c({type:String,value:\"\",json:{write:!0}})],C.prototype,\"copyright\",void 0),e([c({type:[\"show\",\"hide\"]})],C.prototype,\"listMode\",void 0),e([c({json:{origins:{\"web-document\":{read:{source:[\"wmtsInfo.customParameters\",\"wmtsInfo.url\"]},write:{target:\"wmtsInfo.customParameters\"}},\"portal-item\":{read:{source:[\"wmtsInfo.customParameters\",\"wmtsInfo.url\"]},write:{target:\"wmtsInfo.customParameters\"}}}}})],C.prototype,\"customParameters\",void 0),e([u(\"web-document\",\"customParameters\"),u(\"portal-item\",\"customParameters\")],C.prototype,\"readCustomParameters\",null),e([c({json:{origins:{\"web-document\":{read:{source:\"wmtsInfo.customLayerParameters\"},write:{target:\"wmtsInfo.customLayerParameters\"}},\"portal-item\":{read:{source:\"wmtsInfo.customLayerParameters\"},write:{target:\"wmtsInfo.customLayerParameters\"}}}}})],C.prototype,\"customLayerParameters\",void 0),e([c({type:d,json:{write:{ignoreOrigin:!0},origins:{\"web-document\":{read:{source:\"fullExtent\"}},\"portal-item\":{read:{source:\"fullExtent\"}}}}})],C.prototype,\"fullExtent\",void 0),e([c({readOnly:!0})],C.prototype,\"fullExtents\",null),e([c({type:[\"WebTiledLayer\"]})],C.prototype,\"operationalLayerType\",void 0),e([c()],C.prototype,\"resourceInfo\",void 0),e([c()],C.prototype,\"serviceMode\",void 0),e([u([\"portal-item\",\"web-document\"],\"serviceMode\",[\"templateUrl\"])],C.prototype,\"readServiceMode\",null),e([c({type:r.ofType(P)})],C.prototype,\"sublayers\",void 0),e([u(\"service\",\"sublayers\",[\"layers\"])],C.prototype,\"readSublayersFromService\",null),e([c({readOnly:!0})],C.prototype,\"supportedSpatialReferences\",null),e([c({json:{read:{source:\"title\"}}})],C.prototype,\"title\",null),e([c({json:{read:!1},readOnly:!0,value:\"wmts\"})],C.prototype,\"type\",void 0),e([c({json:{origins:{service:{read:{source:\"tileUrl\"}},\"web-document\":{read:{source:\"wmtsInfo.url\"},write:{target:\"wmtsInfo.url\"}},\"portal-item\":{read:{source:\"wmtsInfo.url\"},write:{target:\"wmtsInfo.url\"}}}}})],C.prototype,\"url\",null),e([c()],C.prototype,\"version\",void 0),C=e([p(\"esri.layers.WMTSLayer\")],C);var O=C;export default O;\n"],"sourceRoot":""}